
<%
   @user = @student || @teacher
%>
<div class="qa_box">
  <div class="qa_big_cell">
    <div class="row">
      <div>
        <span>
          <%= t("view.student_bars.schedules") %>
        </span>
        <span style="float: right;">
          <%= link_to t("view.notification_setting.notice"), live_studio.settings_student_path(@user) if @user.student? %>
          <%= link_to t("view.notification_setting.notice"), live_studio.settings_teacher_path(@user) if @user.teacher? %>
        </span>
      </div>
      <div class="">
        <a href='#schedules_div' data-toggle="tab">
          <div class="schedules-list-ceil active" id="schedules_ceil">
            <%= t('schedules.tab.schedules') %>
          </div>
        </a>
        <a href='#wait_lesson' data-toggle="tab">
          <div class="schedules-list-ceil" id="wait_lesson_ceil">
            <%= t('schedules.tab.wait') %>
          </div>
        </a>
        <a href='#close_lessons' data-toggle="tab">
          <div class="schedules-list-ceil" id="close_lessons_ceil">
            <%= t('schedules.tab.close') %>
          </div>
        </a>
      </div>
      <div class="tab-content">
        <div id="schedules_div" class="tab-pane fade in active">
          <div id="calendar">
          </div>
          <div id="calendar_data">
          </div>
        </div>
        <div id="wait_lesson" class="tab-pane fade">
          <%= render partial: '/live_studio/student/students/lesson', locals: {lessons: @wait_lessons} %>
        </div>
        <div id="close_lessons" class="tab-pane fade">
          <%= render partial: '/live_studio/student/students/lesson', locals: {lessons: @close_lessons} %>
        </div>
      </div>
    </div>
  </div>
</div>

<% content_for :javascript do -%>
  <%= javascript_include_tag "jquery-calendar" %>
  <script type="text/javascript" charset="utf-8">
    var calendar = $("#calendar").calendar(
      {
        data_url: '<%= live_studio.schedule_sources_courses_path(user_id: (@student || @teacher).id) %>',
        callback: function(data) {
          console.log(data);
          $('#calendar_data').html(data);
        }
      });

    $(function() {
      $('.schedules-list-ceil').click(function(event){
        $('.schedules-list-ceil').removeClass('active');
        $(this).addClass('active');
      });
    });
  </script>
<% end -%>
