

Started GET "/courses/84" for 10.0.2.2 at 2015-09-06 10:57:38 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[35mTeacher Load (9.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.9ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson.html.erb (3.3ms)
  Rendered courses/_course_topics.html.erb (0.5ms)
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  Rendered courses/_course_lessons.html.erb (40.0ms)
  Rendered courses/_course_layout.html.erb (82.6ms)
  Rendered lessons/show.html.erb within layouts/application (88.6ms)
  Rendered layouts/_top_bar.html.erb (1.8ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 1322ms (Views: 1087.5ms | ActiveRecord: 26.2ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-06 10:58:13 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[35mTeacher Load (1.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (1.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson.html.erb (0.1ms)
  Rendered courses/_course_topics.html.erb (0.2ms)
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  Rendered courses/_course_lessons.html.erb (2.3ms)
  Rendered courses/_course_layout.html.erb (11.2ms)
  Rendered lessons/show.html.erb within layouts/application (12.2ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 72ms (Views: 58.9ms | ActiveRecord: 5.6ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-06 10:58:18 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[35mTeacher Load (1.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.9ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 84]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson.html.erb (0.2ms)
  Rendered courses/_course_topics.html.erb (0.1ms)
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  Rendered courses/_course_lessons.html.erb (2.5ms)
  Rendered courses/_course_layout.html.erb (14.3ms)
  Rendered lessons/show.html.erb within layouts/application (16.4ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 75ms (Views: 62.7ms | ActiveRecord: 4.9ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-06 10:58:25 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (1.2ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 84]]
  [1m[36mCurriculum Load (1.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (2.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson.html.erb (0.1ms)
  Rendered courses/_course_topics.html.erb (0.1ms)
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  Rendered courses/_course_lessons.html.erb (2.5ms)
  Rendered courses/_course_layout.html.erb (15.5ms)
  Rendered lessons/show.html.erb within layouts/application (17.0ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 77ms (Views: 61.8ms | ActiveRecord: 7.2ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-06 10:58:45 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (1.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 84]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson.html.erb (0.1ms)
  Rendered courses/_course_topics.html.erb (0.1ms)
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  Rendered courses/_course_lessons.html.erb (3.4ms)
  Rendered courses/_course_layout.html.erb (15.3ms)
  Rendered lessons/show.html.erb within layouts/application (17.2ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 111ms (Views: 99.1ms | ActiveRecord: 4.8ms)


Started GET "/teachers/courses/84/lessons/new" for 10.0.2.2 at 2015-09-06 10:58:50 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"84"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:new
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1[0m  [["token", "1441537130-YjtAJ1XBq4__8jXHerK0qA"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441537130-YjtAJ1XBq4__8jXHerK0qA"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (1.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (3.6ms)
  Rendered videos/_collapse_form.html.erb (37.1ms)
  Rendered videos/_form.html.erb (40.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (4.2ms)
  Rendered teachers/lessons/_form.html.erb (75.1ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (77.3ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 225ms (Views: 128.6ms | ActiveRecord: 11.1ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-06 10:59:01 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bNq8a6x8CWJCSPliztl8x5+Mz/KRfJ66PskcYfkwf7KnbeXaEjizQYPXnEyHwuiWotoTHZR1NctdXC06az7pVQ==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f3170da3538 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-1l9faui.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441537130-YjtAJ1XBq4__8jXHerK0qA"}}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit videos:create
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "71f5a59f684ff2be31c970ca4e36d359.mp4"], ["token", "1441537130-YjtAJ1XBq4__8jXHerK0qA"], ["author_id", 82], ["created_at", "2015-09-06 10:59:03.030820"], ["updated_at", "2015-09-06 10:59:03.030820"]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
Completed 500 Internal Server Error in 1102ms

SocketError (getaddrinfo: Name or service not known):
  app/controllers/videos_controller.rb:7:in `create'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.9ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (26.3ms)


Started GET "/teachers/courses/84/lessons/new" for 10.0.2.2 at 2015-09-06 14:31:47 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"84"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:new
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1[0m  [["token", "1441549908--zY8vy_FKn0qd1wd223uQg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441549908--zY8vy_FKn0qd1wd223uQg"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_collapse_form.html.erb (8.8ms)
  Rendered videos/_form.html.erb (11.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.0ms)
  Rendered teachers/lessons/_form.html.erb (49.2ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (51.0ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 349ms (Views: 119.4ms | ActiveRecord: 20.7ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-06 14:32:08 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"PIvniWNfeMpHujzMKaY1js7kj24OOaWuBkog+cdD5Nb3PL443RvC6YYlWeJgvaHf87JTgQswDt9l3xGiVU1yMQ==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f3170c55a00 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-je0w59.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441549908--zY8vy_FKn0qd1wd223uQg"}}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit videos:create
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "4c51d66dce4364b012b191f0acf8bf60.mp4"], ["token", "1441549908--zY8vy_FKn0qd1wd223uQg"], ["author_id", 82], ["created_at", "2015-09-06 14:32:10.196017"], ["updated_at", "2015-09-06 14:32:10.196017"]]
  [1m[36m (18.3ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE[0m  [["id", 307]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3[0m  [["state", "in_queue"], ["updated_at", "2015-09-06 14:32:41.057185"], ["id", 307]]
  [1m[35m (0.8ms)[0m  COMMIT
  Rendered videos/_video.html.erb (1.0ms)
  Rendered videos/create.js.erb (3.5ms)
Completed 200 OK in 32225ms (Views: 14.9ms | ActiveRecord: 23.9ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-06 14:40:54 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1[0m  [["course_id", 84]]
Completed 500 Internal Server Error in 8ms

NoMethodError (undefined method `qa_files' for nil:NilClass):
  app/controllers/courses_controller.rb:13:in `show'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (34.0ms)


Started GET "/" for 10.0.2.2 at 2015-09-06 14:41:00 +0000
Processing by HomeController#index as HTML
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit home:index
Redirected to http://localhost:3000/teachers/82/questions
Completed 302 Found in 8ms (ActiveRecord: 0.5ms)


Started GET "/teachers/82/questions" for 10.0.2.2 at 2015-09-06 14:41:00 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"82"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers:questions
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mQuestion Load (1.2ms)[0m  [1mSELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0[0m  [["teacher_id", 82]]
  Rendered questions/_question.html.erb (0.0ms)
  Rendered teachers/_task.html.erb (30.7ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (33.7ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 199ms (Views: 130.1ms | ActiveRecord: 5.5ms)


Started GET "/teachers/82/curriculums" for 10.0.2.2 at 2015-09-06 14:41:06 +0000
Processing by TeachersController#curriculums as HTML
  Parameters: {"id"=>"82"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers:curriculums
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."category" = $1 AND "teaching_programs"."subject" = $2  ORDER BY "teaching_programs"."created_at" ASC  [["category", "高中"], ["subject", "化学"]]
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 8]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 9]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 10]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 11]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 12]]
  [1m[35mCurriculum Load (1.1ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 13]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 14]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 15]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 82]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  [1m[36mTeacher Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 9]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 10]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 12]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (1.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 13]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 14]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 15]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (69.4ms)
  Rendered teachers/curriculums.html.erb within layouts/teacher_home (72.1ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 147ms (Views: 108.8ms | ActiveRecord: 16.4ms)


Started GET "/curriculums/379" for 10.0.2.2 at 2015-09-06 14:41:12 +0000
Processing by CurriculumsController#show as HTML
  Parameters: {"id"=>"379"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit curriculums:show
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mCourse Load (1.0ms)[0m  [1mSELECT "courses".* FROM "courses" WHERE "courses"."curriculum_id" IN (379)  ORDER BY position[0m
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" IN (84)  ORDER BY created_at
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/subjects/_header.html.erb (0.6ms)
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mSchool Load (0.5ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCity Load (0.5ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered curriculums/_header.html.erb (30.3ms)
  Rendered curriculums/_search.html.erb (3.5ms)
  Rendered courses/_lesson_cell.html.erb (0.0ms)
  Rendered courses/_course_cell.html.erb (4.1ms)
  Rendered curriculums/show.html.erb within layouts/application (76.7ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 144ms (Views: 121.6ms | ActiveRecord: 7.3ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-06 14:41:20 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1[0m  [["course_id", 84]]
Completed 500 Internal Server Error in 9ms

NoMethodError (undefined method `qa_files' for nil:NilClass):
  app/controllers/courses_controller.rb:13:in `show'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.9ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (25.5ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-06 14:50:45 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (1.4ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 84]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson.html.erb (0.4ms)
  Rendered courses/_course_topics.html.erb (0.1ms)
  [1m[36mLesson Load (1.3ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  Rendered courses/_course_lessons.html.erb (6.0ms)
  Rendered courses/_course_layout.html.erb (48.5ms)
  Rendered lessons/show.html.erb within layouts/application (51.5ms)
  Rendered layouts/_top_bar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 341ms (Views: 142.5ms | ActiveRecord: 18.9ms)


Started GET "/teachers/courses/84/lessons/new" for 10.0.2.2 at 2015-09-06 14:50:52 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"84"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:new
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36m (1.3ms)[0m  [1mSELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mCurriculum Load (0.4ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (8.5ms)
  Rendered videos/_form.html.erb (10.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (35.9ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (37.6ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 188ms (Views: 86.8ms | ActiveRecord: 9.2ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-06 14:51:04 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"/icr6PGswTbXYPDmvZxTID5AluN465Ry9XuEFxKWpMM1kHJZT+h7FRb/lcj0h8dxAxZKDH3iPwOW7rVMgJgyJA==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003061028 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-19lwkd5.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q"}}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit videos:create
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "addde7af41ebdc0a3ee0c413a7e1420d.mp4"], ["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"], ["author_id", 82], ["created_at", "2015-09-06 14:51:06.103280"], ["updated_at", "2015-09-06 14:51:06.103280"]]
  [1m[36m (17.1ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE[0m  [["id", 308]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3[0m  [["state", "in_queue"], ["updated_at", "2015-09-06 14:51:37.044790"], ["id", 308]]
  [1m[35m (1.1ms)[0m  COMMIT
  Rendered videos/_video.html.erb (0.9ms)
  Rendered videos/create.js.erb (4.5ms)
Completed 200 OK in 32323ms (Views: 21.3ms | ActiveRecord: 22.9ms)


Started POST "/teachers/courses/84/lessons" for 10.0.2.2 at 2015-09-06 14:52:22 +0000
Processing by Teachers::LessonsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"/icr6PGswTbXYPDmvZxTID5AluN465Ry9XuEFxKWpMM1kHJZT+h7FRb/lcj0h8dxAxZKDH3iPwOW7rVMgJgyJA==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x0000000655b738 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-d7nfhb.html>, @original_filename="85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html\"\r\nContent-Type: text/html\r\n">}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x0000000655b5a8 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-4tbhx9.jpeg>, @original_filename="企业信息.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE4\xBC\x81\xE4\xB8\x9A\xE4\xBF\xA1\xE6\x81\xAF.jpeg\"\r\nContent-Type: image/jpeg\r\n">}}}, "edit"=>"确定", "course_id"=>"84"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:create
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "lessons" ("name", "desc", "token", "tags", "teacher_id", "course_id", "curriculum_id", "state", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "化学实验的重要性"], ["desc", "化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性"], ["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"], ["tags", "[\"\",\"知识点讲解\"]"], ["teacher_id", 82], ["course_id", 84], ["curriculum_id", 379], ["state", "editing"], ["created_at", "2015-09-06 14:52:22.751093"], ["updated_at", "2015-09-06 14:52:22.751093"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "courses"."id" = $1[0m  [["id", 84]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "curriculums"."id" = $1  [["id", 379]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "videos" SET "videoable_type" = $1, "videoable_id" = $2, "updated_at" = $3 WHERE "videos"."id" = $4  [["videoable_type", "Lesson"], ["videoable_id", 179], ["updated_at", "2015-09-06 14:52:22.765883"], ["id", 308]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "29d6d4680341ea3d226a244146c03e7f.html"], ["author_id", 82], ["original_filename", "85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html"], ["qa_file_type", "text/html"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 179], ["created_at", "2015-09-06 14:52:22.769988"], ["updated_at", "2015-09-06 14:52:22.769988"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "ebf3d73b7781eb44b81949532d283189.jpeg"], ["author_id", 82], ["original_filename", "企业信息.jpeg"], ["qa_file_type", "image/jpeg"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 179], ["created_at", "2015-09-06 14:52:22.903775"], ["updated_at", "2015-09-06 14:52:22.903775"]]
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 283ms (ActiveRecord: 19.0ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-06 14:52:23 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.7ms)
  [1m[36mQaFile Load (0.8ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.3ms)
  Rendered lessons/_lesson.html.erb (15.2ms)
  [1m[35mTopic Load (0.8ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 179]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (4.7ms)
  Rendered courses/_course_topics.html.erb (7.3ms)
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (8.4ms)
  Rendered courses/_course_layout.html.erb (43.3ms)
  Rendered lessons/show.html.erb within layouts/application (46.1ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 139ms (Views: 100.8ms | ActiveRecord: 7.0ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-06 14:52:38 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.0ms)
  Rendered videos/_collapse_form.html.erb (10.9ms)
  Rendered videos/_form.html.erb (14.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.8ms)
  Rendered teachers/lessons/_submit.html.erb (3.9ms)
  Rendered teachers/lessons/_form.html.erb (50.6ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (53.4ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 128ms (Views: 113.2ms | ActiveRecord: 4.2ms)


Started PATCH "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-06 14:53:15 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"N3R+VvZu7YQJZ7X3qUfTF9lEWIz0+yfGgFBOx+tHsaD8wyfnSCpXp8j40NngXEdG5BKEY/HyjLfjxX+ceUknRw==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"65"}, "1"=>{"_destroy"=>"false", "id"=>"66"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f3170ab0718 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-6g8d7b.png>, @original_filename="招聘.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE6\x8B\x9B\xE8\x81\x98.png\"\r\nContent-Type: image/png\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (1.0ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.4ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (65, 66)  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCurriculum Load (0.9ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "83548cc7eec5946788b7ef13052c8c3a.png"], ["author_id", 82], ["original_filename", "招聘.png"], ["qa_file_type", "image/png"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-06 14:53:15.458883"], ["updated_at", "2015-09-06 14:53:15.458883"]]
  [1m[35m (9.7ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 212ms (ActiveRecord: 16.6ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-06 14:53:15 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[36mTeacher Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (1.0ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.5ms)
  [1m[35mQaFile Load (0.3ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.6ms)
  Rendered lessons/_lesson.html.erb (5.7ms)
  [1m[36mTopic Load (0.6ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 179]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.6ms)
  Rendered courses/_course_topics.html.erb (5.7ms)
  [1m[35mLesson Load (0.5ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (7.5ms)
  Rendered courses/_course_layout.html.erb (27.6ms)
  Rendered lessons/show.html.erb within layouts/application (30.9ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 99ms (Views: 79.6ms | ActiveRecord: 6.3ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-06 14:55:11 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.4ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (11.6ms)
  Rendered videos/_form.html.erb (13.8ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.8ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.4ms)
  Rendered teachers/lessons/_form.html.erb (89.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (91.8ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 351ms (Views: 150.0ms | ActiveRecord: 21.2ms)


Started PATCH "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-06 14:55:38 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Xw8hx3c+Fge8dUXAx1DCdTEJ5KI6fS4CkiOGobojKj2UuHh2yXqsJH3qIO6OS1YkDF84TT90hXPxtrf6KC282g==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"65"}, "1"=>{"_destroy"=>"false", "id"=>"66"}, "2"=>{"_destroy"=>"false", "id"=>"67"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f31703c5930 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-fakn3c.pptx>, @original_filename="晋升晨松_ppt.pptx", @content_type="application/vnd.openxmlformats-officedocument.presentationml.presentation", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE6\x99\x8B\xE5\x8D\x87\xE6\x99\xA8\xE6\x9D\xBE_ppt.pptx\"\r\nContent-Type: application/vnd.openxmlformats-officedocument.presentationml.presentation\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (65, 66, 67)[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCurriculum Load (0.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "3f3e03a1aa34916b906f80483ecdf428.pptx"], ["author_id", 82], ["original_filename", "晋升晨松_ppt.pptx"], ["qa_file_type", "application/vnd.openxmlformats-officedocument.presentationml.presentation"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-06 14:55:38.555131"], ["updated_at", "2015-09-06 14:55:38.555131"]]
  [1m[36m (11.8ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 6969ms (ActiveRecord: 18.3ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-06 14:55:45 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (1.2ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (1.9ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.6ms)
  Rendered lessons/_lesson.html.erb (7.6ms)
  [1m[35mTopic Load (0.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 179]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.3ms)
  Rendered courses/_course_topics.html.erb (5.7ms)
  [1m[36mLesson Load (1.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (8.7ms)
  Rendered courses/_course_layout.html.erb (37.4ms)
  Rendered lessons/show.html.erb within layouts/application (39.3ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 114ms (Views: 82.6ms | ActiveRecord: 10.6ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-06 14:56:59 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (1.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.1ms)
  Rendered videos/_collapse_form.html.erb (10.9ms)
  Rendered videos/_form.html.erb (12.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (1.2ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.6ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered teachers/lessons/_submit.html.erb (1.1ms)
  Rendered teachers/lessons/_form.html.erb (52.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (62.2ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 134ms (Views: 118.6ms | ActiveRecord: 5.6ms)


Started PATCH "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-06 14:59:01 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Upst590ATswC7d7MiO7wHuRPRVS4vsCEmWfEZgIZSsKZLHRWY0T078Nyu+LB9WRP2RmZu723a/X68vU9kBfcJQ==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"65"}, "1"=>{"_destroy"=>"false", "id"=>"66"}, "2"=>{"_destroy"=>"false", "id"=>"67"}, "3"=>{"_destroy"=>"false", "id"=>"68"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x000000047849d0 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-1qxr589.key>, @original_filename="介绍.key", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE4\xBB\x8B\xE7\xBB\x8D.key\"\r\nContent-Type: application/octet-stream\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (65, 66, 67, 68)  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCurriculum Load (1.1ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "5f14e921e3e980d9956201c642ab0b10.key"], ["author_id", 82], ["original_filename", "介绍.key"], ["qa_file_type", "application/octet-stream"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-06 14:59:02.017349"], ["updated_at", "2015-09-06 14:59:02.017349"]]
  [1m[35m (10.3ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 5807ms (ActiveRecord: 16.2ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-06 14:59:07 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.4ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (1.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.8ms)
  Rendered lessons/_lesson.html.erb (8.5ms)
  [1m[36mTopic Load (0.7ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 179]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.6ms)
  Rendered courses/_course_topics.html.erb (5.4ms)
  [1m[35mLesson Load (0.7ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (10.8ms)
  Rendered courses/_course_layout.html.erb (38.7ms)
  Rendered lessons/show.html.erb within layouts/application (40.7ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 113ms (Views: 95.8ms | ActiveRecord: 7.2ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-06 15:01:34 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.4ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (9.3ms)
  Rendered videos/_form.html.erb (11.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.6ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.8ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (3.0ms)
  Rendered teachers/lessons/_form.html.erb (51.1ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (53.0ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 124ms (Views: 109.8ms | ActiveRecord: 4.5ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-06 15:07:36 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.4ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.4ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (12.5ms)
  Rendered videos/_form.html.erb (14.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.8ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.6ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (4.6ms)
  Rendered teachers/lessons/_form.html.erb (112.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (114.3ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 417ms (Views: 182.0ms | ActiveRecord: 22.3ms)


Started PATCH "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-06 15:08:24 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"aU6iCSi8i7ajeRc9kcO5+jRsDPmLXKIpsBzBbhPfutSi+fu4lvgxlWLmchPY2C2rCTrQFo5VCVjTifA1gdEsMw==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"65"}, "1"=>{"_destroy"=>"false", "id"=>"66"}, "2"=>{"_destroy"=>"false", "id"=>"67"}, "3"=>{"_destroy"=>"false", "id"=>"68"}, "4"=>{"_destroy"=>"false", "id"=>"69"}, "new_qa_files_1441552062283"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f317022e888 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-stokk2.png>, @original_filename="86d8d3348f8d004f9cb4f04b72ed0b39.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441552062283][name]\"; filename=\"86d8d3348f8d004f9cb4f04b72ed0b39.png\"\r\nContent-Type: image/png\r\n">}, "new_qa_files_1441552076032"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f317022e680 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-13kd8f2.key>, @original_filename="交流.key", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441552076032][name]\"; filename=\"\xE4\xBA\xA4\xE6\xB5\x81.key\"\r\nContent-Type: application/octet-stream\r\n">}, "new_qa_files_1441552094217"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f317022e4f0 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-1gc1kja.md>, @original_filename="链接入库.md", @content_type="text/markdown", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441552094217][name]\"; filename=\"\xE9\x93\xBE\xE6\x8E\xA5\xE5\x85\xA5\xE5\xBA\x93.md\"\r\nContent-Type: text/markdown\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (65, 66, 67, 68, 69)[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "48e9bf87cfe0ae3804c0e0b7772eea93.png"], ["author_id", 82], ["original_filename", "86d8d3348f8d004f9cb4f04b72ed0b39.png"], ["qa_file_type", "image/png"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-06 15:08:24.120963"], ["updated_at", "2015-09-06 15:08:24.120963"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "299e16e1c5580dd3623aec6015708c5d.key"], ["author_id", 82], ["original_filename", "交流.key"], ["qa_file_type", "application/octet-stream"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-06 15:08:24.244143"], ["updated_at", "2015-09-06 15:08:24.244143"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "875b8158b1ddabc1ad582364cdc41399.md"], ["author_id", 82], ["original_filename", "链接入库.md"], ["qa_file_type", "text/markdown"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-06 15:08:24.998440"], ["updated_at", "2015-09-06 15:08:24.998440"]]
  [1m[36m (8.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 1104ms (ActiveRecord: 15.9ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-06 15:08:25 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (3.0ms)
  Rendered lessons/_lesson.html.erb (11.0ms)
  [1m[35mTopic Load (0.5ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 179]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.3ms)
  Rendered courses/_course_topics.html.erb (4.5ms)
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (9.0ms)
  Rendered courses/_course_layout.html.erb (35.3ms)
  Rendered lessons/show.html.erb within layouts/application (38.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 119ms (Views: 87.4ms | ActiveRecord: 6.8ms)


Started GET "/teachers/courses/84/lessons/new" for 10.0.2.2 at 2015-09-06 15:08:39 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"84"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:new
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (5.8ms)
  Rendered videos/_form.html.erb (7.5ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (3.5ms)
  Rendered teachers/lessons/_form.html.erb (39.6ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (42.3ms)
  Rendered layouts/_top_bar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 131ms (Views: 109.7ms | ActiveRecord: 3.8ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-06 15:08:55 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uaHmmXAGQKrNhHUZW6ADAyiAanc5o2CCw7zB9aSA2DpyFr8ozkL6iQwbEDcSu5dSFda2mDyqy/OgKfCuNo5O3Q==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f3170ed7670 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-fwd4m2.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441552120-SqarBjY5rVUP3o9uQS7nuA"}}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit videos:create
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "3e1bba23b580407cb96ef933ad4728d4.mp4"], ["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"], ["author_id", 82], ["created_at", "2015-09-06 15:08:56.366189"], ["updated_at", "2015-09-06 15:08:56.366189"]]
  [1m[36m (9.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE[0m  [["id", 309]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3[0m  [["state", "in_queue"], ["updated_at", "2015-09-06 15:09:28.038085"], ["id", 309]]
  [1m[35m (1.1ms)[0m  COMMIT
  Rendered videos/_video.html.erb (0.6ms)
  Rendered videos/create.js.erb (3.3ms)
Completed 200 OK in 32738ms (Views: 16.7ms | ActiveRecord: 15.1ms)


Started POST "/teachers/courses/84/lessons" for 10.0.2.2 at 2015-09-06 15:10:14 +0000
Processing by Teachers::LessonsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uaHmmXAGQKrNhHUZW6ADAyiAanc5o2CCw7zB9aSA2DpyFr8ozkL6iQwbEDcSu5dSFda2mDyqy/OgKfCuNo5O3Q==", "lesson"=>{"name"=>"测试，第二课", "desc"=>"测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课", "token"=>"1441552120-SqarBjY5rVUP3o9uQS7nuA", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f31709b71b8 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-128i9hn.png>, @original_filename="86d8d3348f8d004f9cb4f04b72ed0b39.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"86d8d3348f8d004f9cb4f04b72ed0b39.png\"\r\nContent-Type: image/png\r\n">}, "new_qa_files_1441552197714"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f31709b6e20 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-1oyr67u.html>, @original_filename="8989dd45bacb71c603372b93a24f6ae51433670458711.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441552197714][name]\"; filename=\"8989dd45bacb71c603372b93a24f6ae51433670458711.html\"\r\nContent-Type: text/html\r\n">}, "new_qa_files_1441552202563"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f31709b6c18 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-1as5s24.jpg>, @original_filename="倒排索引.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441552202563][name]\"; filename=\"\xE5\x80\x92\xE6\x8E\x92\xE7\xB4\xA2\xE5\xBC\x95.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "new_qa_files_1441552207082"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f31709b6998 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-tpzeoz.docx>, @original_filename="泛需求检索的需求细化引导产品规划-晨松.docx", @content_type="application/vnd.openxmlformats-officedocument.wordprocessingml.document", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441552207082][name]\"; filename=\"\xE6\xB3\x9B\xE9\x9C\x80\xE6\xB1\x82\xE6\xA3\x80\xE7\xB4\xA2\xE7\x9A\x84\xE9\x9C\x80\xE6\xB1\x82\xE7\xBB\x86\xE5\x8C\x96\xE5\xBC\x95\xE5\xAF\xBC\xE4\xBA\xA7\xE5\x93\x81\xE8\xA7\x84\xE5\x88\x92-\xE6\x99\xA8\xE6\x9D\xBE.docx\"\r\nContent-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document\r\n">}}}, "edit"=>"确定", "course_id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:create
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mTeacher Load (1.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mCurriculum Load (1.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "lessons" ("name", "desc", "token", "tags", "teacher_id", "course_id", "curriculum_id", "state", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "测试，第二课"], ["desc", "测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课"], ["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"], ["tags", "[\"\",\"知识点讲解\"]"], ["teacher_id", 82], ["course_id", 84], ["curriculum_id", 379], ["state", "editing"], ["created_at", "2015-09-06 15:10:14.307215"], ["updated_at", "2015-09-06 15:10:14.307215"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "courses"."id" = $1[0m  [["id", 84]]
  [1m[35mSQL (1.0ms)[0m  UPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "curriculums"."id" = $1  [["id", 379]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "videos" SET "videoable_type" = $1, "videoable_id" = $2, "updated_at" = $3 WHERE "videos"."id" = $4  [["videoable_type", "Lesson"], ["videoable_id", 180], ["updated_at", "2015-09-06 15:10:14.320469"], ["id", 309]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "2f3841a9305cce74684eccf4eb8181aa.png"], ["author_id", 82], ["original_filename", "86d8d3348f8d004f9cb4f04b72ed0b39.png"], ["qa_file_type", "image/png"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 180], ["created_at", "2015-09-06 15:10:14.323594"], ["updated_at", "2015-09-06 15:10:14.323594"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "2dfb04d289d46bef1df6180587b4428a.html"], ["author_id", 82], ["original_filename", "8989dd45bacb71c603372b93a24f6ae51433670458711.html"], ["qa_file_type", "text/html"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 180], ["created_at", "2015-09-06 15:10:14.456668"], ["updated_at", "2015-09-06 15:10:14.456668"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "e3faddb5846deed22a51b69cbf766ee1.jpg"], ["author_id", 82], ["original_filename", "倒排索引.jpg"], ["qa_file_type", "image/jpeg"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 180], ["created_at", "2015-09-06 15:10:14.529776"], ["updated_at", "2015-09-06 15:10:14.529776"]]
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "8c757a91edd0637be4b155c21b4486c7.docx"], ["author_id", 82], ["original_filename", "泛需求检索的需求细化引导产品规划-晨松.docx"], ["qa_file_type", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 180], ["created_at", "2015-09-06 15:10:14.628025"], ["updated_at", "2015-09-06 15:10:14.628025"]]
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=180
Completed 302 Found in 979ms (ActiveRecord: 13.9ms)


Started GET "/courses/84?lesson_id=180" for 10.0.2.2 at 2015-09-06 15:10:15 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"180", "id"=>"84"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (1.0ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 180]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.0ms)
  [1m[36mQaFile Load (0.8ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.3ms)
  Rendered lessons/_lesson.html.erb (13.1ms)
  [1m[35mTopic Load (0.5ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 180]]
  Rendered collection (0.2ms)
  Rendered topics/_index.html.erb (2.7ms)
  Rendered courses/_course_topics.html.erb (4.9ms)
  [1m[36mLesson Load (1.2ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (16.0ms)
  Rendered courses/_course_layout.html.erb (46.7ms)
  Rendered lessons/show.html.erb within layouts/application (51.3ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 146ms (Views: 125.5ms | ActiveRecord: 8.5ms)


Started GET "/courses/84?lesson_id=180" for 10.0.2.2 at 2015-09-06 15:15:52 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"180", "id"=>"84"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.9ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 180]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.4ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.5ms)
  Rendered lessons/_lesson.html.erb (14.9ms)
  [1m[35mTopic Load (0.8ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 180]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.0ms)
  Rendered courses/_course_topics.html.erb (5.3ms)
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (13.5ms)
  Rendered courses/_course_layout.html.erb (66.2ms)
  Rendered lessons/show.html.erb within layouts/application (69.4ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 373ms (Views: 131.9ms | ActiveRecord: 28.1ms)


Started GET "/teachers/courses/84/lessons/180/edit" for 10.0.2.2 at 2015-09-06 15:16:01 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"180"}
  [1m[35mTeacher Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 180]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.8ms)
  Rendered videos/_collapse_form.html.erb (15.6ms)
  Rendered videos/_form.html.erb (17.9ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.8ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (3.3ms)
  Rendered teachers/lessons/_form.html.erb (63.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (65.4ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 136ms (Views: 119.2ms | ActiveRecord: 5.5ms)


Started PATCH "/teachers/courses/84/lessons/180" for 10.0.2.2 at 2015-09-06 15:16:24 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uFvf2xRtRkR2gmKmGhmx40kW4LS9uatFtwfR3AlCsipz7IZqqin8Z7cdB4hTAiWydEA8W7iwADTUkuCHm0wkzQ==", "lesson"=>{"name"=>"测试，第二课", "desc"=>"测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课,测试，第二课", "token"=>"1441552120-SqarBjY5rVUP3o9uQS7nuA", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"73"}, "1"=>{"_destroy"=>"false", "id"=>"74"}, "2"=>{"_destroy"=>"false", "id"=>"75"}, "3"=>{"_destroy"=>"false", "id"=>"76"}, "new_qa_files_1441552569079"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f31709200d8 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-1e64zdq.pdf>, @original_filename=" 兰超-简历.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441552569079][name]\"; filename=\" \xE5\x85\xB0\xE8\xB6\x85-\xE7\xAE\x80\xE5\x8E\x86.pdf\"\r\nContent-Type: application/pdf\r\n">}, "new_qa_files_1441552577657"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f317091fd40 @tempfile=#<Tempfile:/tmp/RackMultipart20150906-15936-a13oar.key>, @original_filename="答疑时间.key", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441552577657][name]\"; filename=\"\xE7\xAD\x94\xE7\x96\x91\xE6\x97\xB6\xE9\x97\xB4.key\"\r\nContent-Type: application/octet-stream\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"180"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 180]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (73, 74, 75, 76)  [["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCurriculum Load (1.1ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "b929881551a559c68333fe7ae7d710a2.pdf"], ["author_id", 82], ["original_filename", " 兰超-简历.pdf"], ["qa_file_type", "application/pdf"], ["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-06 15:16:24.806620"], ["updated_at", "2015-09-06 15:16:24.806620"]]
  [1m[36mSQL (31.3ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "eec18dfcd5a620cfed6b01674f9e55e7.key"], ["author_id", 82], ["original_filename", "答疑时间.key"], ["qa_file_type", "application/octet-stream"], ["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-06 15:16:25.012539"], ["updated_at", "2015-09-06 15:16:25.012539"]]
  [1m[35m (9.2ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=180
Completed 302 Found in 1167ms (ActiveRecord: 46.5ms)


Started GET "/courses/84?lesson_id=180" for 10.0.2.2 at 2015-09-06 15:16:25 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"180", "id"=>"84"}
  [1m[36mTeacher Load (2.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 180]]
  [1m[35mVideo Load (1.3ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.0ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.5ms)
  Rendered lessons/_lesson.html.erb (9.8ms)
  [1m[36mTopic Load (0.8ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 180]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.9ms)
  Rendered courses/_course_topics.html.erb (4.7ms)
  [1m[35mLesson Load (1.0ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (1.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (20.6ms)
  Rendered courses/_course_layout.html.erb (51.2ms)
  Rendered lessons/show.html.erb within layouts/application (53.1ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 154ms (Views: 130.6ms | ActiveRecord: 11.6ms)


Started GET "/courses/84?lesson_id=180" for 10.0.2.2 at 2015-09-07 02:32:28 +0000
  [1m[36mActiveRecord::SchemaMigration Load (2.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"180", "id"=>"84"}
  [1m[35mTeacher Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (1.2ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (1.1ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 180]]
  [1m[36mVideo Load (1.2ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (2.0ms)
  [1m[36mQaFile Load (0.9ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (2.0ms)
  Rendered lessons/_lesson.html.erb (81.0ms)
  [1m[35mTopic Load (0.5ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 180]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (4.5ms)
  Rendered courses/_course_topics.html.erb (7.0ms)
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (18.8ms)
  Rendered courses/_course_layout.html.erb (152.7ms)
  Rendered lessons/show.html.erb within layouts/application (159.7ms)
  Rendered layouts/_top_bar.html.erb (2.3ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 1898ms (Views: 1461.8ms | ActiveRecord: 33.4ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-07 02:32:42 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (1.1ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.9ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (5.1ms)
  Rendered videos/_video.html.erb (1.4ms)
  Rendered videos/_collapse_form.html.erb (51.2ms)
  Rendered videos/_form.html.erb (53.9ms)
  Rendered shared/_error_messages.html.erb (0.2ms)
  [1m[36mQaFile Load (0.9ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.8ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.0ms)
  Rendered teachers/lessons/_submit.html.erb (4.3ms)
  Rendered teachers/lessons/_form.html.erb (183.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (210.4ms)
  Rendered layouts/_top_bar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 331ms (Views: 308.9ms | ActiveRecord: 6.9ms)


Started PATCH "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-07 02:33:02 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"HGdTu59VIMID2iwdfmgRYSGBcLq4GJwHYQ10mcnH6u3X0AoKIRGa4cJFSTM3c4UwHNesVb0RN3YCmEXCW8l8Cg==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"65"}, "1"=>{"_destroy"=>"false", "id"=>"66"}, "2"=>{"_destroy"=>"false", "id"=>"67"}, "3"=>{"_destroy"=>"false", "id"=>"68"}, "4"=>{"_destroy"=>"false", "id"=>"69"}, "5"=>{"_destroy"=>"false", "id"=>"70"}, "6"=>{"_destroy"=>"false", "id"=>"71"}, "7"=>{"_destroy"=>"false", "id"=>"72"}, "new_qa_files_1441593174060"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x0000000346fc78 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16314-1px9jxu.key>, @original_filename="答疑时间.key", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441593174060][name]\"; filename=\"\xE7\xAD\x94\xE7\x96\x91\xE6\x97\xB6\xE9\x97\xB4.key\"\r\nContent-Type: application/octet-stream\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (1.1ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (1.3ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (1.3ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (2.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (65, 66, 67, 68, 69, 70, 71, 72)  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (3.6ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "3c977dcd26518d6075cc199b049bf111.key"], ["author_id", 82], ["original_filename", "答疑时间.key"], ["qa_file_type", "application/octet-stream"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-07 02:33:02.229159"], ["updated_at", "2015-09-07 02:33:02.229159"]]
  [1m[35m (1.8ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 4843ms (ActiveRecord: 15.8ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-07 02:33:06 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[36mTeacher Load (1.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (1.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (1.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.2ms)
  [1m[35mQaFile Load (1.0ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (3.6ms)
  Rendered lessons/_lesson.html.erb (13.7ms)
  [1m[36mTopic Load (1.1ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 179]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.7ms)
  Rendered courses/_course_topics.html.erb (5.2ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (15.6ms)
  Rendered courses/_course_layout.html.erb (48.5ms)
  Rendered lessons/show.html.erb within layouts/application (52.0ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 157ms (Views: 128.0ms | ActiveRecord: 11.7ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-07 02:33:17 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.8ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (9.5ms)
  Rendered videos/_form.html.erb (11.1ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.6ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.8ms)
  Rendered teachers/lessons/_form.html.erb (69.6ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (72.2ms)
  Rendered layouts/_top_bar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 152ms (Views: 137.2ms | ActiveRecord: 5.3ms)


Started PATCH "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-07 02:33:37 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"z+vgIq+IKzYi3Kc5DklhcgXcc+vqMOYks64GG7XA5s4EXLmTEcyRFeNDwhdHUvUjOIqvBO85TVXQOzdAJ85wKQ==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"65"}, "1"=>{"_destroy"=>"1", "id"=>"66"}, "2"=>{"_destroy"=>"1", "id"=>"67"}, "3"=>{"_destroy"=>"1", "id"=>"68"}, "4"=>{"_destroy"=>"1", "id"=>"69"}, "5"=>{"_destroy"=>"1", "id"=>"70"}, "6"=>{"_destroy"=>"1", "id"=>"71"}, "7"=>{"_destroy"=>"1", "id"=>"72"}, "8"=>{"_destroy"=>"1", "id"=>"79"}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.8ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (65, 66, 67, 68, 69, 70, 71, 72, 79)[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 66]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 67]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 68]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 69]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 70]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 71]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 72]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 79]]
  [1m[36m (2.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 639ms (ActiveRecord: 13.3ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-07 02:33:38 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[35mTeacher Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (1.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.8ms)
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.5ms)
  Rendered lessons/_lesson.html.erb (18.1ms)
  [1m[35mTopic Load (0.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 179]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.0ms)
  Rendered courses/_course_topics.html.erb (6.4ms)
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mVideo Load (1.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (18.5ms)
  Rendered courses/_course_layout.html.erb (57.3ms)
  Rendered lessons/show.html.erb within layouts/application (60.5ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 155ms (Views: 130.5ms | ActiveRecord: 9.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-07 04:29:04 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
Completed 404 Not Found in 522ms

ActiveRecord::RecordNotFound (Couldn't find Lesson with 'id'=170):
  app/controllers/teachers/lessons_controller.rb:55:in `current_resource'
  app/controllers/application_controller.rb:32:in `authorize'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (83.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (101.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (5.5ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (233.5ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 04:29:21 +0000
Processing by HomeController#index as HTML
  [1m[35mTeacher Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit home:index
Redirected to http://localhost:3000/teachers/82/questions
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)


Started GET "/teachers/82/questions" for 10.0.2.2 at 2015-09-07 04:29:21 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"82"}
  [1m[36mTeacher Load (1.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers:questions
  [1m[35mTeacher Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mQuestion Load (1.4ms)[0m  [1mSELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0[0m  [["teacher_id", 82]]
  Rendered questions/_question.html.erb (0.0ms)
  Rendered teachers/_task.html.erb (46.3ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (52.3ms)
  Rendered layouts/_top_bar.html.erb (2.7ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 359ms (Views: 220.5ms | ActiveRecord: 10.1ms)


Started GET "/teachers/82/curriculums" for 10.0.2.2 at 2015-09-07 04:29:32 +0000
Processing by TeachersController#curriculums as HTML
  Parameters: {"id"=>"82"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers:curriculums
  [1m[36mTeacher Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mTeachingProgram Load (0.9ms)[0m  SELECT "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."category" = $1 AND "teaching_programs"."subject" = $2  ORDER BY "teaching_programs"."created_at" ASC  [["category", "高中"], ["subject", "化学"]]
  [1m[36mCurriculum Load (1.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 8]]
  [1m[35mCurriculum Load (2.0ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 9]]
  [1m[36mCurriculum Load (0.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 10]]
  [1m[35mCurriculum Load (2.4ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 11]]
  [1m[36mCurriculum Load (1.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 12]]
  [1m[35mCurriculum Load (1.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 13]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 14]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 15]]
  [1m[36mCurriculum Load (0.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 82]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  [1m[36mTeacher Load (2.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mSchool Load (3.2ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.9ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 9]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 10]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (1.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.4ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 12]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 13]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 14]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 15]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (228.1ms)
  Rendered teachers/curriculums.html.erb within layouts/teacher_home (234.1ms)
  Rendered layouts/_top_bar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 480ms (Views: 353.9ms | ActiveRecord: 40.0ms)


Started GET "/curriculums/379" for 10.0.2.2 at 2015-09-07 04:30:15 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by CurriculumsController#show as HTML
  Parameters: {"id"=>"379"}
  [1m[35mTeacher Load (1.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit curriculums:show
  [1m[36mCurriculum Load (1.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mCourse Load (2.1ms)[0m  SELECT "courses".* FROM "courses" WHERE "courses"."curriculum_id" IN (379)  ORDER BY position
  [1m[36mLesson Load (9.0ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" IN (84)  ORDER BY created_at[0m
  [1m[35mVideo Load (1.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (1.2ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mVideo Load (1.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  [1m[35mTeachingProgram Load (1.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/subjects/_header.html.erb (1.6ms)
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mSchool Load (0.9ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCity Load (1.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_header.html.erb (218.1ms)
  Rendered curriculums/_search.html.erb (45.6ms)
  Rendered courses/_lesson_cell.html.erb (2.1ms)
  Rendered courses/_course_cell.html.erb (13.5ms)
  Rendered curriculums/show.html.erb within layouts/application (321.6ms)
  Rendered layouts/_top_bar.html.erb (12.6ms)
  Rendered layouts/_footer.html.erb (1.1ms)
Completed 200 OK in 3320ms (Views: 2597.5ms | ActiveRecord: 60.6ms)


Started GET "/lessons/179" for 10.0.2.2 at 2015-09-07 04:30:33 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"179"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit lessons:show
  [1m[36mLesson Load (1.1ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (1.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (2.8ms)
  [1m[36mQaFile Load (5.8ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (2.0ms)
  Rendered lessons/_lesson.html.erb (53.7ms)
  [1m[35mTopic Load (1.4ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 179]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (10.8ms)
  Rendered courses/_course_topics.html.erb (16.3ms)
  [1m[36mLesson Load (1.1ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mCACHE (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[36mVideo Load (1.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (32.0ms)
  Rendered courses/_course_layout.html.erb (124.9ms)
  Rendered lessons/show.html.erb within layouts/application (130.7ms)
  Rendered layouts/_top_bar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 379ms (Views: 259.1ms | ActiveRecord: 42.5ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-07 04:30:46 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (2.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (1.3ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (1.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (3.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (6.2ms)
  Rendered videos/_video.html.erb (2.8ms)
  Rendered videos/_collapse_form.html.erb (67.1ms)
  Rendered videos/_form.html.erb (71.7ms)
  Rendered shared/_error_messages.html.erb (0.2ms)
  [1m[36mQaFile Load (7.4ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (3.2ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered teachers/lessons/_submit.html.erb (8.0ms)
  Rendered teachers/lessons/_form.html.erb (245.3ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (285.8ms)
  Rendered layouts/_top_bar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 528ms (Views: 497.5ms | ActiveRecord: 16.9ms)


Started PATCH "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-07 04:31:17 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1/6ur6SY16xBkN/Cw6JSnfWeG14TYIcIci17H2pABIIcSfceGtxtj4APuuyKucbMyMjHsRZpLHkRuEpE+E6SZQ==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"65"}, "new_qa_files_1441600260139"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x000000070511d8 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-19boyz5.png>, @original_filename="86d8d3348f8d004f9cb4f04b72ed0b39.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441600260139][name]\"; filename=\"86d8d3348f8d004f9cb4f04b72ed0b39.png\"\r\nContent-Type: image/png\r\n">}, "new_qa_files_1441600269266"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000007051020 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-ynfil3.docx>, @original_filename="定级文档-晨松.docx", @content_type="application/vnd.openxmlformats-officedocument.wordprocessingml.document", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441600269266][name]\"; filename=\"\xE5\xAE\x9A\xE7\xBA\xA7\xE6\x96\x87\xE6\xA1\xA3-\xE6\x99\xA8\xE6\x9D\xBE.docx\"\r\nContent-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (1.3ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (1.0ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.7ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 65  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCurriculum Load (2.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "c5dcafba385ea5acc5e3d9ea01982125.png"], ["author_id", 82], ["original_filename", "86d8d3348f8d004f9cb4f04b72ed0b39.png"], ["qa_file_type", "image/png"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-07 04:31:17.712435"], ["updated_at", "2015-09-07 04:31:17.712435"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "0abcd4030625763e0176ddca2fda6c9c.docx"], ["author_id", 82], ["original_filename", "定级文档-晨松.docx"], ["qa_file_type", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-07 04:31:18.372311"], ["updated_at", "2015-09-07 04:31:18.372311"]]
  [1m[35m (10.4ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 891ms (ActiveRecord: 21.9ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-07 04:31:18 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (1.0ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (1.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.9ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (2.1ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.0ms)
  [1m[35mQaFile Load (0.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.2ms)
  Rendered lessons/_lesson.html.erb (15.9ms)
  [1m[36mTopic Load (1.1ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 179]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (6.9ms)
  Rendered courses/_course_topics.html.erb (9.2ms)
  [1m[35mLesson Load (0.8ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (16.2ms)
  Rendered courses/_course_layout.html.erb (57.0ms)
  Rendered lessons/show.html.erb within layouts/application (59.8ms)
  Rendered layouts/_top_bar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 172ms (Views: 148.0ms | ActiveRecord: 11.3ms)


Started GET "/teachers/courses/84/lessons/179/edit" for 10.0.2.2 at 2015-09-07 04:32:11 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (1.2ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (2.0ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (1.0ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.2ms)
  Rendered videos/_collapse_form.html.erb (17.7ms)
  Rendered videos/_form.html.erb (20.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (1.0ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.8ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.8ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (6.7ms)
  Rendered teachers/lessons/_form.html.erb (81.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (87.6ms)
  Rendered layouts/_top_bar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (1.3ms)
Completed 200 OK in 225ms (Views: 204.7ms | ActiveRecord: 8.0ms)


Started PATCH "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-07 04:32:59 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"M8ApXUdGmDLxEmNChVL3B6M3FZKzx7de0TGvxjHtCDj4d3Ds+QIiETCNBmzMSWNWnmHJfbbOHC+ypJ6do+Oe3w==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性,化学实验的重要性", "token"=>"1441551052-uSWorDj7QGJNR8PgUQM82Q", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"_destroy"=>"1", "id"=>"65"}, "1"=>{"_destroy"=>"1", "id"=>"80"}, "2"=>{"_destroy"=>"1", "id"=>"81"}, "new_qa_files_1441600343239"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f0344dae898 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-1o4qzqb.docx>, @original_filename="泛需求检索的需求细化引导产品规划-晨松.docx", @content_type="application/vnd.openxmlformats-officedocument.wordprocessingml.document", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441600343239][name]\"; filename=\"\xE6\xB3\x9B\xE9\x9C\x80\xE6\xB1\x82\xE6\xA3\x80\xE7\xB4\xA2\xE7\x9A\x84\xE9\x9C\x80\xE6\xB1\x82\xE7\xBB\x86\xE5\x8C\x96\xE5\xBC\x95\xE5\xAF\xBC\xE4\xBA\xA7\xE5\x93\x81\xE8\xA7\x84\xE5\x88\x92-\xE6\x99\xA8\xE6\x9D\xBE.docx\"\r\nContent-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document\r\n">}, "new_qa_files_1441600350979"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f0344dae730 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-1inr2j0.alt>, @original_filename="first.alt", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441600350979][name]\"; filename=\"first.alt\"\r\nContent-Type: application/octet-stream\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"179"}
  [1m[36mTeacher Load (6.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.9ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 179]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (2.2ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (1.1ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mQaFile Load (1.3ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (65, 80, 81)[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCurriculum Load (0.3ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 65]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 80]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 81]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "0844c59043e2de24913f718d935c3413.docx"], ["author_id", 82], ["original_filename", "泛需求检索的需求细化引导产品规划-晨松.docx"], ["qa_file_type", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-07 04:33:12.310407"], ["updated_at", "2015-09-07 04:33:12.310407"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "55ec46eb03e586ce3410786ee5140d55.alt"], ["author_id", 82], ["original_filename", "first.alt"], ["qa_file_type", "application/octet-stream"], ["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-07 04:33:12.457175"], ["updated_at", "2015-09-07 04:33:12.457175"]]
  [1m[35m (9.6ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=179
Completed 302 Found in 62443ms (ActiveRecord: 27.8ms)


Started GET "/courses/84?lesson_id=179" for 10.0.2.2 at 2015-09-07 04:34:02 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"179", "id"=>"84"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (1.1ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.9ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.0ms)
  [1m[35mQaFile Load (1.8ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.1ms)
  Rendered lessons/_lesson.html.erb (15.3ms)
  [1m[36mTopic Load (0.9ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 179]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (3.1ms)
  Rendered courses/_course_topics.html.erb (6.0ms)
  [1m[35mLesson Load (1.1ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (19.1ms)
  Rendered courses/_course_layout.html.erb (58.2ms)
  Rendered lessons/show.html.erb within layouts/application (60.8ms)
  Rendered layouts/_top_bar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 219ms (Views: 190.0ms | ActiveRecord: 11.1ms)


Started DELETE "/teachers/courses/84/lessons/180" for 10.0.2.2 at 2015-09-07 04:34:17 +0000
Processing by Teachers::LessonsController#destroy as HTML
  Parameters: {"authenticity_token"=>"GIPp6OwDIcSRBl8mXT3w6pvBqKi26IY7Pt6JrXYxsJbTNLBZUkeb51CZOggUJmS7ppd0R7PhLUpdS7j25D8mcQ==", "course_id"=>"84", "id"=>"180"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:destroy
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 180]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441552120-SqarBjY5rVUP3o9uQS7nuA"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 180], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mReviewRecord Load (1.1ms)[0m  [1mSELECT "review_records".* FROM "review_records" WHERE "review_records"."lesson_id" = $1[0m  [["lesson_id", 180]]
  [1m[35mTopic Load (0.6ms)[0m  SELECT "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1 AND "topics"."topicable_type" = $2  [["topicable_id", 180], ["topicable_type", "Lesson"]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "videos" WHERE "videos"."id" = $1[0m  [["id", 309]]
  [1m[35mQaFile Load (0.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 180], ["qa_fileable_type", "Lesson"]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 73]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 74]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 75]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 76]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 77]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 78]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "lessons" WHERE "lessons"."id" = $1[0m  [["id", 180]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) - 1 WHERE "courses"."id" = $1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) - 1 WHERE "curriculums"."id" = $1  [["id", 379]]
  [1m[36m (15.7ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84
Completed 302 Found in 690ms (ActiveRecord: 29.8ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-07 04:34:18 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[35mTeacher Load (1.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (1.3ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (1.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 84]]
  [1m[36mVideo Load (5.3ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (14.2ms)
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.3ms)
  Rendered lessons/_lesson.html.erb (23.1ms)
  [1m[35mTopic Load (1.1ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 179]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (4.7ms)
  Rendered courses/_course_topics.html.erb (6.2ms)
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (9.7ms)
  Rendered courses/_course_layout.html.erb (52.8ms)
  Rendered lessons/show.html.erb within layouts/application (54.8ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 193ms (Views: 151.1ms | ActiveRecord: 14.3ms)


Started DELETE "/teachers/courses/84/lessons/179" for 10.0.2.2 at 2015-09-07 04:34:26 +0000
Processing by Teachers::LessonsController#destroy as HTML
  Parameters: {"authenticity_token"=>"PJ2BGLHxyQvq1TBwM/SS0zeQU31yVAl2gSafbzjbM7f3KtipD7VzKCtKVV567waCCsaPknddogfis640qtWlUA==", "course_id"=>"84", "id"=>"179"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:destroy
  [1m[36mLesson Load (0.4ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 179]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441551052-uSWorDj7QGJNR8PgUQM82Q"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 179], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mReviewRecord Load (1.3ms)[0m  SELECT "review_records".* FROM "review_records" WHERE "review_records"."lesson_id" = $1  [["lesson_id", 179]]
  [1m[36mTopic Load (1.4ms)[0m  [1mSELECT "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1 AND "topics"."topicable_type" = $2[0m  [["topicable_id", 179], ["topicable_type", "Lesson"]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "videos" WHERE "videos"."id" = $1  [["id", 308]]
  [1m[36mQaFile Load (0.9ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 179], ["qa_fileable_type", "Lesson"]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 82]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 83]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "lessons" WHERE "lessons"."id" = $1  [["id", 179]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) - 1 WHERE "courses"."id" = $1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) - 1 WHERE "curriculums"."id" = $1[0m  [["id", 379]]
  [1m[35m (2.2ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84
Completed 302 Found in 122ms (ActiveRecord: 13.7ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-07 04:34:26 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[36mTeacher Load (1.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (1.4ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (2.2ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1[0m  [["course_id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson.html.erb (0.1ms)
  Rendered courses/_course_topics.html.erb (0.1ms)
  [1m[35mLesson Load (0.9ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  Rendered courses/_course_lessons.html.erb (3.6ms)
  Rendered courses/_course_layout.html.erb (15.1ms)
  Rendered lessons/show.html.erb within layouts/application (17.6ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 168ms (Views: 149.8ms | ActiveRecord: 7.3ms)


Started GET "/teachers/courses/84/lessons/new" for 10.0.2.2 at 2015-09-07 04:34:34 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"84"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:new
  [1m[35mCourse Load (1.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441600474-BJz92w_DzPz3KEnvHH6bRw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441600474-BJz92w_DzPz3KEnvHH6bRw"]]
  [1m[35mCurriculum Load (0.9ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.9ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_collapse_form.html.erb (12.7ms)
  Rendered videos/_form.html.erb (17.7ms)
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (8.2ms)
  Rendered teachers/lessons/_form.html.erb (74.2ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (77.4ms)
  Rendered layouts/_top_bar.html.erb (2.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 234ms (Views: 195.3ms | ActiveRecord: 5.8ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-07 04:34:48 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"T33IPClo8hCjqs4UWQGmqiuQeEKPhhw9hTN0dhn9q8SEypGNlyxIM2I1qzoQGjL7FsakrYqPt0zmpkUti/M9Iw==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f0344e9f1f8 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-1v0lcqc.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441600474-BJz92w_DzPz3KEnvHH6bRw"}}
  [1m[35mTeacher Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit videos:create
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "da34608b7ff003167d59719ae84efed4.mp4"], ["token", "1441600474-BJz92w_DzPz3KEnvHH6bRw"], ["author_id", 82], ["created_at", "2015-09-07 04:34:49.513889"], ["updated_at", "2015-09-07 04:34:49.513889"]]
  [1m[35m (11.5ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE  [["id", 310]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3  [["state", "in_queue"], ["updated_at", "2015-09-07 04:34:52.246337"], ["id", 310]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  Rendered videos/_video.html.erb (1.5ms)
  Rendered videos/create.js.erb (5.1ms)
Completed 200 OK in 4040ms (Views: 21.0ms | ActiveRecord: 17.6ms)


Started POST "/teachers/courses/84/lessons" for 10.0.2.2 at 2015-09-07 04:35:26 +0000
Processing by Teachers::LessonsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"T33IPClo8hCjqs4UWQGmqiuQeEKPhhw9hTN0dhn9q8SEypGNlyxIM2I1qzoQGjL7FsakrYqPt0zmpkUti/M9Iw==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1441600474-BJz92w_DzPz3KEnvHH6bRw", "tags"=>["", "常见问题"], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003d524f8 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-1x64rll.png>, @original_filename="86d8d3348f8d004f9cb4f04b72ed0b39.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"86d8d3348f8d004f9cb4f04b72ed0b39.png\"\r\nContent-Type: image/png\r\n">}, "new_qa_files_1441600513157"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003d51580 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-1hnr8zt.docx>, @original_filename="定级文档-晨松.docx", @content_type="application/vnd.openxmlformats-officedocument.wordprocessingml.document", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441600513157][name]\"; filename=\"\xE5\xAE\x9A\xE7\xBA\xA7\xE6\x96\x87\xE6\xA1\xA3-\xE6\x99\xA8\xE6\x9D\xBE.docx\"\r\nContent-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document\r\n">}, "new_qa_files_1441600519109"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003d50c20 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-1vfh02v.key>, @original_filename="介绍.key", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441600519109][name]\"; filename=\"\xE4\xBB\x8B\xE7\xBB\x8D.key\"\r\nContent-Type: application/octet-stream\r\n">}}}, "edit"=>"确定", "course_id"=>"84"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:create
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mVideo Load (3.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441600474-BJz92w_DzPz3KEnvHH6bRw"]]
  [1m[35mCurriculum Load (2.3ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "lessons" ("name", "desc", "token", "tags", "teacher_id", "course_id", "curriculum_id", "state", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "化学实验的重要性"], ["desc", "化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，"], ["token", "1441600474-BJz92w_DzPz3KEnvHH6bRw"], ["tags", "[\"\",\"常见问题\"]"], ["teacher_id", 82], ["course_id", 84], ["curriculum_id", 379], ["state", "editing"], ["created_at", "2015-09-07 04:35:26.806658"], ["updated_at", "2015-09-07 04:35:26.806658"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "courses"."id" = $1[0m  [["id", 84]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "curriculums"."id" = $1  [["id", 379]]
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (4.5ms)[0m  UPDATE "videos" SET "videoable_type" = $1, "videoable_id" = $2, "updated_at" = $3 WHERE "videos"."id" = $4  [["videoable_type", "Lesson"], ["videoable_id", 181], ["updated_at", "2015-09-07 04:35:26.831043"], ["id", 310]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "419dd9607bd65d86115fc209e96e1fc0.png"], ["author_id", 82], ["original_filename", "86d8d3348f8d004f9cb4f04b72ed0b39.png"], ["qa_file_type", "image/png"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 181], ["created_at", "2015-09-07 04:35:26.843502"], ["updated_at", "2015-09-07 04:35:26.843502"]]
  [1m[35mSQL (5.3ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "af39b8163ae0ce995b89285c82dcab61.docx"], ["author_id", 82], ["original_filename", "定级文档-晨松.docx"], ["qa_file_type", "application/vnd.openxmlformats-officedocument.wordprocessingml.document"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 181], ["created_at", "2015-09-07 04:35:26.897604"], ["updated_at", "2015-09-07 04:35:26.897604"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "d4d191fc8a15cb9001945e4b09ae30e4.key"], ["author_id", 82], ["original_filename", "介绍.key"], ["qa_file_type", "application/octet-stream"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 181], ["created_at", "2015-09-07 04:35:27.035027"], ["updated_at", "2015-09-07 04:35:27.035027"]]
  [1m[35m (1.1ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=181
Completed 302 Found in 979ms (ActiveRecord: 25.2ms)


Started GET "/courses/84?lesson_id=181" for 10.0.2.2 at 2015-09-07 04:35:27 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"181", "id"=>"84"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 181]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441600474-BJz92w_DzPz3KEnvHH6bRw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 181], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.9ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 181], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.0ms)
  Rendered lessons/_lesson.html.erb (13.4ms)
  [1m[36mTopic Load (1.6ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 181]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (4.5ms)
  Rendered courses/_course_topics.html.erb (9.0ms)
  [1m[35mLesson Load (1.0ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441600474-BJz92w_DzPz3KEnvHH6bRw"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 181], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (11.8ms)
  Rendered courses/_course_layout.html.erb (68.5ms)
  Rendered lessons/show.html.erb within layouts/application (72.6ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 214ms (Views: 189.7ms | ActiveRecord: 7.7ms)


Started GET "/teachers/courses/84/lessons/new" for 10.0.2.2 at 2015-09-07 04:35:37 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:new
  [1m[35mCourse Load (1.7ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441600537-OSLc_DjwNkfftG1XgfJQPA"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441600537-OSLc_DjwNkfftG1XgfJQPA"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.6ms)
  Rendered videos/_collapse_form.html.erb (11.7ms)
  Rendered videos/_form.html.erb (15.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.9ms)
  Rendered teachers/lessons/_form.html.erb (53.1ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (55.1ms)
  Rendered layouts/_top_bar.html.erb (1.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 163ms (Views: 134.9ms | ActiveRecord: 5.7ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-07 04:36:01 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gDhWZYHffw5/7tzTTr2QCghAYw8GSIB9W2E75FOH0RFLjw/UP5vFLb5xuf0HpgRbNRa/4ANBKww49Aq/wYlH9g==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f0344be3608 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-10vyeku.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441600537-OSLc_DjwNkfftG1XgfJQPA"}}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit videos:create
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "70a4acb5e11a507c1813883207b4bbdf.mp4"], ["token", "1441600537-OSLc_DjwNkfftG1XgfJQPA"], ["author_id", 82], ["created_at", "2015-09-07 04:36:02.594465"], ["updated_at", "2015-09-07 04:36:02.594465"]]
  [1m[35m (2.2ms)[0m  COMMIT
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE  [["id", 311]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (1.8ms)[0m  UPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3  [["state", "in_queue"], ["updated_at", "2015-09-07 04:36:05.157100"], ["id", 311]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  Rendered videos/_video.html.erb (0.7ms)
  Rendered videos/create.js.erb (3.7ms)
Completed 200 OK in 3778ms (Views: 14.0ms | ActiveRecord: 9.3ms)


Started POST "/teachers/courses/84/lessons" for 10.0.2.2 at 2015-09-07 04:36:36 +0000
Processing by Teachers::LessonsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gDhWZYHffw5/7tzTTr2QCghAYw8GSIB9W2E75FOH0RFLjw/UP5vFLb5xuf0HpgRbNRa/4ANBKww49Aq/wYlH9g==", "lesson"=>{"name"=>"测试第二课", "desc"=>"测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课", "token"=>"1441600537-OSLc_DjwNkfftG1XgfJQPA", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x000000050a68b0 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-16698-10wc1ho.html>, @original_filename="8989dd45bacb71c603372b93a24f6ae51433670458711.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"8989dd45bacb71c603372b93a24f6ae51433670458711.html\"\r\nContent-Type: text/html\r\n">}}}, "edit"=>"确定", "course_id"=>"84"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:create
  [1m[36mCourse Load (0.9ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (1.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441600537-OSLc_DjwNkfftG1XgfJQPA"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "lessons" ("name", "desc", "token", "tags", "teacher_id", "course_id", "curriculum_id", "state", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["name", "测试第二课"], ["desc", "测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课，测试第二课"], ["token", "1441600537-OSLc_DjwNkfftG1XgfJQPA"], ["tags", "[\"\",\"知识点讲解\"]"], ["teacher_id", 82], ["course_id", 84], ["curriculum_id", 379], ["state", "editing"], ["created_at", "2015-09-07 04:36:37.012864"], ["updated_at", "2015-09-07 04:36:37.012864"]]
  [1m[35mCourse Load (4.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "courses"."id" = $1[0m  [["id", 84]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "curriculums"."id" = $1  [["id", 379]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (1.1ms)[0m  UPDATE "videos" SET "videoable_type" = $1, "videoable_id" = $2, "updated_at" = $3 WHERE "videos"."id" = $4  [["videoable_type", "Lesson"], ["videoable_id", 182], ["updated_at", "2015-09-07 04:36:37.034438"], ["id", 311]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "f3866376d41b71967ff033c725455209.html"], ["author_id", 82], ["original_filename", "8989dd45bacb71c603372b93a24f6ae51433670458711.html"], ["qa_file_type", "text/html"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 182], ["created_at", "2015-09-07 04:36:37.038839"], ["updated_at", "2015-09-07 04:36:37.038839"]]
  [1m[35m (8.9ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=182
Completed 302 Found in 132ms (ActiveRecord: 23.9ms)


Started GET "/courses/84?lesson_id=182" for 10.0.2.2 at 2015-09-07 04:36:37 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"182", "id"=>"84"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.7ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (1.7ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 182]]
  [1m[35mVideo Load (1.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441600537-OSLc_DjwNkfftG1XgfJQPA"]]
  [1m[36mVideo Load (1.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 182], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (2.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.0ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 182], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.6ms)
  Rendered lessons/_lesson.html.erb (17.7ms)
  [1m[36mTopic Load (0.9ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 182]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.9ms)
  Rendered courses/_course_topics.html.erb (14.7ms)
  [1m[35mLesson Load (0.9ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441600474-BJz92w_DzPz3KEnvHH6bRw"]]
  [1m[35mVideo Load (1.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 181], ["videoable_type", "Lesson"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441600537-OSLc_DjwNkfftG1XgfJQPA"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 182], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (28.0ms)
  Rendered courses/_course_layout.html.erb (83.9ms)
  Rendered lessons/show.html.erb within layouts/application (87.5ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 262ms (Views: 218.8ms | ActiveRecord: 14.1ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 14:42:20 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomeController#index as HTML
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  Rendered home/index.html.erb within layouts/application_home (3.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  Rendered layouts/_top_bar.html.erb (5.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 1199ms (Views: 1102.4ms | ActiveRecord: 3.3ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 14:42:29 +0000
Processing by HomeController#index as HTML
  [1m[35mTeacher Load (1.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  Rendered home/index.html.erb within layouts/application_home (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  Rendered layouts/_top_bar.html.erb (5.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 71ms (Views: 64.4ms | ActiveRecord: 1.3ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 14:42:33 +0000
Processing by SessionsController#new as HTML
  [1m[35mTeacher Load (1.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  Rendered sessions/new.html.erb within layouts/application (87.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  Rendered layouts/_top_bar.html.erb (7.1ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 196ms (Views: 164.4ms | ActiveRecord: 5.2ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 14:42:35 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Sw1NRVJ4EVx9Ef0xfhdrgl+xaWpgttfm4qMMsmx2io50u8mdcgLLdSObtVvfZhhcMzYRzk78sr54f3Vaa4kViA==", "user"=>{"email"=>"zhangjiandongjesical@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mTeacher Load (2.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "zhangjiandongjesical@gmail.com"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "8bdf74d0d097c9bb0d102eeead67eaf08b33702e"], ["updated_at", "2015-09-07 14:42:35.591979"], ["id", 1]]
  [1m[35m (1.6ms)[0m  COMMIT
  [1m[36mAdmin Load (2.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "8bdf74d0d097c9bb0d102eeead67eaf08b33702e"]]
Redirected to http://localhost:3000/admins/home
Completed 302 Found in 150ms (ActiveRecord: 7.8ms)


Started GET "/admins/home" for 10.0.2.2 at 2015-09-07 14:42:35 +0000
Processing by Admins::HomeController#main as HTML
  [1m[35mAdmin Load (1.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "admin"], ["remember_token", "8bdf74d0d097c9bb0d102eeead67eaf08b33702e"]]
张建东 visit admins/home:main
  Rendered admins/home/main.html.erb within layouts/admin_home (0.5ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 123ms (Views: 110.9ms | ActiveRecord: 1.3ms)


Started GET "/admins/home" for 10.0.2.2 at 2015-09-07 15:12:26 +0000
Processing by Admins::HomeController#main as HTML
  [1m[36mAdmin Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "8bdf74d0d097c9bb0d102eeead67eaf08b33702e"]]
张建东 visit admins/home:main
  Rendered admins/home/main.html.erb within layouts/admin_home (0.1ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 168ms (Views: 98.0ms | ActiveRecord: 3.6ms)


Started DELETE "/signout" for 10.0.2.2 at 2015-09-07 15:12:30 +0000
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"JQoD/SVFlY3ZvIu9Ir7c6vn+tF95+zgCewEKqERNeFcavIclBT9PpIc2w9eDz680lXnM+1exXVrh3XNAQ7LnUQ=="}
  [1m[35mAdmin Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "admin"], ["remember_token", "8bdf74d0d097c9bb0d102eeead67eaf08b33702e"]]
张建东 visit sessions:destroy
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  UPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["remember_token", "0e862db91d00c1288d80efdb380529b535b57cc4"], ["updated_at", "2015-09-07 15:12:30.392167"], ["id", 1]]
  [1m[36m (2.2ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 16ms (ActiveRecord: 4.7ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 15:12:30 +0000
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application_home (0.4ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 74ms (Views: 70.7ms | ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:12:33 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (9.4ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 65ms (Views: 63.3ms | ActiveRecord: 0.0ms)
  [1m[36mUser Load (9.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."role" = $1[0m  [["role", "student"]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["role", "student"]]


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:14:04 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"pRX3gk0eXtN/sHKzoyFThcK6i9ZqVf9vMWLrw3Bit52ao3NabWSE+iE6OtkCUCBbrj3zckQfmjervpIrd50omw==", "user"=>{"email"=>"li_xuesheng@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "li_xuesheng@163.com"]]
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["remember_token", "bef21304bb91792566b91410aafcdcc8f5ca43eb"], ["updated_at", "2015-09-07 15:14:04.260211"], ["id", 3]]
  [1m[36m (3.3ms)[0m  [1mCOMMIT[0m
  [1m[35mStudent Load (1.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "student"], ["remember_token", "bef21304bb91792566b91410aafcdcc8f5ca43eb"]]
Redirected to http://localhost:3000/students/home
Completed 302 Found in 141ms (ActiveRecord: 7.1ms)


Started GET "/students/home" for 10.0.2.2 at 2015-09-07 15:14:04 +0000
Processing by Students::HomeController#main as HTML
  [1m[36mStudent Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "student"], ["remember_token", "bef21304bb91792566b91410aafcdcc8f5ca43eb"]]
学生 visit students/home:main
Redirected to http://localhost:3000/students/3/questions
Completed 302 Found in 8ms (ActiveRecord: 0.4ms)


Started GET "/students/3/questions" for 10.0.2.2 at 2015-09-07 15:14:04 +0000
Processing by StudentsController#questions as HTML
  Parameters: {"id"=>"3"}
  [1m[35mStudent Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "student"], ["remember_token", "bef21304bb91792566b91410aafcdcc8f5ca43eb"]]
学生 visit students:questions
  [1m[36mStudent Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 3]]
  [1m[35mQuestion Load (2.3ms)[0m  SELECT  "questions".* FROM "questions" WHERE (student_id=3)  ORDER BY created_at desc LIMIT 10 OFFSET 0
  Rendered questions/_question.html.erb (0.0ms)
  Rendered students/_task.html.erb (35.6ms)
  Rendered students/questions.html.erb within layouts/student_home (50.1ms)
  Rendered layouts/_top_bar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 212ms (Views: 156.9ms | ActiveRecord: 5.1ms)


Started GET "/students/3/customized_courses" for 10.0.2.2 at 2015-09-07 15:14:07 +0000
Processing by StudentsController#customized_courses as HTML
  Parameters: {"id"=>"3"}
  [1m[36mStudent Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "student"], ["remember_token", "bef21304bb91792566b91410aafcdcc8f5ca43eb"]]
学生 visit students:customized_courses
  [1m[35mStudent Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 3]]
  [1m[36mCustomizedCourse Load (2.2ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."student_id" = $1  ORDER BY "customized_courses"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["student_id", 3]]
  Rendered shared/_address.html.erb (0.5ms)
  Rendered shared/customized_courses/_introduce.html.erb (11.4ms)
  Rendered shared/customized_courses/_index_container.html.erb (28.5ms)
  Rendered students/customized_courses.html.erb within layouts/student_home (47.1ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 125ms (Views: 98.3ms | ActiveRecord: 5.2ms)


Started DELETE "/signout" for 10.0.2.2 at 2015-09-07 15:14:17 +0000
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"p5M9V9KsSrfgQaTWrh/5xTWHE2dqTRfediT7EDNL15SYJbmP8taQnr7L7LwPboobWQBrw0QHcobs+IL4NLRIkg=="}
  [1m[35mStudent Load (1.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "student"], ["remember_token", "bef21304bb91792566b91410aafcdcc8f5ca43eb"]]
学生 visit sessions:destroy
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["remember_token", "20ed88551e53b873abf8af66cd9a27385d195b42"], ["updated_at", "2015-09-07 15:14:17.370270"], ["id", 3]]
  [1m[36m (8.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 22ms (ActiveRecord: 10.6ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 15:14:17 +0000
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application_home (0.3ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 46ms (Views: 45.5ms | ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:14:18 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (6.3ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 90ms (Views: 89.3ms | ActiveRecord: 0.0ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:14:38 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"0YZaLbHgiYE4DRo6LgdZ39umT0Vu81TYNcTuRtGoQQ7uMN71kZpTqGaHUlCPdioBtyE34UC5MYCvGJeu1lfeCA==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[35mUser Load (2.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "zhang@163.com"]]
  Rendered sessions/new.html.erb within layouts/application (6.6ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 153ms (Views: 57.1ms | ActiveRecord: 2.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1  ORDER BY "users"."id" DESC LIMIT 1[0m  [["role", "teacher"]]


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:15:29 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"c1JtU3S+vlWlVGVrAAeLdh8Epbxqy8rNd8ZLXwH2205M5OmLVMRkfPveLQGhdvioc4PdGESBr5XtGjK3BglESA==", "user"=>{"email"=>"zhangjdwonderful@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "zhangjdwonderful@163.com"]]
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"], ["updated_at", "2015-09-07 15:15:29.200568"], ["id", 82]]
  [1m[35m (9.4ms)[0m  COMMIT
  [1m[36mTeacher Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
Redirected to http://localhost:3000/teachers/82/questions
Completed 302 Found in 134ms (ActiveRecord: 12.2ms)


Started GET "/teachers/82/questions" for 10.0.2.2 at 2015-09-07 15:15:29 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"82"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit teachers:questions
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mQuestion Load (0.7ms)[0m  SELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0  [["teacher_id", 82]]
  Rendered questions/_question.html.erb (0.0ms)
  Rendered teachers/_task.html.erb (14.1ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (16.8ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 104ms (Views: 79.1ms | ActiveRecord: 3.8ms)


Started GET "/teachers/82/customized_courses" for 10.0.2.2 at 2015-09-07 15:15:31 +0000
Processing by TeachersController#customized_courses as HTML
  Parameters: {"id"=>"82"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit teachers:customized_courses
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCustomizedCourse Load (2.0ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" INNER JOIN "customized_course_assignments" ON "customized_courses"."id" = "customized_course_assignments"."customized_course_id" WHERE "customized_course_assignments"."teacher_id" = $1 LIMIT 10 OFFSET 0[0m  [["teacher_id", 82]]
  Rendered shared/_address.html.erb (0.1ms)
  Rendered shared/customized_courses/_introduce.html.erb (2.5ms)
  Rendered shared/customized_courses/_index_container.html.erb (9.4ms)
  Rendered teachers/customized_courses.html.erb within layouts/teacher_home (12.2ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 103ms (Views: 69.2ms | ActiveRecord: 5.8ms)


Started GET "/curriculums" for 10.0.2.2 at 2015-09-07 15:15:36 +0000
Processing by CurriculumsController#index as HTML
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit curriculums:index
  [1m[36mTeachingProgram Load (2.0ms)[0m  [1mSELECT "teaching_programs".* FROM "teaching_programs"[0m
  Rendered app/cells/teaching_program/_sub_menu.html.erb (14.9ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (3.5ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.9ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.7ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.5ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (0.9ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (3.4ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (1.7ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.7ms)
  Rendered app/cells/teaching_program/nav.html.erb (74.5ms)
  [1m[35mCurriculum Load (1.1ms)[0m  SELECT  "curriculums".* FROM "curriculums" INNER JOIN "users" ON "users"."id" = "curriculums"."teacher_id" AND "users"."role" = $1 WHERE "users"."pass" = 't' AND (courses_count > 0)  ORDER BY "curriculums"."created_at" ASC LIMIT 10 OFFSET 0  [["role", "teacher"]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 7]]
  [1m[36mSchool Load (0.3ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mTeachingProgram Load (1.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 7]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (106.9ms)
  Rendered curriculums/index.html.erb within layouts/application (218.4ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 282ms (Views: 261.5ms | ActiveRecord: 14.8ms)


Started GET "/curriculums" for 10.0.2.2 at 2015-09-07 15:15:40 +0000
Processing by CurriculumsController#index as HTML
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit curriculums:index
  [1m[36mTeachingProgram Load (1.2ms)[0m  [1mSELECT "teaching_programs".* FROM "teaching_programs"[0m
  Rendered app/cells/teaching_program/_sub_menu.html.erb (8.1ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.9ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (3.0ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (3.2ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.2ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (1.6ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.5ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (1.3ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (3.5ms)
  Rendered app/cells/teaching_program/nav.html.erb (64.4ms)
  [1m[35mCurriculum Load (0.9ms)[0m  SELECT  "curriculums".* FROM "curriculums" INNER JOIN "users" ON "users"."id" = "curriculums"."teacher_id" AND "users"."role" = $1 WHERE "users"."pass" = 't' AND (courses_count > 0)  ORDER BY "curriculums"."created_at" ASC LIMIT 10 OFFSET 0  [["role", "teacher"]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 7]]
  [1m[36mSchool Load (0.9ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 7]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (30.2ms)
  Rendered curriculums/index.html.erb within layouts/application (103.7ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 153ms (Views: 142.7ms | ActiveRecord: 6.9ms)


Started GET "/curriculums" for 10.0.2.2 at 2015-09-07 15:15:42 +0000
Processing by CurriculumsController#index as HTML
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit curriculums:index
  [1m[36mTeachingProgram Load (1.5ms)[0m  [1mSELECT "teaching_programs".* FROM "teaching_programs"[0m
  Rendered app/cells/teaching_program/_sub_menu.html.erb (7.6ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.4ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.6ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (5.1ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.8ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (1.2ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.6ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (1.5ms)
  Rendered app/cells/teaching_program/_sub_menu.html.erb (2.3ms)
  Rendered app/cells/teaching_program/nav.html.erb (82.2ms)
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" INNER JOIN "users" ON "users"."id" = "curriculums"."teacher_id" AND "users"."role" = $1 WHERE "users"."pass" = 't' AND (courses_count > 0)  ORDER BY "curriculums"."created_at" ASC LIMIT 10 OFFSET 0  [["role", "teacher"]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mTeacher Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 7]]
  [1m[36mSchool Load (0.7ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mSchool Load (0.7ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 7]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (35.8ms)
  Rendered curriculums/index.html.erb within layouts/application (129.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 181ms (Views: 167.4ms | ActiveRecord: 8.2ms)


Started GET "/teachers/82/curriculums" for 10.0.2.2 at 2015-09-07 15:15:55 +0000
Processing by TeachersController#curriculums as HTML
  Parameters: {"id"=>"82"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit teachers:curriculums
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."category" = $1 AND "teaching_programs"."subject" = $2  ORDER BY "teaching_programs"."created_at" ASC  [["category", "高中"], ["subject", "化学"]]
  [1m[36mCurriculum Load (1.1ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 8]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 9]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 10]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 11]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 12]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 13]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 14]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 15]]
  [1m[36mCurriculum Load (0.4ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 82]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mSchool Load (0.4ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 9]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 10]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 12]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 13]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 14]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 15]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (55.8ms)
  Rendered teachers/curriculums.html.erb within layouts/teacher_home (57.6ms)
  Rendered layouts/_top_bar.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 144ms (Views: 112.6ms | ActiveRecord: 12.5ms)


Started GET "/teachers/82/customized_courses" for 10.0.2.2 at 2015-09-07 15:15:57 +0000
Processing by TeachersController#customized_courses as HTML
  Parameters: {"id"=>"82"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit teachers:customized_courses
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCustomizedCourse Load (0.6ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" INNER JOIN "customized_course_assignments" ON "customized_courses"."id" = "customized_course_assignments"."customized_course_id" WHERE "customized_course_assignments"."teacher_id" = $1 LIMIT 10 OFFSET 0[0m  [["teacher_id", 82]]
  Rendered shared/_address.html.erb (0.1ms)
  Rendered shared/customized_courses/_introduce.html.erb (1.3ms)
  Rendered shared/customized_courses/_index_container.html.erb (4.6ms)
  Rendered teachers/customized_courses.html.erb within layouts/teacher_home (5.8ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 60ms (Views: 51.2ms | ActiveRecord: 2.0ms)


Started GET "/qa_faqs" for 10.0.2.2 at 2015-09-07 15:16:02 +0000
Processing by QaFaqsController#index as HTML
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit qa_faqs:index
  [1m[36mQaFaq Load (10.3ms)[0m  [1mSELECT "qa_faqs".* FROM "qa_faqs"  ORDER BY "qa_faqs"."created_at" ASC[0m
  Rendered qa_faqs/_qa_faq.html.erb (2.1ms)
  Rendered qa_faqs/index.html.erb within layouts/application (33.8ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 96ms (Views: 78.5ms | ActiveRecord: 12.8ms)


Started GET "/teachers/82/curriculums" for 10.0.2.2 at 2015-09-07 15:16:06 +0000
Processing by TeachersController#curriculums as HTML
  Parameters: {"id"=>"82"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit teachers:curriculums
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."category" = $1 AND "teaching_programs"."subject" = $2  ORDER BY "teaching_programs"."created_at" ASC  [["category", "高中"], ["subject", "化学"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 8]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 9]]
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 10]]
  [1m[35mCurriculum Load (1.4ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 11]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 12]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 13]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 14]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 15]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 82]]
  [1m[35mTeachingProgram Load (1.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 9]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 10]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 11]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 12]]
  [1m[36mCACHE (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 13]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 14]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 15]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (74.8ms)
  Rendered teachers/curriculums.html.erb within layouts/teacher_home (76.8ms)
  Rendered layouts/_top_bar.html.erb (1.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 178ms (Views: 138.4ms | ActiveRecord: 16.6ms)


Started GET "/teachers/82/customized_courses" for 10.0.2.2 at 2015-09-07 15:16:11 +0000
Processing by TeachersController#customized_courses as HTML
  Parameters: {"id"=>"82"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit teachers:customized_courses
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCustomizedCourse Load (0.6ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" INNER JOIN "customized_course_assignments" ON "customized_courses"."id" = "customized_course_assignments"."customized_course_id" WHERE "customized_course_assignments"."teacher_id" = $1 LIMIT 10 OFFSET 0[0m  [["teacher_id", 82]]
  Rendered shared/_address.html.erb (0.1ms)
  Rendered shared/customized_courses/_introduce.html.erb (1.4ms)
  Rendered shared/customized_courses/_index_container.html.erb (4.9ms)
  Rendered teachers/customized_courses.html.erb within layouts/teacher_home (6.0ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 64ms (Views: 56.2ms | ActiveRecord: 1.6ms)
  [1m[35mCustomizedTutorial Load (9.5ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials"  ORDER BY "customized_tutorials"."id" DESC LIMIT 1
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCustomizedTutorial Load (0.6ms)[0m  [1mSELECT "customized_tutorials".* FROM "customized_tutorials"[0m
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 3], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 4], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087417-LCIH4VTZvASylRob_X2LZw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 5], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087579-VMr4B0bLFPJMRFaa-E0oEQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 6], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 1], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 2], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]


Started DELETE "/signout" for 10.0.2.2 at 2015-09-07 15:17:49 +0000
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"+7t8ItRNqnwlPRrTv5RiTWWwEcp7aGwTpD7kA+VkOeXEDfj69DdwVXu3Urke5RGTCTdpblUiCUs+4p3r4pum4w=="}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "79bb27ce66144f7e7fa6a7ee8031ae11536c17a0"]]
张建东 visit sessions:destroy
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.9ms)[0m  UPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["remember_token", "460c374c0880d96358637744b22c45ce23a9317d"], ["updated_at", "2015-09-07 15:17:49.711633"], ["id", 82]]
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 19ms (ActiveRecord: 3.7ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 15:17:49 +0000
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application_home (0.6ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 58ms (Views: 57.2ms | ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:17:51 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (5.2ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 54ms (Views: 52.5ms | ActiveRecord: 0.0ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:17:56 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"vBXlm7qDJEpsqA9zl5D7XQGV0ePmYDDh/rfpomlNet2Do2FDmvn+YzIiRxk24YiDbRKpR8gqVblka5BKbrLl2w==", "user"=>{"email"=>"zhangjiandongjesical@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[35mUser Load (4.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "zhangjiandongjesical@gmail.com"]]
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"], ["updated_at", "2015-09-07 15:17:56.456712"], ["id", 1]]
  [1m[36m (9.7ms)[0m  [1mCOMMIT[0m
  [1m[35mAdmin Load (2.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
Redirected to http://localhost:3000/admins/home
Completed 302 Found in 159ms (ActiveRecord: 17.6ms)


Started GET "/admins/home" for 10.0.2.2 at 2015-09-07 15:17:56 +0000
Processing by Admins::HomeController#main as HTML
  [1m[36mAdmin Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit admins/home:main
  Rendered admins/home/main.html.erb within layouts/admin_home (0.2ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 55ms (Views: 50.4ms | ActiveRecord: 0.6ms)


Started GET "/schools" for 10.0.2.2 at 2015-09-07 15:17:58 +0000
Processing by SchoolsController#index as HTML
  [1m[35mAdmin Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit schools:index
  [1m[36mSchool Load (0.8ms)[0m  [1mSELECT "schools".* FROM "schools"  ORDER BY "schools"."created_at" ASC[0m
  [1m[35mCity Load (0.8ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered schools/_school.html.erb (45.2ms)
  Rendered schools/index.html.erb within layouts/admin_home (65.6ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 155ms (Views: 144.6ms | ActiveRecord: 5.2ms)


Started GET "/admins/managers" for 10.0.2.2 at 2015-09-07 15:18:03 +0000
Processing by Admins::ManagersController#index as HTML
  [1m[36mAdmin Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit admins/managers:index
  [1m[35mManager Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."role" = $1  [["role", "manager"]]
  Rendered admins/managers/_manager.html.erb (1.2ms)
  Rendered admins/managers/index.html.erb within layouts/admin_home (31.8ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 105ms (Views: 91.0ms | ActiveRecord: 1.3ms)


Started GET "/admins/managers" for 10.0.2.2 at 2015-09-07 15:18:08 +0000
Processing by Admins::ManagersController#index as HTML
  [1m[36mAdmin Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit admins/managers:index
  [1m[35mManager Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."role" = $1  [["role", "manager"]]
  Rendered admins/managers/_manager.html.erb (0.1ms)
  Rendered admins/managers/index.html.erb within layouts/admin_home (4.3ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 58ms (Views: 53.1ms | ActiveRecord: 1.0ms)


Started GET "/admins/cities" for 10.0.2.2 at 2015-09-07 15:18:10 +0000
Processing by Admins::CitiesController#index as HTML
  [1m[36mAdmin Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit admins/cities:index
  [1m[35mCity Load (0.5ms)[0m  SELECT "cities".* FROM "cities"
  Rendered admins/cities/_city.html.erb (1.4ms)
  Rendered admins/cities/index.html.erb within layouts/admin_home (15.4ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 94ms (Views: 88.8ms | ActiveRecord: 1.5ms)


Started GET "/teachers" for 10.0.2.2 at 2015-09-07 15:18:12 +0000
Processing by TeachersController#index as HTML
  [1m[36mAdmin Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit teachers:index
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1  ORDER BY "users"."created_at" ASC LIMIT 10 OFFSET 0  [["role", "teacher"]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."role" = $1[0m  [["role", "teacher"]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered teachers/_teacher_status.html.erb (1.2ms)
  [1m[36mSchool Load (0.6ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  Rendered teachers/_teacher.html.erb (43.8ms)
  Rendered teachers/index.html.erb within layouts/admin_home (71.8ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 143ms (Views: 136.6ms | ActiveRecord: 2.8ms)


Started GET "/teachers/2" for 10.0.2.2 at 2015-09-07 15:18:18 +0000
Processing by TeachersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mAdmin Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit teachers:show
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  Rendered teachers/show.html.erb within layouts/teacher_home (0.9ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 66ms (Views: 59.4ms | ActiveRecord: 1.0ms)


Started GET "/teachers/2/info" for 10.0.2.2 at 2015-09-07 15:18:21 +0000
Processing by TeachersController#info as HTML
  Parameters: {"id"=>"2"}
  [1m[35mAdmin Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit teachers:info
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mSchool Load (0.4ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered teachers/info.html.erb within layouts/teacher_home (5.0ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 76ms (Views: 68.9ms | ActiveRecord: 2.0ms)


Started GET "/admins/managers" for 10.0.2.2 at 2015-09-07 15:18:26 +0000
Processing by Admins::ManagersController#index as HTML
  [1m[36mAdmin Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit admins/managers:index
  [1m[35mManager Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."role" = $1  [["role", "manager"]]
  Rendered admins/managers/_manager.html.erb (0.4ms)
  Rendered admins/managers/index.html.erb within layouts/admin_home (4.9ms)
  Rendered layouts/_top_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 56ms (Views: 49.8ms | ActiveRecord: 1.2ms)


Started DELETE "/signout" for 10.0.2.2 at 2015-09-07 15:18:35 +0000
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"cZTL17jTAsgueHaWm6HnnAX0jxAf4gR+wZL96Hz66LpOIk8PmKnY4XDyPvw60JRCaXP3tDGoYSZbToQAewV3vA=="}
  [1m[36mAdmin Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "ce24cb2fd1e6a2482fae4b01cb4f7f120a14126d"]]
张建东 visit sessions:destroy
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "26f5540ff85672c272d1c53baf2dfe92d77a002f"], ["updated_at", "2015-09-07 15:18:35.549350"], ["id", 1]]
  [1m[35m (1.4ms)[0m  COMMIT
Redirected to http://localhost:3000/
Completed 302 Found in 11ms (ActiveRecord: 2.9ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 15:18:35 +0000
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application_home (0.4ms)
  Rendered layouts/_top_bar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 48ms (Views: 47.0ms | ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:18:36 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (7.3ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 72ms (Views: 70.7ms | ActiveRecord: 0.0ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:18:52 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fTwKb4bz9W38IEmW4/SuWBkEKbaluRDqqE0sxt/UNUBCio63pokvRKKqAfxChd2GdYNREovzdbIykVUu2CuqRg==", "user"=>{"email"=>"machengke@qatime.cn", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mUser Load (9.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "machengke@qatime.cn"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"], ["updated_at", "2015-09-07 15:18:52.607009"], ["id", 58]]
  [1m[35m (0.9ms)[0m  COMMIT
  [1m[36mManager Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
Redirected to http://localhost:3000/managers/home
Completed 302 Found in 116ms (ActiveRecord: 12.0ms)


Started GET "/managers/home" for 10.0.2.2 at 2015-09-07 15:18:52 +0000
Processing by Managers::HomeController#main as HTML
  [1m[35mManager Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit managers/home:main
  Rendered managers/home/main.html.erb within layouts/manager_home (0.7ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 91ms (Views: 84.2ms | ActiveRecord: 0.6ms)


Started GET "/teachers" for 10.0.2.2 at 2015-09-07 15:18:55 +0000
Processing by TeachersController#index as HTML
  [1m[36mManager Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit teachers:index
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1  ORDER BY "users"."created_at" ASC LIMIT 10 OFFSET 0  [["role", "teacher"]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users" WHERE "users"."role" = $1[0m  [["role", "teacher"]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered teachers/_teacher_status.html.erb (0.4ms)
  [1m[36mSchool Load (0.5ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.1ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  Rendered teachers/_teacher.html.erb (28.9ms)
  Rendered teachers/index.html.erb within layouts/manager_home (38.1ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 95ms (Views: 85.4ms | ActiveRecord: 3.3ms)


Started GET "/teachers/2" for 10.0.2.2 at 2015-09-07 15:18:58 +0000
Processing by TeachersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mManager Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit teachers:show
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  Rendered teachers/show.html.erb within layouts/teacher_home (0.1ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 55ms (Views: 47.9ms | ActiveRecord: 1.2ms)


Started GET "/managers/58/customized_courses" for 10.0.2.2 at 2015-09-07 15:19:00 +0000
Processing by ManagersController#customized_courses as HTML
  Parameters: {"id"=>"58"}
  [1m[35mManager Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit managers:customized_courses
  [1m[36mManager Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "manager"], ["id", 58]]
  [1m[35mCustomizedCourse Load (0.6ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" LIMIT 10 OFFSET 0
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 1]]
  [1m[35mStudent Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  Rendered shared/customized_courses/_customized_course.html.erb (30.5ms)
  Rendered shared/customized_courses/_index_container.html.erb (47.1ms)
  Rendered managers/customized_courses.html.erb within layouts/manager_home (51.0ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 119ms (Views: 109.3ms | ActiveRecord: 4.5ms)


Started GET "/customized_courses/1" for 10.0.2.2 at 2015-09-07 15:19:03 +0000
Processing by CustomizedCoursesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mManager Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_courses:show
  [1m[35mCustomizedCourse Load (0.5ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered shared/subjects/_header.html.erb (0.8ms)
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.8ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 1]]
  Rendered customized_courses/_header.html.erb (15.3ms)
  Rendered collection (0.0ms)
  Rendered customized_courses/_main.html.erb (28.6ms)
  Rendered customized_courses/show.html.erb within layouts/application (40.5ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 121ms (Views: 111.9ms | ActiveRecord: 3.8ms)


Started GET "/customized_courses/2" for 10.0.2.2 at 2015-09-07 15:19:09 +0000
Processing by CustomizedCoursesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mManager Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_courses:show
  [1m[35mCustomizedCourse Load (0.5ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[36mStudent Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.8ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered customized_courses/_header.html.erb (9.1ms)
  [1m[36mCustomizedTutorial Load (0.6ms)[0m  [1mSELECT "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."customized_course_id" = $1[0m  [["customized_course_id", 2]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 3], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 4], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087417-LCIH4VTZvASylRob_X2LZw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 5], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087579-VMr4B0bLFPJMRFaa-E0oEQ"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 6], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 1], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 2], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  Rendered customized_tutorials/_customized_tutorial.html.erb (2.5ms)
  Rendered customized_courses/_main.html.erb (112.1ms)
  Rendered customized_courses/show.html.erb within layouts/application (113.4ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 165ms (Views: 148.5ms | ActiveRecord: 12.4ms)


Started GET "/customized_tutorials/3" for 10.0.2.2 at 2015-09-07 15:19:16 +0000
Processing by CustomizedTutorialsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mManager Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_tutorials:show
  [1m[36mCustomizedTutorial Load (0.5ms)[0m  [1mSELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 3], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCustomizedCourse Load (0.6ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 3], ["qa_fileable_type", "CustomizedTutorial"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.0ms)
  [1m[35mTopic Load (0.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 3]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (4.4ms)
  Rendered customized_tutorials/show.html.erb within layouts/application (15.0ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 122ms (Views: 74.5ms | ActiveRecord: 6.4ms)


Started GET "/customized_tutorials/undefined" for 10.0.2.2 at 2015-09-07 15:19:16 +0000
Processing by CustomizedTutorialsController#show as */*
  Parameters: {"id"=>"undefined"}
  [1m[36mManager Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_tutorials:show
  [1m[35mCustomizedTutorial Load (0.6ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 0]]
Completed 404 Not Found in 6ms

ActiveRecord::RecordNotFound (Couldn't find CustomizedTutorial with 'id'=undefined):
  app/controllers/customized_tutorials_controller.rb:45:in `current_resource'
  app/controllers/application_controller.rb:32:in `authorize'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (29.5ms)


Started GET "/customized_courses/2" for 10.0.2.2 at 2015-09-07 15:19:24 +0000
Processing by CustomizedCoursesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mManager Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_courses:show
  [1m[35mCustomizedCourse Load (0.5ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.7ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered customized_courses/_header.html.erb (8.4ms)
  [1m[36mCustomizedTutorial Load (0.8ms)[0m  [1mSELECT "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."customized_course_id" = $1[0m  [["customized_course_id", 2]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 3], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 4], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087417-LCIH4VTZvASylRob_X2LZw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 5], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087579-VMr4B0bLFPJMRFaa-E0oEQ"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 6], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 1], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 2], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  Rendered customized_tutorials/_customized_tutorial.html.erb (0.9ms)
  Rendered customized_courses/_main.html.erb (42.0ms)
  Rendered customized_courses/show.html.erb within layouts/application (43.0ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 96ms (Views: 84.0ms | ActiveRecord: 8.1ms)


Started GET "/customized_tutorials/7" for 10.0.2.2 at 2015-09-07 15:19:29 +0000
Processing by CustomizedTutorialsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[35mManager Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_tutorials:show
  [1m[36mCustomizedTutorial Load (0.5ms)[0m  [1mSELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1[0m  [["id", 7]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCustomizedCourse Load (0.6ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 7], ["qa_fileable_type", "CustomizedTutorial"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.0ms)
  [1m[35mTopic Load (0.7ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 7]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 75]]
  [1m[35mCustomizedTutorial Load (0.5ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 75]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  Rendered topics/_topic.html.erb (27.5ms)
  Rendered topics/_index.html.erb (56.2ms)
  Rendered customized_tutorials/show.html.erb within layouts/application (61.9ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 124ms (Views: 106.7ms | ActiveRecord: 7.1ms)


Started GET "/customized_courses/2/topics" for 10.0.2.2 at 2015-09-07 15:19:35 +0000
Processing by CustomizedCoursesController#topics as HTML
  Parameters: {"id"=>"2"}
  [1m[36mManager Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_courses:topics
  [1m[35mCustomizedCourse Load (0.5ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.7ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered customized_courses/_header.html.erb (9.5ms)
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1 AND "topics"."topicable_type" = $2  ORDER BY "topics"."created_at" ASC LIMIT 30 OFFSET 0[0m  [["topicable_id", 2], ["topicable_type", "CustomizedCourse"]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCustomizedCourse Load (0.5ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 75]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered topics/_topic.html.erb (11.0ms)
  Rendered topics/_index.html.erb (15.0ms)
  Rendered customized_courses/_main.html.erb (27.6ms)
  Rendered customized_courses/topics.html.erb within layouts/application (29.8ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 105ms (Views: 92.6ms | ActiveRecord: 4.4ms)


Started GET "/customized_courses/2" for 10.0.2.2 at 2015-09-07 15:19:37 +0000
Processing by CustomizedCoursesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mManager Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_courses:show
  [1m[36mCustomizedCourse Load (0.4ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[35mStudent Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered customized_courses/_header.html.erb (8.4ms)
  [1m[35mCustomizedTutorial Load (0.7ms)[0m  SELECT "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."customized_course_id" = $1  [["customized_course_id", 2]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 3], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCACHE (1.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 4], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437087417-LCIH4VTZvASylRob_X2LZw"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 5], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437087579-VMr4B0bLFPJMRFaa-E0oEQ"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 6], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 1], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 2], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  Rendered customized_tutorials/_customized_tutorial.html.erb (0.9ms)
  Rendered customized_courses/_main.html.erb (45.1ms)
  Rendered customized_courses/show.html.erb within layouts/application (46.6ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (2.2ms)
Completed 200 OK in 119ms (Views: 105.4ms | ActiveRecord: 9.5ms)


Started GET "/students/75/customized_courses/2/edit" for 10.0.2.2 at 2015-09-07 15:19:40 +0000
Processing by CustomizedCoursesController#edit as HTML
  Parameters: {"student_id"=>"75", "id"=>"2"}
  [1m[36mManager Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit customized_courses:edit
  [1m[35mStudent Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mCustomizedCourse Load (0.4ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mStudent Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."category" = $2 AND "users"."subject" = $3[0m  [["role", "teacher"], ["category", "高中"], ["subject", "物理"]]
  [1m[35mSchool Load (0.6ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mSchool Load (0.8ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 7]]
  [1m[35mSchool Load (0.7ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mCACHE (0.2ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mSchool Load (0.6ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.2ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered customized_courses/_form.html.erb (55.2ms)
  Rendered customized_courses/edit.html.erb within layouts/application (71.9ms)
  Rendered layouts/_top_bar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 169ms (Views: 154.2ms | ActiveRecord: 7.4ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = $1  [["email", "zhang@163.com"]]


Started DELETE "/signout" for 10.0.2.2 at 2015-09-07 15:20:12 +0000
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"yazlZaVVgHABMaOrq2b7mFP0kEyshiss6eM4+idYrLf2GmG9hS9aWV+768EKF4hGP3Po6ILMTnRzP0ESIKczsQ=="}
  [1m[35mManager Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "3d6c5d7f772cc1f759d55f90dc4519e6a99076b9"]]
马成科 visit sessions:destroy
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["remember_token", "a52a5148964c6e3760fc356886ff22902b578442"], ["updated_at", "2015-09-07 15:20:13.038235"], ["id", 58]]
  [1m[36m (1.8ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 11ms (ActiveRecord: 3.2ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 15:20:13 +0000
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application_home (0.4ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 53ms (Views: 52.3ms | ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:20:14 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (8.6ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 59ms (Views: 57.7ms | ActiveRecord: 0.0ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:20:27 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ZlTbzBtiCkl94JDxGH53JflDfC1IVgNOes5rqwc13QxZ4l8UOxjQYCNq2Ju5DwT7lcQEiWYcZhbgEhJDAMpCCg==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "zhang@163.com"]]
  Rendered sessions/new.html.erb within layouts/application (5.0ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 149ms (Views: 50.9ms | ActiveRecord: 1.2ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:20:50 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"q1xx+el86HLy8OQxbC6BZPw1Em5X6xD9gBQ+E9byMqiU6vUhyQYyW6x6rFvNX/K6kLJqynmhdaUayEf70Q2trg==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "zhang@163.com"]]
  Rendered sessions/new.html.erb within layouts/application (10.5ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 179ms (Views: 78.2ms | ActiveRecord: 0.5ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:20:55 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3vMbohYURpJ9CnHL2vk25ZMHMLT22kCQJvI9K7rSf7jhRZ96Nm6cuyOAOaF7iEU7/4BIENiQJci8LkTDvS3gvg==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "zhang@163.com"]]
  Rendered sessions/new.html.erb within layouts/application (6.3ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 145ms (Views: 53.0ms | ActiveRecord: 0.5ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:20:58 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"uz3/CWxfLhaYBG30rz4Vl25Pz9aAGb1UgI9QpAjpRjKEi3vRTCX0P8aOJZ4OT2ZJAsi3cq5T2AwaUylMDxbZNA==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "zhang@163.com"]]
  Rendered sessions/new.html.erb within layouts/application (4.7ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 147ms (Views: 54.9ms | ActiveRecord: 0.5ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:21:02 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mSIlTeCcCyYsBH/FaojV1NC/A2w3pG/r5+fszLZPutGmlKGVwObRD3KON6/L+aYKvDh7yBnuCrN9O5UksbAl1w==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "zhang@163.com"]]
  Rendered sessions/new.html.erb within layouts/application (7.9ms)
  Rendered layouts/_top_bar.html.erb (2.0ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 175ms (Views: 76.1ms | ActiveRecord: 0.6ms)


Started GET "/curriculums" for 10.0.2.2 at 2015-09-07 15:21:11 +0000
Processing by CurriculumsController#index as HTML
====================
http://localhost:3000/sessions
====================
Redirected to http://localhost:3000/signin
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:21:11 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (6.5ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 75ms (Views: 74.2ms | ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:21:13 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (6.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 65ms (Views: 63.9ms | ActiveRecord: 0.0ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:21:24 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"daBUvIfa6291QmlpQdEbf+UeXIR2caX0JQpkUTTeI5RKFtBkp6AxRivIIQPgoGihiZkkIFg7wKy/1h25MyG8kg==", "user"=>{"email"=>"zhangjiandongjesical@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "zhangjiandongjesical@gmail.com"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "81e584c36ce2e7fc47175110e7688344d2483212"], ["updated_at", "2015-09-07 15:21:24.889118"], ["id", 1]]
  [1m[35m (9.3ms)[0m  COMMIT
  [1m[36mAdmin Load (4.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "81e584c36ce2e7fc47175110e7688344d2483212"]]
Redirected to http://localhost:3000/admins/home
Completed 302 Found in 130ms (ActiveRecord: 15.6ms)


Started GET "/admins/home" for 10.0.2.2 at 2015-09-07 15:21:24 +0000
Processing by Admins::HomeController#main as HTML
  [1m[35mAdmin Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "admin"], ["remember_token", "81e584c36ce2e7fc47175110e7688344d2483212"]]
张建东 visit admins/home:main
  Rendered admins/home/main.html.erb within layouts/admin_home (0.1ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 52ms (Views: 49.1ms | ActiveRecord: 0.6ms)


Started GET "/admins/managers" for 10.0.2.2 at 2015-09-07 15:21:27 +0000
Processing by Admins::ManagersController#index as HTML
  [1m[36mAdmin Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "81e584c36ce2e7fc47175110e7688344d2483212"]]
张建东 visit admins/managers:index
  [1m[35mManager Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."role" = $1  [["role", "manager"]]
  Rendered admins/managers/_manager.html.erb (1.2ms)
  Rendered admins/managers/index.html.erb within layouts/admin_home (6.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 58ms (Views: 53.0ms | ActiveRecord: 1.8ms)


Started DELETE "/signout" for 10.0.2.2 at 2015-09-07 15:21:30 +0000
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ujY7k94jgf6lEIye4nTnZLs4wrEQaVJi4Z79QisEjnmFgL9L/llb1/uaxPRDBZS617+6FT4jNzp7QoSqLPsRfw=="}
  [1m[36mAdmin Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "admin"], ["remember_token", "81e584c36ce2e7fc47175110e7688344d2483212"]]
张建东 visit sessions:destroy
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "f9733f8925082319ae3ceffc067b7308442318d9"], ["updated_at", "2015-09-07 15:21:30.524297"], ["id", 1]]
  [1m[35m (9.7ms)[0m  COMMIT
Redirected to http://localhost:3000/
Completed 302 Found in 19ms (ActiveRecord: 11.2ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 15:21:30 +0000
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application_home (0.4ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 48ms (Views: 47.5ms | ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:21:32 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (5.0ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 57ms (Views: 55.6ms | ActiveRecord: 0.0ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:21:42 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"xXqX79IaAr/2oIcEsjfWQs3fSepy4LPljiK1tWtvdl/6zBM38mDYlqgqz24TRqWcoVgxTlyq1r0U/sxdbJDpWQ==", "user"=>{"email"=>"machengke@qatime.cn", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mUser Load (2.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "machengke@qatime.cn"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"], ["updated_at", "2015-09-07 15:21:42.245738"], ["id", 58]]
  [1m[35m (10.7ms)[0m  COMMIT
  [1m[36mManager Load (3.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
Redirected to http://localhost:3000/managers/home
Completed 302 Found in 122ms (ActiveRecord: 17.6ms)


Started GET "/managers/home" for 10.0.2.2 at 2015-09-07 15:21:42 +0000
Processing by Managers::HomeController#main as HTML
  [1m[35mManager Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit managers/home:main
  Rendered managers/home/main.html.erb within layouts/manager_home (0.1ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 52ms (Views: 48.4ms | ActiveRecord: 0.5ms)


Started GET "/managers/58/customized_courses" for 10.0.2.2 at 2015-09-07 15:21:44 +0000
Processing by ManagersController#customized_courses as HTML
  Parameters: {"id"=>"58"}
  [1m[36mManager Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit managers:customized_courses
  [1m[35mManager Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "manager"], ["id", 58]]
  [1m[36mCustomizedCourse Load (0.6ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" LIMIT 10 OFFSET 0[0m
  [1m[35mTeacher Load (0.5ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 1]]
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  Rendered shared/customized_courses/_customized_course.html.erb (12.1ms)
  Rendered shared/customized_courses/_index_container.html.erb (16.3ms)
  Rendered managers/customized_courses.html.erb within layouts/manager_home (19.4ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 87ms (Views: 78.5ms | ActiveRecord: 3.3ms)


Started GET "/students" for 10.0.2.2 at 2015-09-07 15:21:55 +0000
Processing by StudentsController#index as HTML
  [1m[35mManager Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit students:index
  [1m[36mStudent Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1  ORDER BY "users"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["role", "student"]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."role" = $1  [["role", "student"]]
  Rendered students/_student.html.erb (3.6ms)
  Rendered students/_students.html.erb (25.3ms)
  Rendered students/index.html.erb within layouts/manager_home (37.1ms)
  Rendered layouts/_top_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 107ms (Views: 100.8ms | ActiveRecord: 1.7ms)


Started GET "/managers/lessons/state?manager_id=58" for 10.0.2.2 at 2015-09-07 15:22:01 +0000
Processing by Managers::LessonsController#state as HTML
  Parameters: {"manager_id"=>"58"}
  [1m[36mManager Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit managers/lessons:state
  Rendered managers/lessons/_lesson_state_nav_tab.html.erb (2.1ms)
  Rendered managers/lessons/_lesson_state_nav_tab.html.erb (0.6ms)
  Rendered managers/lessons/_lesson_state_nav_tab.html.erb (0.6ms)
  [1m[35mLesson Load (0.9ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."state" = $1  ORDER BY "lessons"."created_at" ASC LIMIT 10 OFFSET 0  [["state", "reviewing"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "E4g3ZliZFMUkWyrhbSYcCg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 89], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "H6Nu6Dszxbq9qvYpCl8vXw"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 162], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 73]]
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 59]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 13]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  Rendered managers/lessons/_lesson.html.erb (22.3ms)
  Rendered managers/lessons/state.html.erb within layouts/manager_home (72.1ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 141ms (Views: 128.0ms | ActiveRecord: 9.0ms)


Started GET "/schools" for 10.0.2.2 at 2015-09-07 15:22:04 +0000
Processing by SchoolsController#index as HTML
  [1m[36mManager Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit schools:index
  [1m[35mSchool Load (0.6ms)[0m  SELECT "schools".* FROM "schools"  ORDER BY "schools"."created_at" ASC
  [1m[36mCity Load (0.5ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered schools/_school.html.erb (15.3ms)
  Rendered schools/index.html.erb within layouts/manager_home (20.8ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 73ms (Views: 68.0ms | ActiveRecord: 1.9ms)


Started GET "/teachers" for 10.0.2.2 at 2015-09-07 15:22:06 +0000
Processing by TeachersController#index as HTML
  [1m[35mManager Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit teachers:index
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1  ORDER BY "users"."created_at" ASC LIMIT 10 OFFSET 0[0m  [["role", "teacher"]]
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."role" = $1  [["role", "teacher"]]
  [1m[36mSchool Load (0.5ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered teachers/_teacher_status.html.erb (0.4ms)
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  Rendered teachers/_teacher.html.erb (28.4ms)
  Rendered teachers/index.html.erb within layouts/manager_home (38.5ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 89ms (Views: 82.7ms | ActiveRecord: 3.5ms)


Started GET "/teachers/2" for 10.0.2.2 at 2015-09-07 15:22:08 +0000
Processing by TeachersController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mManager Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit teachers:show
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  Rendered teachers/show.html.erb within layouts/teacher_home (0.1ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 70ms (Views: 64.0ms | ActiveRecord: 1.0ms)


Started GET "/teachers/2/customized_courses" for 10.0.2.2 at 2015-09-07 15:22:14 +0000
Processing by TeachersController#customized_courses as HTML
  Parameters: {"id"=>"2"}
  [1m[36mManager Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit teachers:customized_courses
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
====================
http://localhost:3000/teachers/2
马成科
====================
Redirected to http://localhost:3000/managers/home
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)


Started GET "/managers/home" for 10.0.2.2 at 2015-09-07 15:22:14 +0000
Processing by Managers::HomeController#main as HTML
  [1m[36mManager Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit managers/home:main
  Rendered managers/home/main.html.erb within layouts/manager_home (0.1ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 60ms (Views: 56.6ms | ActiveRecord: 0.5ms)


Started GET "/teachers" for 10.0.2.2 at 2015-09-07 15:22:17 +0000
Processing by TeachersController#index as HTML
  [1m[35mManager Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit teachers:index
  [1m[36mTeacher Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1  ORDER BY "users"."created_at" ASC LIMIT 10 OFFSET 0[0m  [["role", "teacher"]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "users" WHERE "users"."role" = $1  [["role", "teacher"]]
  [1m[36mSchool Load (0.5ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[35mSchool Load (0.4ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  Rendered teachers/_teacher_status.html.erb (0.3ms)
  Rendered teachers/_teacher.html.erb (26.7ms)
  Rendered teachers/index.html.erb within layouts/manager_home (37.4ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 87ms (Views: 80.5ms | ActiveRecord: 3.3ms)


Started GET "/managers/58/customized_courses" for 10.0.2.2 at 2015-09-07 15:22:23 +0000
Processing by ManagersController#customized_courses as HTML
  Parameters: {"id"=>"58"}
  [1m[36mManager Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit managers:customized_courses
  [1m[35mManager Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "manager"], ["id", 58]]
  [1m[36mCustomizedCourse Load (0.8ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" LIMIT 10 OFFSET 0[0m
  [1m[35mTeacher Load (0.7ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 1]]
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  Rendered shared/customized_courses/_customized_course.html.erb (14.2ms)
  Rendered shared/customized_courses/_index_container.html.erb (20.3ms)
  Rendered managers/customized_courses.html.erb within layouts/manager_home (22.2ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 75ms (Views: 65.6ms | ActiveRecord: 3.6ms)


Started GET "/customized_courses/1" for 10.0.2.2 at 2015-09-07 15:22:25 +0000
Processing by CustomizedCoursesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mManager Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit customized_courses:show
  [1m[36mCustomizedCourse Load (0.4ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[35mStudent Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 1]]
  Rendered customized_courses/_header.html.erb (9.4ms)
  Rendered collection (0.0ms)
  Rendered customized_courses/_main.html.erb (12.5ms)
  Rendered customized_courses/show.html.erb within layouts/application (14.8ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 64ms (Views: 57.9ms | ActiveRecord: 2.2ms)


Started GET "/students/75/customized_courses/1/edit" for 10.0.2.2 at 2015-09-07 15:22:29 +0000
Processing by CustomizedCoursesController#edit as HTML
  Parameters: {"student_id"=>"75", "id"=>"1"}
  [1m[35mManager Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit customized_courses:edit
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mCustomizedCourse Load (0.4ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."category" = $2 AND "users"."subject" = $3  [["role", "teacher"], ["category", "高中"], ["subject", "数学"]]
  [1m[36mSchool Load (0.5ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mSchool Load (0.6ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mSchool Load (0.6ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 7]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mSchool Load (0.6ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 14]]
  [1m[35mSchool Load (0.4ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 13]]
  [1m[36mSchool Load (0.4ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 1]]
  Rendered customized_courses/_form.html.erb (34.3ms)
  Rendered customized_courses/edit.html.erb within layouts/application (36.2ms)
  Rendered layouts/_top_bar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 105ms (Views: 90.7ms | ActiveRecord: 6.8ms)


Started DELETE "/signout" for 10.0.2.2 at 2015-09-07 15:23:12 +0000
Processing by SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"c3weWB474YLLJnHmCXWVGFOliM6djImSa/eStbXSS+1MypqAPkE7q5WsOYyoBObGPyLwarPG7MrxK+tdsi3U6w=="}
  [1m[35mManager Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "manager"], ["remember_token", "f47f69cbdddb18b717dfaba1cf309c49d01ceecc"]]
马成科 visit sessions:destroy
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3  [["remember_token", "d48732fda62592e847739e99295150e4d957489c"], ["updated_at", "2015-09-07 15:23:12.309359"], ["id", 58]]
  [1m[36m (9.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 18ms (ActiveRecord: 10.8ms)


Started GET "/" for 10.0.2.2 at 2015-09-07 15:23:12 +0000
Processing by HomeController#index as HTML
  Rendered home/index.html.erb within layouts/application_home (0.4ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 47ms (Views: 45.6ms | ActiveRecord: 0.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-07 15:23:13 +0000
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (7.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 55ms (Views: 54.1ms | ActiveRecord: 0.0ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:23:26 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"JIttkWkXfbn9YTHAFLcv2T3LOkbF4Vb0PCVD4NNK3uAbPelJSW2nkKPreaq1xlwHUUxC4uurM6ym+ToI1LVB5g==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[35mUser Load (12.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["email", "zhang@163.com"]]
  Rendered sessions/new.html.erb within layouts/application (4.6ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 167ms (Views: 60.1ms | ActiveRecord: 12.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = $1[0m  [["email", "zhang@163.com"]]
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE ("users"."email" = 'zhang@163.com' AND "users"."id" != 2) LIMIT 1[0m
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "users" SET "password_digest" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["password_digest", "$2a$10$qpHf.KA0sP75m9LwTu2.POklG2c4AfCPhBZ53wrvDpdgHKdNsO2bK"], ["updated_at", "2015-09-07 15:27:09.608400"], ["id", 2]]
  [1m[35m (9.9ms)[0m  COMMIT


Started POST "/sessions" for 10.0.2.2 at 2015-09-07 15:27:18 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ouVFrOQTNM401C4DejxbiqU5BSK9RpsLoe1p3wx7DzOdU8F0xGnu52peZmnbTShUyb59hpMM/lM7MRA3C4SQNQ==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "zhang@163.com"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"], ["updated_at", "2015-09-07 15:27:19.087507"], ["id", 2]]
  [1m[35m (11.1ms)[0m  COMMIT
  [1m[36mTeacher Load (2.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
Redirected to http://localhost:3000/teachers/2/questions
Completed 302 Found in 113ms (ActiveRecord: 15.6ms)


Started GET "/teachers/2/questions" for 10.0.2.2 at 2015-09-07 15:27:19 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"2"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers:questions
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mQuestion Load (0.8ms)[0m  SELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0  [["teacher_id", 2]]
  [1m[36mStudent Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mVipClass Load (2.5ms)[0m  SELECT  "vip_classes".* FROM "vip_classes" WHERE "vip_classes"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (1.4ms)[0m  [1mSELECT "users".id FROM "users" INNER JOIN "question_assignments" ON "users"."id" = "question_assignments"."teacher_id" WHERE "users"."role" = $1 AND "question_assignments"."question_id" = $2[0m  [["role", "teacher"], ["question_id", 22]]
  [1m[35mAnswer Load (2.1ms)[0m  SELECT "answers".* FROM "answers" WHERE "answers"."question_id" = $1  [["question_id", 22]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "vip_classes".* FROM "vip_classes" WHERE "vip_classes"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (1.0ms)[0m  [1mSELECT "users".id FROM "users" INNER JOIN "question_assignments" ON "users"."id" = "question_assignments"."teacher_id" WHERE "users"."role" = $1 AND "question_assignments"."question_id" = $2[0m  [["role", "teacher"], ["question_id", 21]]
  [1m[35mAnswer Load (0.6ms)[0m  SELECT "answers".* FROM "answers" WHERE "answers"."question_id" = $1  [["question_id", 21]]
  Rendered questions/_question.html.erb (69.1ms)
  Rendered teachers/_task.html.erb (81.8ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (83.7ms)
  Rendered layouts/_top_bar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 152ms (Views: 132.2ms | ActiveRecord: 13.1ms)


Started GET "/teachers/2/customized_courses" for 10.0.2.2 at 2015-09-07 15:27:21 +0000
Processing by TeachersController#customized_courses as HTML
  Parameters: {"id"=>"2"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers:customized_courses
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCustomizedCourse Load (0.7ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" INNER JOIN "customized_course_assignments" ON "customized_courses"."id" = "customized_course_assignments"."customized_course_id" WHERE "customized_course_assignments"."teacher_id" = $1 LIMIT 10 OFFSET 0[0m  [["teacher_id", 2]]
  [1m[35mTeacher Load (0.7ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  Rendered shared/customized_courses/_customized_course.html.erb (19.8ms)
  Rendered shared/customized_courses/_index_container.html.erb (26.1ms)
  Rendered teachers/customized_courses.html.erb within layouts/teacher_home (28.7ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 86ms (Views: 76.6ms | ActiveRecord: 2.8ms)


Started GET "/customized_courses/2" for 10.0.2.2 at 2015-09-07 15:27:23 +0000
Processing by CustomizedCoursesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_courses:show
  [1m[36mCustomizedCourse Load (0.5ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  SELECT "users".id FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[36mStudent Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered customized_courses/_header.html.erb (10.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "customized_tutorials" WHERE "customized_tutorials"."token" = $1[0m  [["token", "1441639643-ntvjWU-Z8krWjKFIYG9OfA"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441639643-ntvjWU-Z8krWjKFIYG9OfA"]]
  [1m[36mCustomizedTutorial Load (0.6ms)[0m  [1mSELECT "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."customized_course_id" = $1[0m  [["customized_course_id", 2]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 3], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 4], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087417-LCIH4VTZvASylRob_X2LZw"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 5], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087579-VMr4B0bLFPJMRFaa-E0oEQ"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 6], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 1], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 2], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  Rendered customized_tutorials/_customized_tutorial.html.erb (1.6ms)
  Rendered customized_courses/_main.html.erb (54.7ms)
  Rendered customized_courses/show.html.erb within layouts/application (56.2ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 112ms (Views: 95.0ms | ActiveRecord: 10.2ms)


Started GET "/customized_courses/2/customized_tutorials/new" for 10.0.2.2 at 2015-09-07 15:27:24 +0000
Processing by CustomizedTutorialsController#new as HTML
  Parameters: {"customized_course_id"=>"2"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_tutorials:new
  [1m[36mCustomizedCourse Load (0.5ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  SELECT "users".id FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "customized_tutorials" WHERE "customized_tutorials"."token" = $1[0m  [["token", "1441639645-UOGiIJL3nduxWeBAXO0kgQ"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441639645-UOGiIJL3nduxWeBAXO0kgQ"]]
  Rendered shared/_error_messages.html.erb (0.8ms)
  Rendered videos/_collapse_form.html.erb (14.6ms)
  Rendered videos/_form.html.erb (17.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.4ms)
  Rendered customized_tutorials/_form.html.erb (43.3ms)
  Rendered customized_tutorials/new.html.erb within layouts/application (57.3ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 136ms (Views: 120.2ms | ActiveRecord: 4.1ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-07 15:27:55 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MXExz6+FHAqaoRX+ci3A3bJIG/JsR9Hq3vR0+NFRACwOx7UXj//GI8QrXZTTXLMD3s9jVkINtLJEKA0Q1q6fKg==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003c88388 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-18210-bby0kf.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441639645-UOGiIJL3nduxWeBAXO0kgQ"}}
  [1m[36mTeacher Load (1.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit videos:create
  [1m[35m (0.9ms)[0m  BEGIN
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "94d48c3a2f16189f757c697d8044aabc.mp4"], ["token", "1441639645-UOGiIJL3nduxWeBAXO0kgQ"], ["author_id", 2], ["created_at", "2015-09-07 15:27:56.861347"], ["updated_at", "2015-09-07 15:27:56.861347"]]


Started GET "/customized_courses/2" for 10.0.2.2 at 2015-09-07 15:31:51 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by CustomizedCoursesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_courses:show
  [1m[36mCustomizedCourse Load (0.6ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  SELECT "users".id FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered shared/subjects/_header.html.erb (0.5ms)
  [1m[36mStudent Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mTeacher Load (0.7ms)[0m  SELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered customized_courses/_header.html.erb (97.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "customized_tutorials" WHERE "customized_tutorials"."token" = $1[0m  [["token", "1441639911-rwB1YTD_5OuriGIxw-LdDg"]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441639911-rwB1YTD_5OuriGIxw-LdDg"]]
  [1m[36mCustomizedTutorial Load (0.6ms)[0m  [1mSELECT "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."customized_course_id" = $1[0m  [["customized_course_id", 2]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 3], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 4], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087417-LCIH4VTZvASylRob_X2LZw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 5], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437087579-VMr4B0bLFPJMRFaa-E0oEQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 6], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 1], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 2], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  Rendered customized_tutorials/_customized_tutorial.html.erb (4.2ms)
  Rendered customized_courses/_main.html.erb (204.1ms)
  Rendered customized_courses/show.html.erb within layouts/application (210.2ms)
  Rendered layouts/_top_bar.html.erb (2.8ms)
  Rendered layouts/_footer.html.erb (1.0ms)
Completed 200 OK in 1326ms (Views: 1131.1ms | ActiveRecord: 25.5ms)


Started GET "/customized_courses/2/customized_tutorials/new" for 10.0.2.2 at 2015-09-07 15:31:56 +0000
Processing by CustomizedTutorialsController#new as HTML
  Parameters: {"customized_course_id"=>"2"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_tutorials:new
  [1m[36mCustomizedCourse Load (1.4ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  SELECT "users".id FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2  [["role", "teacher"], ["customized_course_id", 2]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "customized_tutorials" WHERE "customized_tutorials"."token" = $1[0m  [["token", "1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ"]]
  Rendered shared/_error_messages.html.erb (2.8ms)
  Rendered videos/_collapse_form.html.erb (34.5ms)
  Rendered videos/_form.html.erb (37.0ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.1ms)
  Rendered customized_tutorials/_form.html.erb (79.2ms)
  Rendered customized_tutorials/new.html.erb within layouts/application (81.6ms)
  Rendered layouts/_top_bar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 154ms (Views: 135.7ms | ActiveRecord: 6.2ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-07 15:32:04 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dx7pHSVo1ID6qoojM9H6RzI6ARSS5GajDZth2puf51xIqG3FBRIOqaQgwkmSoImZXr15sLyuA/uXRxgynGB4Wg==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003e94bb8 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-18737-1erx2j9.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ"}}
  [1m[36mTeacher Load (1.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit videos:create
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "b5c30e1d43d233030bcd050bd91d1929.mp4"], ["token", "1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ"], ["author_id", 2], ["created_at", "2015-09-07 15:32:05.633917"], ["updated_at", "2015-09-07 15:32:05.633917"]]
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE[0m  [["id", 313]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3[0m  [["state", "in_queue"], ["updated_at", "2015-09-07 15:32:37.068303"], ["id", 313]]
  [1m[35m (1.0ms)[0m  COMMIT
  Rendered videos/_video.html.erb (1.2ms)
  Rendered videos/create.js.erb (4.2ms)
Completed 200 OK in 32542ms (Views: 24.5ms | ActiveRecord: 15.6ms)


Started POST "/customized_courses/2/customized_tutorials" for 10.0.2.2 at 2015-09-07 15:33:14 +0000
Processing by CustomizedTutorialsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dx7pHSVo1ID6qoojM9H6RzI6ARSS5GajDZth2puf51xIqG3FBRIOqaQgwkmSoImZXr15sLyuA/uXRxgynGB4Wg==", "customized_tutorial"=>{"title"=>"测试一下专属课堂的文件上传", "content"=>"测试一下专属课堂的文件上传，测试一下专属课堂的文件上传，测试一下专属课堂的文件上传，测试一下专属课堂的文件上传，测试一下专属课堂的文件上传，测试一下专属课堂的文件上传", "token"=>"1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ", "qa_files_attributes"=>{"new_qa_files_1441639979238"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f5aa8c00da0 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-18737-d4nk9j.html>, @original_filename="8989dd45bacb71c603372b93a24f6ae51433670458711.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"customized_tutorial[qa_files_attributes][new_qa_files_1441639979238][name]\"; filename=\"8989dd45bacb71c603372b93a24f6ae51433670458711.html\"\r\nContent-Type: text/html\r\n">}, "new_qa_files_1441639983668"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f5aa8c00c38 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-18737-1mm41k5.jpg>, @original_filename="倒排索引.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"customized_tutorial[qa_files_attributes][new_qa_files_1441639983668][name]\"; filename=\"\xE5\x80\x92\xE6\x8E\x92\xE7\xB4\xA2\xE5\xBC\x95.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "new_qa_files_1441639988297"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007f5aa8c00ad0 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-18737-1ufzybk.jpeg>, @original_filename="企业信息_1.jpeg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"customized_tutorial[qa_files_attributes][new_qa_files_1441639988297][name]\"; filename=\"\xE4\xBC\x81\xE4\xB8\x9A\xE4\xBF\xA1\xE6\x81\xAF_1.jpeg\"\r\nContent-Type: image/jpeg\r\n">}}}, "commit"=>"新增课程", "customized_course_id"=>"2"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_tutorials:create
  [1m[35mCustomizedCourse Load (0.5ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.6ms)[0m  [1mSELECT "users".id FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 2]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ"]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "customized_tutorials" ("title", "content", "token", "customized_course_id", "teacher_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["title", "测试一下专属课堂的文件上传"], ["content", "测试一下专属课堂的文件上传，测试一下专属课堂的文件上传，测试一下专属课堂的文件上传，测试一下专属课堂的文件上传，测试一下专属课堂的文件上传，测试一下专属课堂的文件上传"], ["token", "1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ"], ["customized_course_id", 2], ["teacher_id", 2], ["created_at", "2015-09-07 15:33:15.101357"], ["updated_at", "2015-09-07 15:33:15.101357"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "customized_courses" SET "customized_tutorials_count" = COALESCE("customized_tutorials_count", 0) + 1 WHERE "customized_courses"."id" = $1[0m  [["id", 2]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "42f3188989c90ec998525c579ab43483.html"], ["author_id", 2], ["original_filename", "8989dd45bacb71c603372b93a24f6ae51433670458711.html"], ["qa_file_type", "text/html"], ["qa_fileable_type", "CustomizedTutorial"], ["qa_fileable_id", 8], ["created_at", "2015-09-07 15:33:15.110074"], ["updated_at", "2015-09-07 15:33:15.110074"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "5c71ec2832f2a47a2b32b87a248b6e79.jpg"], ["author_id", 2], ["original_filename", "倒排索引.jpg"], ["qa_file_type", "image/jpeg"], ["qa_fileable_type", "CustomizedTutorial"], ["qa_fileable_id", 8], ["created_at", "2015-09-07 15:33:15.228993"], ["updated_at", "2015-09-07 15:33:15.228993"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "5448b6a807d4e0d3c0e0f98e673891d9.jpeg"], ["author_id", 2], ["original_filename", "企业信息_1.jpeg"], ["qa_file_type", "image/jpeg"], ["qa_fileable_type", "CustomizedTutorial"], ["qa_fileable_id", 8], ["created_at", "2015-09-07 15:33:15.343841"], ["updated_at", "2015-09-07 15:33:15.343841"]]
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/customized_tutorials/8
Completed 302 Found in 644ms (ActiveRecord: 17.0ms)


Started GET "/customized_tutorials/8" for 10.0.2.2 at 2015-09-07 15:33:15 +0000
Processing by CustomizedTutorialsController#show as HTML
  Parameters: {"id"=>"8"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_tutorials:show
  [1m[36mCustomizedTutorial Load (0.5ms)[0m  [1mSELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1[0m  [["id", 8]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 8], ["videoable_type", "CustomizedTutorial"]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "videos" SET "videoable_id" = $1, "videoable_type" = $2, "updated_at" = $3 WHERE "videos"."id" = $4  [["videoable_id", 8], ["videoable_type", "CustomizedTutorial"], ["updated_at", "2015-09-07 15:33:15.734550"], ["id", 313]]
  [1m[36m (0.9ms)[0m  [1mCOMMIT[0m
  [1m[35mCustomizedCourse Load (0.6ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 8], ["qa_fileable_type", "CustomizedTutorial"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.3ms)
  [1m[35mTopic Load (0.7ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 8]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (4.5ms)
  Rendered customized_tutorials/show.html.erb within layouts/application (15.9ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 103ms (Views: 65.2ms | ActiveRecord: 8.5ms)


Started GET "/customized_courses/2" for 10.0.2.2 at 2015-09-07 15:33:28 +0000
Processing by CustomizedCoursesController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_courses:show
  [1m[35mCustomizedCourse Load (0.6ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.7ms)[0m  [1mSELECT "users".id FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[35mStudent Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" INNER JOIN "customized_course_assignments" ON "users"."id" = "customized_course_assignments"."teacher_id" WHERE "users"."role" = $1 AND "customized_course_assignments"."customized_course_id" = $2[0m  [["role", "teacher"], ["customized_course_id", 2]]
  Rendered customized_courses/_header.html.erb (8.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "customized_tutorials" WHERE "customized_tutorials"."token" = $1  [["token", "1441640008-cJga8Fp-vpOul2SIFZ7vGA"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441640008-cJga8Fp-vpOul2SIFZ7vGA"]]
  [1m[35mCustomizedTutorial Load (0.5ms)[0m  SELECT "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."customized_course_id" = $1  [["customized_course_id", 2]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 3], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 4], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437087417-LCIH4VTZvASylRob_X2LZw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 5], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437087579-VMr4B0bLFPJMRFaa-E0oEQ"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 6], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 1], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 2], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441639916-Hq9iSUoHlZZ0dBFr-OmvkQ"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 8], ["videoable_type", "CustomizedTutorial"]]
  Rendered customized_tutorials/_customized_tutorial.html.erb (1.7ms)
  Rendered customized_courses/_main.html.erb (50.5ms)
  Rendered customized_courses/show.html.erb within layouts/application (52.3ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 107ms (Views: 90.2ms | ActiveRecord: 10.6ms)


Started GET "/customized_tutorials/4/edit" for 10.0.2.2 at 2015-09-07 15:33:32 +0000
Processing by CustomizedTutorialsController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_tutorials:edit
  [1m[35mCustomizedTutorial Load (0.5ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437086264-TroRw7IPog77VldIQdqQqg"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 4], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCustomizedCourse Load (0.6ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (6.3ms)
  Rendered videos/_form.html.erb (8.1ms)
  [1m[35mQaFile Load (0.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 4], ["qa_fileable_type", "CustomizedTutorial"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered customized_tutorials/_form.html.erb (24.6ms)
  Rendered customized_tutorials/edit.html.erb within layouts/application (27.9ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 109ms (Views: 94.9ms | ActiveRecord: 3.9ms)


Started GET "/customized_tutorials/7/edit" for 10.0.2.2 at 2015-09-07 15:33:36 +0000
Processing by CustomizedTutorialsController#edit as HTML
  Parameters: {"id"=>"7"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_tutorials:edit
  [1m[35mCustomizedTutorial Load (0.5ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCustomizedCourse Load (0.6ms)[0m  [1mSELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1[0m  [["id", 2]]
  Rendered shared/_error_messages.html.erb (0.0ms)
  Rendered videos/_video.html.erb (1.1ms)
  Rendered videos/_collapse_form.html.erb (7.8ms)
  Rendered videos/_form.html.erb (8.9ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 7], ["qa_fileable_type", "CustomizedTutorial"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered customized_tutorials/_form.html.erb (21.8ms)
  Rendered customized_tutorials/edit.html.erb within layouts/application (22.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 80ms (Views: 68.1ms | ActiveRecord: 3.1ms)


Started PATCH "/customized_courses/2/customized_tutorials/7" for 10.0.2.2 at 2015-09-07 15:33:52 +0000
Processing by CustomizedTutorialsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dtSlc1CKsCz5qH07g4NUzSnWjtvh8TfRqn6N5GXtlGhJYiGrcPBqBaciNVEi8icTRVH2f8+7UokwovQMYhILbg==", "customized_tutorial"=>{"title"=>"测试视频是否可以播放看看好不好用啊", "content"=>"测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊测试视频是否可以播放看看好不好用啊", "token"=>"1437433658-lbE_pR64mMBxnfo7tt18rQ", "qa_files_attributes"=>{"new_qa_files_1441640018846"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000004111e68 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-18737-pxmuo0.key>, @original_filename="答疑时间.key", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"customized_tutorial[qa_files_attributes][new_qa_files_1441640018846][name]\"; filename=\"\xE7\xAD\x94\xE7\x96\x91\xE6\x97\xB6\xE9\x97\xB4.key\"\r\nContent-Type: application/octet-stream\r\n">}, "new_qa_files_1441640024335"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000004111080 @tempfile=#<Tempfile:/tmp/RackMultipart20150907-18737-1xewl9z.pdf>, @original_filename="兰超-简历-2015-7.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"customized_tutorial[qa_files_attributes][new_qa_files_1441640024335][name]\"; filename=\"\xE5\x85\xB0\xE8\xB6\x85-\xE7\xAE\x80\xE5\x8E\x86-2015-7.pdf\"\r\nContent-Type: application/pdf\r\n">}}}, "commit"=>"更新课程", "customized_course_id"=>"2", "id"=>"7"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_tutorials:update
  [1m[35mCustomizedCourse Load (0.4ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCustomizedTutorial Load (0.5ms)[0m  [1mSELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1[0m  [["id", 7]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCustomizedCourse Load (0.5ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "ee8c739af01dafa714f7b596d6aa5734.key"], ["author_id", 2], ["original_filename", "答疑时间.key"], ["qa_file_type", "application/octet-stream"], ["qa_fileable_id", 7], ["qa_fileable_type", "CustomizedTutorial"], ["created_at", "2015-09-07 15:33:52.223207"], ["updated_at", "2015-09-07 15:33:52.223207"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"  [["name", "39d78a501620ba4a78b263e0e886d61a.pdf"], ["author_id", 2], ["original_filename", "兰超-简历-2015-7.pdf"], ["qa_file_type", "application/pdf"], ["qa_fileable_id", 7], ["qa_fileable_type", "CustomizedTutorial"], ["created_at", "2015-09-07 15:33:52.589512"], ["updated_at", "2015-09-07 15:33:52.589512"]]
  [1m[36m (9.0ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/customized_tutorials/7
Completed 302 Found in 1050ms (ActiveRecord: 14.9ms)


Started GET "/customized_tutorials/7" for 10.0.2.2 at 2015-09-07 15:33:53 +0000
Processing by CustomizedTutorialsController#show as HTML
  Parameters: {"id"=>"7"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit customized_tutorials:show
  [1m[36mCustomizedTutorial Load (0.5ms)[0m  [1mSELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1[0m  [["id", 7]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[35mCustomizedCourse Load (0.6ms)[0m  SELECT  "customized_courses".* FROM "customized_courses" WHERE "customized_courses"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 7], ["qa_fileable_type", "CustomizedTutorial"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.5ms)
  [1m[35mTopic Load (0.9ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 7]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 75]]
  [1m[35mCustomizedTutorial Load (0.8ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 75]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "customized_tutorials".* FROM "customized_tutorials" WHERE "customized_tutorials"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.2ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1437433658-lbE_pR64mMBxnfo7tt18rQ"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 7], ["videoable_type", "CustomizedTutorial"]]
  Rendered topics/_topic.html.erb (30.8ms)
  Rendered topics/_index.html.erb (62.0ms)
  Rendered customized_tutorials/show.html.erb within layouts/application (67.8ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 138ms (Views: 122.9ms | ActiveRecord: 7.4ms)


Started GET "/" for 10.0.2.2 at 2015-09-09 09:32:44 +0000
  [1m[36mActiveRecord::SchemaMigration Load (7.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomeController#index as HTML
  [1m[35mTeacher Load (5.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit home:index
Redirected to http://localhost:3000/teachers/2/questions
Completed 302 Found in 218ms (ActiveRecord: 19.1ms)


Started GET "/teachers/2/questions" for 10.0.2.2 at 2015-09-09 09:32:45 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"2"}
  [1m[36mTeacher Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers:questions
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mQuestion Load (6.0ms)[0m  [1mSELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0[0m  [["teacher_id", 2]]
  [1m[35mStudent Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mVipClass Load (2.3ms)[0m  [1mSELECT  "vip_classes".* FROM "vip_classes" WHERE "vip_classes"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.6ms)[0m  SELECT "users".id FROM "users" INNER JOIN "question_assignments" ON "users"."id" = "question_assignments"."teacher_id" WHERE "users"."role" = $1 AND "question_assignments"."question_id" = $2  [["role", "teacher"], ["question_id", 22]]
  [1m[36mAnswer Load (2.4ms)[0m  [1mSELECT "answers".* FROM "answers" WHERE "answers"."question_id" = $1[0m  [["question_id", 22]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "vip_classes".* FROM "vip_classes" WHERE "vip_classes"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  SELECT "users".id FROM "users" INNER JOIN "question_assignments" ON "users"."id" = "question_assignments"."teacher_id" WHERE "users"."role" = $1 AND "question_assignments"."question_id" = $2  [["role", "teacher"], ["question_id", 21]]
  [1m[36mAnswer Load (0.9ms)[0m  [1mSELECT "answers".* FROM "answers" WHERE "answers"."question_id" = $1[0m  [["question_id", 21]]
  Rendered questions/_question.html.erb (139.8ms)
  Rendered teachers/_task.html.erb (296.4ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (318.5ms)
  Rendered layouts/_top_bar.html.erb (3.0ms)
  Rendered layouts/_footer.html.erb (0.9ms)
Completed 200 OK in 2270ms (Views: 2134.5ms | ActiveRecord: 25.0ms)


Started GET "/" for 10.0.2.2 at 2015-09-09 09:32:47 +0000
Processing by HomeController#index as HTML
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit home:index
Redirected to http://localhost:3000/teachers/2/questions
Completed 302 Found in 9ms (ActiveRecord: 0.7ms)


Started GET "/teachers/2/questions" for 10.0.2.2 at 2015-09-09 09:32:47 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"2"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers:questions
  [1m[35mTeacher Load (1.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mQuestion Load (1.0ms)[0m  [1mSELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0[0m  [["teacher_id", 2]]
  [1m[35mStudent Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mVipClass Load (0.6ms)[0m  [1mSELECT  "vip_classes".* FROM "vip_classes" WHERE "vip_classes"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.6ms)[0m  SELECT "users".id FROM "users" INNER JOIN "question_assignments" ON "users"."id" = "question_assignments"."teacher_id" WHERE "users"."role" = $1 AND "question_assignments"."question_id" = $2  [["role", "teacher"], ["question_id", 22]]
  [1m[36mAnswer Load (0.5ms)[0m  [1mSELECT "answers".* FROM "answers" WHERE "answers"."question_id" = $1[0m  [["question_id", 22]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "student"], ["id", 75]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "vip_classes".* FROM "vip_classes" WHERE "vip_classes"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35m (0.8ms)[0m  SELECT "users".id FROM "users" INNER JOIN "question_assignments" ON "users"."id" = "question_assignments"."teacher_id" WHERE "users"."role" = $1 AND "question_assignments"."question_id" = $2  [["role", "teacher"], ["question_id", 21]]
  [1m[36mAnswer Load (0.5ms)[0m  [1mSELECT "answers".* FROM "answers" WHERE "answers"."question_id" = $1[0m  [["question_id", 21]]
  Rendered questions/_question.html.erb (21.7ms)
  Rendered teachers/_task.html.erb (27.4ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (29.0ms)
  Rendered layouts/_top_bar.html.erb (1.2ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 113ms (Views: 97.5ms | ActiveRecord: 7.2ms)


Started GET "/teachers/2/curriculums" for 10.0.2.2 at 2015-09-09 09:32:58 +0000
Processing by TeachersController#curriculums as HTML
  Parameters: {"id"=>"2"}
  [1m[35mTeacher Load (1.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers:curriculums
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mTeachingProgram Load (6.2ms)[0m  SELECT "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."category" = $1 AND "teaching_programs"."subject" = $2  ORDER BY "teaching_programs"."created_at" ASC  [["category", "高中"], ["subject", "物理"]]
  [1m[36mCurriculum Load (3.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 2], ["teaching_program_id", 1]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 2], ["teaching_program_id", 2]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 2], ["teaching_program_id", 3]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 2], ["teaching_program_id", 4]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 2], ["teaching_program_id", 5]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 2], ["teaching_program_id", 6]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 2], ["teaching_program_id", 7]]
  [1m[35mCurriculum Load (0.4ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 2], ["teaching_program_id", 55]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mSchool Load (1.7ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 3]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 4]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 5]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 6]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (1.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 7]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 55]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (141.2ms)
  Rendered teachers/curriculums.html.erb within layouts/teacher_home (164.5ms)
  Rendered layouts/_top_bar.html.erb (1.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 349ms (Views: 217.5ms | ActiveRecord: 92.0ms)


Started GET "/curriculums/1" for 10.0.2.2 at 2015-09-09 09:33:00 +0000
Processing by CurriculumsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit curriculums:show
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCourse Load (7.7ms)[0m  [1mSELECT "courses".* FROM "courses" WHERE "courses"."curriculum_id" IN (1)  ORDER BY position[0m
  [1m[35mLesson Load (3.0ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" IN (13, 19)  ORDER BY created_at
  [1m[36mVideo Load (5.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "rGpfMhTr0s6-L22GU2bimA"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 114], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "3H6qEZIlp98KyIxEHA56gw"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 115], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "wvjbiyVtfNFiTW44U1JxUA"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 116], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "gSrT95oBhZpt3jwN7vCHJg"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 152], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "BFIK8-XjY-_gWqjDthqeXQ"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 153], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "vRZ80KpafxuSb1vtN9GV6Q"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 154], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "vlHF_OAcNxG_afkwPr7jSQ"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 156], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "6SPFQGL_FWFWdoW77CPygQ"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 157], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "VpwDVmvMOFh9Dq2rDd1jIg"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 158], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "H6Nu6Dszxbq9qvYpCl8vXw"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 162], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "ca8xW4RkRThTqrbhLmqBzg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 163], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1436658317-HOMnAd_nBNyPiMPAcSm9Bw"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 168], ["videoable_type", "Lesson"]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered shared/subjects/_header.html.erb (1.7ms)
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mSchool Load (0.6ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCity Load (2.3ms)[0m  SELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered curriculums/_header.html.erb (59.6ms)
  Rendered curriculums/_search.html.erb (35.8ms)
  Rendered courses/_lesson_cell.html.erb (2.1ms)
  Rendered courses/_course_cell.html.erb (19.2ms)
  Rendered courses/_lesson_cell.html.erb (1.4ms)
  Rendered courses/_course_cell.html.erb (4.2ms)
  Rendered curriculums/show.html.erb within layouts/application (184.4ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 504ms (Views: 274.8ms | ActiveRecord: 50.6ms)


Started GET "/courses/19" for 10.0.2.2 at 2015-09-09 09:33:04 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"19"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 19]]
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1[0m  [["course_id", 19]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered lessons/_lesson_video.html.erb (1.5ms)
  [1m[35mQaFile Load (1.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 99], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.1ms)
  Rendered lessons/_lesson.html.erb (37.8ms)
  [1m[36mTopic Load (2.1ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 99]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (5.4ms)
  Rendered courses/_course_topics.html.erb (19.1ms)
  [1m[35mLesson Load (0.8ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 19]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "rGpfMhTr0s6-L22GU2bimA"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 114], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "3H6qEZIlp98KyIxEHA56gw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 115], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "wvjbiyVtfNFiTW44U1JxUA"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 116], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "vRZ80KpafxuSb1vtN9GV6Q"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 154], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "VpwDVmvMOFh9Dq2rDd1jIg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 158], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1436658317-HOMnAd_nBNyPiMPAcSm9Bw"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 168], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (46.4ms)
  Rendered courses/_course_layout.html.erb (161.1ms)
  Rendered lessons/show.html.erb within layouts/application (176.2ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 333ms (Views: 239.7ms | ActiveRecord: 20.1ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-09 09:33:07 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers/lessons:new
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 19]]
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered shared/_error_messages.html.erb (3.6ms)
  Rendered videos/_collapse_form.html.erb (52.0ms)
  Rendered videos/_form.html.erb (68.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (2.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (4.0ms)
  Rendered teachers/lessons/_form.html.erb (153.2ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (171.3ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 303ms (Views: 253.8ms | ActiveRecord: 19.8ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-09 09:33:16 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+u56Dfxm8nfNs98PIqhMq34YLcnunQwR4WDZAf1sn5ximFHhRDt1LSmhuIWZTmjOTkFTCsYAL91asEBRP9RlQQ==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003a44ba8 @tempfile=#<Tempfile:/tmp/RackMultipart20150909-2619-1aexim4.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441791187--aYWLwXGubGbHY4PUTQDbQ"}}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit videos:create
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "cbbbe75c677e535b4830364fa7cf1f9d.mp4"], ["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"], ["author_id", 2], ["created_at", "2015-09-09 09:33:18.352121"], ["updated_at", "2015-09-09 09:33:18.352121"]]
  [1m[35m (1.8ms)[0m  COMMIT
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE  [["id", 314]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3  [["state", "in_queue"], ["updated_at", "2015-09-09 09:33:20.768037"], ["id", 314]]
  [1m[36m (4.2ms)[0m  [1mCOMMIT[0m
  Rendered videos/_video.html.erb (1.3ms)
  Rendered videos/create.js.erb (21.4ms)
Completed 200 OK in 3928ms (Views: 186.2ms | ActiveRecord: 14.4ms)


Started POST "/teachers/courses/19/lessons" for 10.0.2.2 at 2015-09-09 09:33:52 +0000
Processing by Teachers::LessonsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+u56Dfxm8nfNs98PIqhMq34YLcnunQwR4WDZAf1sn5ximFHhRDt1LSmhuIWZTmjOTkFTCsYAL91asEBRP9RlQQ==", "lesson"=>{"name"=>"测试能否完成视频上传", "desc"=>"测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传", "token"=>"1441791187--aYWLwXGubGbHY4PUTQDbQ", "tags"=>["", "知识点讲解"]}, "edit"=>"确定", "course_id"=>"19"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers/lessons:create
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (3.9ms)[0m  INSERT INTO "lessons" ("name", "desc", "token", "tags", "teacher_id", "course_id", "curriculum_id", "state", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"  [["name", "测试能否完成视频上传"], ["desc", "测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传"], ["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"], ["tags", "[\"\",\"知识点讲解\"]"], ["teacher_id", 2], ["course_id", 19], ["curriculum_id", 1], ["state", "editing"], ["created_at", "2015-09-09 09:33:52.300342"], ["updated_at", "2015-09-09 09:33:52.300342"]]
  [1m[36mCourse Load (0.8ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mSQL (1.4ms)[0m  UPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "courses"."id" = $1  [["id", 19]]
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "curriculums"."id" = $1[0m  [["id", 1]]
  [1m[35mUser Load (2.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "videos" SET "videoable_type" = $1, "videoable_id" = $2, "updated_at" = $3 WHERE "videos"."id" = $4[0m  [["videoable_type", "Lesson"], ["videoable_id", 183], ["updated_at", "2015-09-09 09:33:52.325679"], ["id", 314]]
  [1m[35m (3.7ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/19?lesson_id=183
Completed 302 Found in 64ms (ActiveRecord: 18.4ms)


Started GET "/courses/19?lesson_id=183" for 10.0.2.2 at 2015-09-09 09:33:52 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"183", "id"=>"19"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit courses:show
  [1m[35mCourse Load (2.9ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 19]]
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 183]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.9ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.8ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered lessons/_lesson_video.html.erb (1.7ms)
  [1m[35mQaFile Load (1.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 183], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.0ms)
  Rendered lessons/_lesson.html.erb (9.8ms)
  [1m[36mTopic Load (0.7ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 183]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (2.5ms)
  Rendered courses/_course_topics.html.erb (3.9ms)
  [1m[35mLesson Load (1.5ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 19]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "rGpfMhTr0s6-L22GU2bimA"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 114], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "3H6qEZIlp98KyIxEHA56gw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 115], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "wvjbiyVtfNFiTW44U1JxUA"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 116], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "vRZ80KpafxuSb1vtN9GV6Q"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 154], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "VpwDVmvMOFh9Dq2rDd1jIg"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 158], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1436658317-HOMnAd_nBNyPiMPAcSm9Bw"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 168], ["videoable_type", "Lesson"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (47.6ms)
  Rendered courses/_course_layout.html.erb (73.0ms)
  Rendered lessons/show.html.erb within layouts/application (74.6ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 146ms (Views: 117.0ms | ActiveRecord: 18.2ms)


Started GET "/lessons/183" for 10.0.2.2 at 2015-09-09 09:33:55 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"183"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit lessons:show
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 183]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mCurriculum Load (0.9ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (1.2ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered lessons/_lesson_video.html.erb (0.9ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 183], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.0ms)
  Rendered lessons/_lesson.html.erb (7.9ms)
  [1m[36mTopic Load (0.6ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 183]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (5.0ms)
  Rendered courses/_course_topics.html.erb (6.3ms)
  [1m[35mLesson Load (0.8ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 19]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "rGpfMhTr0s6-L22GU2bimA"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 114], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "3H6qEZIlp98KyIxEHA56gw"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 115], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (1.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "wvjbiyVtfNFiTW44U1JxUA"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 116], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "vRZ80KpafxuSb1vtN9GV6Q"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 154], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "VpwDVmvMOFh9Dq2rDd1jIg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 158], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1436658317-HOMnAd_nBNyPiMPAcSm9Bw"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 168], ["videoable_type", "Lesson"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (62.3ms)
  Rendered courses/_course_layout.html.erb (88.8ms)
  Rendered lessons/show.html.erb within layouts/application (90.7ms)
  Rendered layouts/_top_bar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 171ms (Views: 140.6ms | ActiveRecord: 17.4ms)


Started GET "/teachers/courses/19/lessons/183/edit" for 10.0.2.2 at 2015-09-09 09:33:58 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"19", "id"=>"183"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers/lessons:edit
  [1m[35mLesson Load (0.8ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 183]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.7ms)
  Rendered videos/_collapse_form.html.erb (12.8ms)
  Rendered videos/_form.html.erb (14.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (1.4ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 183], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.8ms)
  Rendered teachers/lessons/_form.html.erb (53.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (57.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 159ms (Views: 137.6ms | ActiveRecord: 6.1ms)


Started PATCH "/teachers/courses/19/lessons/183" for 10.0.2.2 at 2015-09-09 09:34:25 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Lyizgrv4Eb3hfrfbuX5jibQr9RVs5faQB8ygcLo4mKO3XphuA6WW5wVs0FECmEfshHKL1kR41Vy8HDkgeIBifg==", "lesson"=>{"name"=>"测试能否完成视频上传", "desc"=>"测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传测试能否完成视频上传", "token"=>"1441791187--aYWLwXGubGbHY4PUTQDbQ", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"new_qa_files_1441791257741"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007fc780bac7d8 @tempfile=#<Tempfile:/tmp/RackMultipart20150909-2619-ey5nhf.html>, @original_filename="85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files_1441791257741][name]\"; filename=\"85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html\"\r\nContent-Type: text/html\r\n">}}}, "edit"=>"确定", "course_id"=>"19", "id"=>"183"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit teachers/lessons:update
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 183]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mSQL (3.3ms)[0m  [1mINSERT INTO "qa_files" ("name", "author_id", "original_filename", "qa_file_type", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["name", "4e1dd3b8f7eb3fb9a249ebc787fe0842.html"], ["author_id", 2], ["original_filename", "85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html"], ["qa_file_type", "text/html"], ["qa_fileable_id", 183], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-09 09:34:25.162744"], ["updated_at", "2015-09-09 09:34:25.162744"]]
  [1m[35m (11.5ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/19?lesson_id=183
Completed 302 Found in 183ms (ActiveRecord: 20.4ms)


Started GET "/courses/19?lesson_id=183" for 10.0.2.2 at 2015-09-09 09:34:25 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"183", "id"=>"19"}
  [1m[36mTeacher Load (1.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "e406c638368ceb159add2dc412e301bf7939b842"]]
张老师 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 19]]
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 183]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC  [["qa_fileable_id", 183], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (1.0ms)
  Rendered lessons/_lesson.html.erb (8.9ms)
  [1m[36mTopic Load (0.8ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 183]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.0ms)
  Rendered courses/_course_topics.html.erb (4.8ms)
  [1m[35mLesson Load (0.9ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 19]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[35mVideo Load (1.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "rGpfMhTr0s6-L22GU2bimA"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 114], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "3H6qEZIlp98KyIxEHA56gw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 115], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "wvjbiyVtfNFiTW44U1JxUA"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 116], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "vRZ80KpafxuSb1vtN9GV6Q"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 154], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "VpwDVmvMOFh9Dq2rDd1jIg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 158], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1436658317-HOMnAd_nBNyPiMPAcSm9Bw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 168], ["videoable_type", "Lesson"]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (50.2ms)
  Rendered courses/_course_layout.html.erb (74.9ms)
  Rendered lessons/show.html.erb within layouts/application (77.1ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 143ms (Views: 115.3ms | ActiveRecord: 16.5ms)
  [1m[36mActiveRecord::SchemaMigration Load (4.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateHomeworks (20150907223348)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (51.6ms)[0m  [1mCREATE TABLE "homeworks" ("id" serial primary key, "customized_course_id" integer, "teacher_id" integer, "title" character varying, "content" text, "token" character varying, "topics_count" integer DEFAULT 0, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (32.1ms)[0m  ALTER TABLE "customized_courses" ADD "homeworks_count" integer DEFAULT 0
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150907223348"]]
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'accounts'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'answers'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'cities'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'comments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.2ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'course_purchase_records'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'courses'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'curriculums'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'customized_course_assignments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.2ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'customized_courses'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'customized_tutorials'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'faq_topics'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'faqs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (6.2ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'homeworks'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'learning_plan_assignments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'learning_plans'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'lessons'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'messages'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'nodes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'pictures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.2ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'qa_faqs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.3ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'qa_files'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'question_assignments'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (5.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'questions'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'recharge_codes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'recharge_records'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'register_codes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.3ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'replies'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.1ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'review_records'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'schools'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'searches'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (2.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'teaching_programs'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'teaching_videos'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.1ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'topics'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.8ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (5.8ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'videos'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (4.2ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'vip_classes'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m


Started GET "/" for 10.0.2.2 at 2015-09-11 02:57:23 +0000
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomeController#index as HTML
  [1m[35mTeacher Load (19.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  Rendered home/index.html.erb within layouts/application_home (4.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  Rendered layouts/_top_bar.html.erb (12.1ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 5966ms (Views: 5840.2ms | ActiveRecord: 21.0ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-11 02:57:39 +0000
Processing by SessionsController#new as HTML
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  Rendered sessions/new.html.erb within layouts/application (81.2ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  Rendered layouts/_top_bar.html.erb (6.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 185ms (Views: 152.2ms | ActiveRecord: 4.7ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-11 02:58:31 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"V7gdP0JP7oBmiKzj4abPRJlyBmeWiRK8eGGZPem7/28JXMAEreXP8EY1n1jN7UgJ2GTFAggGPGVyJPyrJXF1GQ==", "user"=>{"email"=>"zhang@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mTeacher Load (2.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "zhang@163.com"]]
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"], ["updated_at", "2015-09-11 02:58:32.019113"], ["id", 2]]
  [1m[35m (1.9ms)[0m  COMMIT
  [1m[36mTeacher Load (2.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
Redirected to http://localhost:3000/teachers/2/questions
Completed 302 Found in 132ms (ActiveRecord: 9.3ms)


Started GET "/teachers/2/questions" for 10.0.2.2 at 2015-09-11 02:58:32 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"2"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers:questions
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mQuestion Load (15.8ms)[0m  SELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0  [["teacher_id", 2]]
  [1m[36mStudent Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mVipClass Load (3.3ms)[0m  SELECT  "vip_classes".* FROM "vip_classes" WHERE "vip_classes"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (1.6ms)[0m  [1mSELECT "users".id FROM "users" INNER JOIN "question_assignments" ON "users"."id" = "question_assignments"."teacher_id" WHERE "users"."role" = $1 AND "question_assignments"."question_id" = $2[0m  [["role", "teacher"], ["question_id", 22]]
  [1m[35mAnswer Load (31.0ms)[0m  SELECT "answers".* FROM "answers" WHERE "answers"."question_id" = $1  [["question_id", 22]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "student"], ["id", 75]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "vip_classes".* FROM "vip_classes" WHERE "vip_classes"."id" = $1 LIMIT 1  [["id", 2]]
  [1m[36m (0.9ms)[0m  [1mSELECT "users".id FROM "users" INNER JOIN "question_assignments" ON "users"."id" = "question_assignments"."teacher_id" WHERE "users"."role" = $1 AND "question_assignments"."question_id" = $2[0m  [["role", "teacher"], ["question_id", 21]]
  [1m[35mAnswer Load (0.6ms)[0m  SELECT "answers".* FROM "answers" WHERE "answers"."question_id" = $1  [["question_id", 21]]
  Rendered questions/_question.html.erb (160.9ms)
  Rendered teachers/_task.html.erb (213.2ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (216.0ms)
  Rendered layouts/_top_bar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 390ms (Views: 257.0ms | ActiveRecord: 64.2ms)


Started GET "/teachers/2/curriculums" for 10.0.2.2 at 2015-09-11 02:58:38 +0000
Processing by TeachersController#curriculums as HTML
  Parameters: {"id"=>"2"}
  [1m[36mTeacher Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers:curriculums
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mTeachingProgram Load (3.2ms)[0m  [1mSELECT "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."category" = $1 AND "teaching_programs"."subject" = $2  ORDER BY "teaching_programs"."created_at" ASC[0m  [["category", "高中"], ["subject", "物理"]]
  [1m[35mCurriculum Load (6.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 2], ["teaching_program_id", 1]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 2], ["teaching_program_id", 2]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 2], ["teaching_program_id", 3]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 2], ["teaching_program_id", 4]]
  [1m[35mCurriculum Load (1.0ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 2], ["teaching_program_id", 5]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 2], ["teaching_program_id", 6]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 2], ["teaching_program_id", 7]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 2], ["teaching_program_id", 55]]
  [1m[35mTeachingProgram Load (1.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mSchool Load (3.1ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.8ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 4]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 6]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.9ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 7]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (1.3ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 55]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (172.8ms)
  Rendered teachers/curriculums.html.erb within layouts/teacher_home (188.6ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 350ms (Views: 264.6ms | ActiveRecord: 37.1ms)


Started GET "/curriculums/1" for 10.0.2.2 at 2015-09-11 02:58:46 +0000
Processing by CurriculumsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mTeacher Load (1.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit curriculums:show
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mCourse Load (4.9ms)[0m  SELECT "courses".* FROM "courses" WHERE "courses"."curriculum_id" IN (1)  ORDER BY position
  [1m[36mLesson Load (5.4ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" IN (13, 19)  ORDER BY created_at[0m
  [1m[35mVideo Load (4.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "rGpfMhTr0s6-L22GU2bimA"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 114], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "3H6qEZIlp98KyIxEHA56gw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 115], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "wvjbiyVtfNFiTW44U1JxUA"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 116], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "gSrT95oBhZpt3jwN7vCHJg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 152], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.2ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "BFIK8-XjY-_gWqjDthqeXQ"]]
  [1m[36mVideo Load (2.3ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 153], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "vRZ80KpafxuSb1vtN9GV6Q"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 154], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "vlHF_OAcNxG_afkwPr7jSQ"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 156], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "6SPFQGL_FWFWdoW77CPygQ"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 157], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "VpwDVmvMOFh9Dq2rDd1jIg"]]
  [1m[36mVideo Load (1.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 158], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "H6Nu6Dszxbq9qvYpCl8vXw"]]
  [1m[36mVideo Load (2.3ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 162], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "ca8xW4RkRThTqrbhLmqBzg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 163], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1436658317-HOMnAd_nBNyPiMPAcSm9Bw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 168], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  [1m[35mTeachingProgram Load (0.9ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered shared/subjects/_header.html.erb (1.4ms)
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35mSchool Load (1.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCity Load (1.9ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_header.html.erb (58.8ms)
  Rendered curriculums/_search.html.erb (4.3ms)
  Rendered courses/_lesson_cell.html.erb (2.6ms)
  Rendered courses/_course_cell.html.erb (29.5ms)
  Rendered courses/_lesson_cell.html.erb (1.8ms)
  Rendered courses/_course_cell.html.erb (5.5ms)
  Rendered curriculums/show.html.erb within layouts/application (180.6ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 532ms (Views: 281.3ms | ActiveRecord: 56.2ms)


Started GET "/courses/19" for 10.0.2.2 at 2015-09-11 02:58:55 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"19"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit courses:show
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mLesson Load (0.8ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 19]]
  [1m[36mVideo Load (1.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered lessons/_lesson_video.html.erb (2.9ms)
  [1m[36mQaFile Load (10.2ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 99], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.0ms)
  Rendered lessons/_lesson.html.erb (31.6ms)
  [1m[35mTopic Load (3.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 99]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (10.2ms)
  Rendered courses/_course_topics.html.erb (13.5ms)
  [1m[36mLesson Load (1.0ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 19]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "rGpfMhTr0s6-L22GU2bimA"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 114], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "3H6qEZIlp98KyIxEHA56gw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 115], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "wvjbiyVtfNFiTW44U1JxUA"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 116], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "vRZ80KpafxuSb1vtN9GV6Q"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 154], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "VpwDVmvMOFh9Dq2rDd1jIg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 158], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1436658317-HOMnAd_nBNyPiMPAcSm9Bw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 168], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (66.0ms)
  Rendered courses/_course_layout.html.erb (127.1ms)
  Rendered lessons/show.html.erb within layouts/application (132.0ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 285ms (Views: 200.4ms | ActiveRecord: 34.3ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-11 02:59:01 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers/lessons:new
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1[0m  [["token", "1441940341-D03Hno-GRDJxVRMfaEpirA"]]
  [1m[35mVideo Load (1.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441940341-D03Hno-GRDJxVRMfaEpirA"]]
  [1m[36mCurriculum Load (1.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered shared/_error_messages.html.erb (0.9ms)
  Rendered videos/_collapse_form.html.erb (23.8ms)
  Rendered videos/_form.html.erb (28.9ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.0ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (5.0ms)
  Rendered teachers/lessons/_form.html.erb (74.8ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (78.2ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 201ms (Views: 158.6ms | ActiveRecord: 7.6ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-11 03:02:21 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers/lessons:new
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 19]]
  [1m[36mTeacher Load (1.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35m (1.1ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441940542-1Wi492RDgwBzRe2Du6DHAg"]]
  [1m[36mVideo Load (1.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441940542-1Wi492RDgwBzRe2Du6DHAg"]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (12.9ms)
  Rendered videos/_form.html.erb (17.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered teachers/lessons/_submit.html.erb (3.8ms)
  Rendered teachers/lessons/_form.html.erb (94.3ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (99.9ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 528ms (Views: 176.7ms | ActiveRecord: 30.2ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-11 03:03:38 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers/lessons:new
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1[0m  [["token", "1441940619-plVHHQcw8F89g5xNYvw5sA"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441940619-plVHHQcw8F89g5xNYvw5sA"]]
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (7.9ms)
  Rendered videos/_form.html.erb (10.3ms)
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (4.0ms)
  Rendered teachers/lessons/_form.html.erb (48.4ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (50.3ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 149ms (Views: 127.2ms | ActiveRecord: 4.7ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-11 03:08:32 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers/lessons:new
  [1m[35mCourse Load (0.7ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 19]]
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441940912-SJ1W5dBkHhXnOa6YHPPDtw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441940912-SJ1W5dBkHhXnOa6YHPPDtw"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.8ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (10.4ms)
  Rendered videos/_form.html.erb (12.5ms)
  Rendered shared/_error_messages.html.erb (0.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (2.0ms)
  Rendered teachers/lessons/_form.html.erb (47.8ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (49.6ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 149ms (Views: 127.8ms | ActiveRecord: 4.3ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-11 06:21:09 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers/lessons:new
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mTeacher Load (2.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1[0m  [["token", "1441952469-1EyAtCXRWGJM2rTIsDj4kA"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441952469-1EyAtCXRWGJM2rTIsDj4kA"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (7.5ms)
  Rendered videos/_form.html.erb (10.5ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.9ms)
  Rendered teachers/lessons/_submit.html.erb (2.2ms)
  Rendered teachers/lessons/_form.html.erb (37.7ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (39.7ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 143ms (Views: 117.9ms | ActiveRecord: 6.5ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-11 06:21:22 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[36mTeacher Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers/lessons:new
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 19]]
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441952482-GJYt510U-8HJMwFjtONDuA"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441952482-GJYt510U-8HJMwFjtONDuA"]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (7.8ms)
  Rendered videos/_form.html.erb (9.5ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (2.2ms)
  Rendered teachers/lessons/_form.html.erb (36.1ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (38.6ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 118ms (Views: 93.0ms | ActiveRecord: 5.3ms)


Started GET "/courses/19" for 10.0.2.2 at 2015-09-11 06:22:18 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"19"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 19]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered lessons/_lesson_video.html.erb (0.8ms)
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  ORDER BY "qa_files"."created_at" ASC[0m  [["qa_fileable_id", 99], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file.html.erb (0.0ms)
  Rendered lessons/_lesson.html.erb (10.9ms)
  [1m[35mTopic Load (0.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 99]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.9ms)
  Rendered courses/_course_topics.html.erb (7.2ms)
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 19]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "8l480XYMBvHNFLlXWWPRYw"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 99], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.3ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "rGpfMhTr0s6-L22GU2bimA"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 114], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "3H6qEZIlp98KyIxEHA56gw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 115], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "wvjbiyVtfNFiTW44U1JxUA"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 116], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "vRZ80KpafxuSb1vtN9GV6Q"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 154], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "VpwDVmvMOFh9Dq2rDd1jIg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 158], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1436658317-HOMnAd_nBNyPiMPAcSm9Bw"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 168], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441791187--aYWLwXGubGbHY4PUTQDbQ"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 183], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (50.5ms)
  Rendered courses/_course_layout.html.erb (83.7ms)
  Rendered lessons/show.html.erb within layouts/application (87.5ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 191ms (Views: 143.9ms | ActiveRecord: 17.1ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-11 06:22:24 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers/lessons:new
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 19]]
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 2]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1[0m  [["token", "1441952544-MUjXaAhaVNM_BoXZuK654Q"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441952544-MUjXaAhaVNM_BoXZuK654Q"]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered shared/_error_messages.html.erb (1.0ms)
  Rendered videos/_collapse_form.html.erb (7.5ms)
  Rendered videos/_form.html.erb (9.6ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (3.8ms)
  Rendered teachers/lessons/_form.html.erb (37.9ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (39.4ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 115ms (Views: 92.5ms | ActiveRecord: 4.8ms)


Started GET "/teachers/courses/19/lessons/new" for 10.0.2.2 at 2015-09-11 06:23:47 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"19"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "9c98e619dc9771a2636496d9da54a8cbb098b18b"]]
张老师 visit teachers/lessons:new
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 19]]
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 2]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441952627-g9leEg7JSZQGR82ECTh2sA"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441952627-g9leEg7JSZQGR82ECTh2sA"]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered shared/_error_messages.html.erb (0.3ms)
  Rendered videos/_collapse_form.html.erb (7.1ms)
  Rendered videos/_form.html.erb (8.9ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.5ms)
  Rendered teachers/lessons/_form.html.erb (52.3ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (54.1ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 143ms (Views: 120.5ms | ActiveRecord: 4.5ms)
