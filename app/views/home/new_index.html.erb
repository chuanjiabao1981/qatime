
<%= render 'layouts/banner_and_tags' %>

<!-- 今日直播 -->
<%= render partial: 'home/items/today_lives' %>

<!-- 精选内容 -->
<%= render partial: 'home/items/choiceness' %>

<!-- 近期开课 -->
<%= render partial: 'home/items/recent_courses' %>

<!-- 新课发布 -->
<%= render partial: 'home/items/newest_courses' %>

<!-- 教师推荐 -->
<%= render partial: 'home/items/teachers' %>

<!-- 服务项目 -->
<%= render partial: 'home/items/service' %>


<% content_for :javascript do %>
  <script type="text/javascript">

    $(function() {
      var index = 0;

      function autoscroll() {
        index++;
        changecolor(index);
        $(".banner-show").animate({
          left: "-" + 100 * index + "%"
        }, 1000, function() {
          if(index == 3) {
            index = 0;
            $(".banner-show").css("left", "0");
          }
        })
      }

      $('.banner-dot li').click(function() {
        index = $(this).index();
        $('.banner-show').css('left', "-" + 100 * index + "%");
        $("#content").stop().animate({
          left: "-" + 100 * index + "%"
        }, 1000)
        changecolor(index);
      })

      $(".banner-dot li").mouseover(function() {
        clearInterval(timerID);
      })
      $(".banner-dot li").mouseout(function() {
        timerID = setInterval(autoscroll, 5000);
      })

      function changecolor(index) {
        $(".banner-dot li").css("background-color", "white");
        if(index == 3) {
          $(".banner-dot li").eq(0).css("background-color", "rgb(255,153,102)");
        } else {
          $(".banner-dot li").eq(index).css("background-color", "rgb(255,153,102)");
        }
      }
      var timerID = setInterval(autoscroll, 5000);
      $(".banner-show").mouseover(function() {
        clearInterval(timerID);
      })
      $(".banner-show").mouseout(function() {
        timerID = setInterval(autoscroll, 5000);
      })

    })

    $(function  () {
      $('#myCarousel').carousel({
        interval: false
      });
      $(".btn-nexts").click(function() {
        $("#myCarousel").carousel('prev');
        console.log($("#myCarousel").carousel('prev'))
      });
      // 循环轮播到下一个项目
      $(".btn-previous").click(function() {
        $("#myCarousel").carousel('next');
      });
    })
  </script>
<% end %>