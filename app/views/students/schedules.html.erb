
<%
   @user = @student || @teacher
%>
<div class="qa_box">
  <div class="qa_big_cell">
    <div class="row">
      <div>
        <span>
          <%= t("view.student_bars.schedules") %>
        </span>
      </div>
      <div class="">
        <a href='#schedules_div' data-toggle="tab">
          <div class="schedules-list-ceil active" id="schedules_ceil">
            <%= t('schedules.tab.schedules') %>
          </div>
        </a>
        <a href='#wait_lesson' data-toggle="tab">
          <div class="schedules-list-ceil" id="wait_lesson_ceil">
            <%= t('schedules.tab.wait') %>
          </div>
        </a>
        <a href='#close_lessons' data-toggle="tab">
          <div class="schedules-list-ceil" id="close_lessons_ceil">
            <%= t('schedules.tab.close') %>
          </div>
        </a>
      </div>
      <div class="tab-content">
        <div id="schedules_div" class="tab-pane fade in active">
          <div id="calendar">
          </div>
        </div>
        <div id="wait_lesson" class="tab-pane fade">
          <% @wait_lessons.each do |lesson| %>
            <%= render partial: '/students/lesson', locals: {lesson: lesson} %>
          <% end %>
        </div>
        <div id="close_lessons" class="tab-pane fade">
          <% @close_lessons.each do |lesson| %>
            <%= render partial: '/students/lesson', locals: {lesson: lesson} %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<% content_for :javascript do -%>
<%= javascript_include_tag "calendar-lib" %>
<script type="text/javascript" charset="utf-8">
  var calendar = $("#calendar").calendar({
    tmpl_path: "/tmpls/",
    language: 'zh-CN',
    events_source: '/courses/schedule_sources?user_id=<%= @user.id %>'
  });

  $(function() {
    $('.schedules-list-ceil').click(function(event){
      $('.schedules-list-ceil').removeClass('active');
      $(this).addClass('active');
    });
  });
</script>
<% end -%>
