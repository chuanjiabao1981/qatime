

Started GET "/" for 10.0.2.2 at 2015-09-04 02:14:44 +0000
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by HomeController#index as HTML
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit home:index
Redirected to http://localhost:3000/teachers/82/questions
Completed 302 Found in 133ms (ActiveRecord: 5.2ms)


Started GET "/" for 10.0.2.2 at 2015-09-04 02:14:45 +0000
Processing by HomeController#index as HTML
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit home:index
Redirected to http://localhost:3000/teachers/82/questions
Completed 302 Found in 6ms (ActiveRecord: 0.8ms)


Started GET "/teachers/82/questions" for 10.0.2.2 at 2015-09-04 02:14:45 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"82"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers:questions
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mQuestion Load (0.8ms)[0m  SELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0  [["teacher_id", 82]]
  Rendered questions/_question.html.erb (0.0ms)
  Rendered teachers/_task.html.erb (74.8ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (82.2ms)
  Rendered layouts/_top_bar.html.erb (1.7ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 1154ms (Views: 1090.3ms | ActiveRecord: 6.4ms)


Started GET "/teachers/82/curriculums" for 10.0.2.2 at 2015-09-04 02:14:52 +0000
Processing by TeachersController#curriculums as HTML
  Parameters: {"id"=>"82"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers:curriculums
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."category" = $1 AND "teaching_programs"."subject" = $2  ORDER BY "teaching_programs"."created_at" ASC[0m  [["category", "高中"], ["subject", "化学"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 8]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 9]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 10]]
  [1m[36mCurriculum Load (0.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 11]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 12]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 13]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 14]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 15]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 82]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mSchool Load (0.5ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 9]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 10]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 11]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 12]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 13]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 14]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 15]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (1.0ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (127.9ms)
  Rendered teachers/curriculums.html.erb within layouts/teacher_home (131.9ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 231ms (Views: 173.4ms | ActiveRecord: 22.8ms)


Started GET "/curriculums/379" for 10.0.2.2 at 2015-09-04 02:14:57 +0000
Processing by CurriculumsController#show as HTML
  Parameters: {"id"=>"379"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit curriculums:show
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mCourse Load (1.0ms)[0m  SELECT "courses".* FROM "courses" WHERE "courses"."curriculum_id" IN (379)  ORDER BY position
  [1m[36mLesson Load (1.3ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" IN (84)  ORDER BY created_at[0m
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCity Load (0.6ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_header.html.erb (40.5ms)
  Rendered curriculums/_search.html.erb (14.9ms)
  Rendered courses/_lesson_cell.html.erb (1.1ms)
  Rendered courses/_course_cell.html.erb (6.1ms)
  Rendered curriculums/show.html.erb within layouts/application (83.8ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 230ms (Views: 129.6ms | ActiveRecord: 15.5ms)


Started GET "/lessons/170" for 10.0.2.2 at 2015-09-04 02:15:59 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"170"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit lessons:show
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.5ms)
  Rendered lessons/_lesson.html.erb (6.2ms)
  [1m[36mTopic Load (0.7ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.4ms)
  Rendered courses/_course_topics.html.erb (6.1ms)
  [1m[35mLesson Load (0.5ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (9.1ms)
  Rendered courses/_course_layout.html.erb (34.8ms)
  Rendered lessons/show.html.erb within layouts/application (37.8ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 125ms (Views: 92.4ms | ActiveRecord: 6.5ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:16:04 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (2.7ms)
  Rendered videos/_video.html.erb (1.2ms)
  Rendered videos/_collapse_form.html.erb (21.1ms)
  Rendered videos/_form.html.erb (24.1ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (1.6ms)
  Rendered teachers/lessons/_submit.html.erb (4.4ms)
  Rendered teachers/lessons/_form.html.erb (94.5ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (97.4ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 156ms (Views: 139.6ms | ActiveRecord: 7.3ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 02:16:20 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fUqSF2clv7zPhAfz1GU50X2SrJoFN3vpFAb5VltGPZQmEMKQZOfrjViLfF1C/vSX9cWT9y+jNgrAN1Pxcw/VaA==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"13"}, "1441332972264"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000005ffee48 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-kju8qm.doc>, @original_filename="个人信息处理同意书.doc", @content_type="application/msword", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][1441332972264][name]\"; filename=\"\xE4\xB8\xAA\xE4\xBA\xBA\xE4\xBF\xA1\xE6\x81\xAF\xE5\xA4\x84\xE7\x90\x86\xE5\x90\x8C\xE6\x84\x8F\xE4\xB9\xA6.doc\"\r\nContent-Type: application/msword\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 13[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (9.6ms)
  Rendered videos/_form.html.erb (11.4ms)
  Rendered shared/_error_messages.html.erb (1.1ms)
  [1m[35mQaFile Load (0.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (4.3ms)
  Rendered teachers/lessons/_form.html.erb (48.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (49.8ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 147ms (Views: 100.6ms | ActiveRecord: 6.5ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 02:24:59 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fUqSF2clv7zPhAfz1GU50X2SrJoFN3vpFAb5VltGPZQmEMKQZOfrjViLfF1C/vSX9cWT9y+jNgrAN1Pxcw/VaA==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"13"}, "1441332972264"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000005fe2400 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1e8i02k.doc>, @original_filename="个人信息处理同意书.doc", @content_type="application/msword", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][1441332972264][name]\"; filename=\"\xE4\xB8\xAA\xE4\xBA\xBA\xE4\xBF\xA1\xE6\x81\xAF\xE5\xA4\x84\xE7\x90\x86\xE5\x90\x8C\xE6\x84\x8F\xE4\xB9\xA6.doc\"\r\nContent-Type: application/msword\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.8ms)[0m  BEGIN
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 13[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.9ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[35mCACHE (0.1ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.0ms)
  Rendered videos/_collapse_form.html.erb (19.1ms)
  Rendered videos/_form.html.erb (21.4ms)
  Rendered shared/_error_messages.html.erb (0.7ms)
  [1m[35mQaFile Load (0.8ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
link_to_add_fields is called
  Rendered teachers/lessons/_qa_file_fields.html.erb (1.5ms)
  Rendered teachers/lessons/_submit.html.erb (2.2ms)
  Rendered teachers/lessons/_form.html.erb (112.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (114.9ms)
  Rendered layouts/_top_bar.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 453ms (Views: 186.4ms | ActiveRecord: 26.9ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-04 02:25:11 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1[0m  [["course_id", 84]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (1.0ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  Rendered lessons/_lesson.html.erb (3.3ms)
  [1m[35mTopic Load (0.5ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.1ms)
  Rendered courses/_course_topics.html.erb (5.3ms)
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (7.0ms)
  Rendered courses/_course_layout.html.erb (28.6ms)
  Rendered lessons/show.html.erb within layouts/application (30.8ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 112ms (Views: 78.7ms | ActiveRecord: 7.5ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:25:16 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (1.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (6.3ms)
  Rendered videos/_form.html.erb (7.1ms)
  Rendered shared/_error_messages.html.erb (0.2ms)
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
link_to_add_fields is called
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (3.0ms)
  Rendered teachers/lessons/_form.html.erb (36.5ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (38.9ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 93ms (Views: 78.1ms | ActiveRecord: 5.2ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 02:25:40 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"FjmL5dNA6/sOwgAn9e6M/IEGXkgwRa9mAYm79B78+LZNY9ti0IK/ypnNe4ljdUG6CVFhJRrR4oXVuBFTNrUQSg==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"13"}, "1441333534179"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x000000028f28a0 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1a2nonz.doc>, @original_filename="个人信息表201507(1).doc", @content_type="application/msword", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][1441333534179][name]\"; filename=\"\xE4\xB8\xAA\xE4\xBA\xBA\xE4\xBF\xA1\xE6\x81\xAF\xE8\xA1\xA8201507(1).doc\"\r\nContent-Type: application/msword\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 13  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (8.1ms)
  Rendered videos/_form.html.erb (9.4ms)
  Rendered shared/_error_messages.html.erb (0.7ms)
  [1m[36mQaFile Load (1.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
link_to_add_fields is called
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.4ms)
  Rendered teachers/lessons/_form.html.erb (39.1ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (55.7ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 146ms (Views: 101.8ms | ActiveRecord: 6.7ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-04 02:36:08 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.8ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1  [["course_id", 84]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.4ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.0ms)
  Rendered lessons/_lesson.html.erb (4.2ms)
  [1m[36mTopic Load (0.8ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.1ms)
  Rendered courses/_course_topics.html.erb (5.9ms)
  [1m[35mLesson Load (0.7ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (7.8ms)
  Rendered courses/_course_layout.html.erb (52.3ms)
  Rendered lessons/show.html.erb within layouts/application (54.5ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 634ms (Views: 441.1ms | ActiveRecord: 22.5ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:36:14 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.3ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.1ms)
  Rendered videos/_collapse_form.html.erb (11.5ms)
  Rendered videos/_form.html.erb (13.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_form.html.erb (52.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (55.2ms)
Completed 500 Internal Server Error in 80ms

ActionView::Template::Error (wrong number of arguments (3 for 5)):
    27:         <% end %>
    28:         </br>
    29: 
    30:         <%= link_to_add_fields "Add file", f, :qa_files %></br>
    31: 
    32:         <%= render partial:"submit" ,locals:{f: f}%>
    33: 
  app/helpers/application_helper.rb:31:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294359280260'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294359280260'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (32.3ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:37:32 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.8ms)
  Rendered videos/_collapse_form.html.erb (11.3ms)
  Rendered videos/_form.html.erb (13.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_form.html.erb (37.7ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (62.1ms)
Completed 500 Internal Server Error in 101ms

ActionView::Template::Error (wrong number of arguments (4 for 5)):
    27:         <% end %>
    28:         </br>
    29:         
    30:         <%= link_to_add_fields("Add file", f, :qa_files, :class => "btn btn-primary", :title => "Add a new file") %>
    31: 
    32:         <%= render partial:"submit" ,locals:{f: f}%>
    33: 
  app/helpers/application_helper.rb:31:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_49625620'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_49625620'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (30.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:37:35 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (7.0ms)
  Rendered videos/_form.html.erb (8.1ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_form.html.erb (27.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (28.9ms)
Completed 500 Internal Server Error in 44ms

ActionView::Template::Error (wrong number of arguments (4 for 5)):
    27:         <% end %>
    28:         </br>
    29:         
    30:         <%= link_to_add_fields("Add file", f, :qa_files, :class => "btn btn-primary", :title => "Add a new file") %>
    31: 
    32:         <%= render partial:"submit" ,locals:{f: f}%>
    33: 
  app/helpers/application_helper.rb:31:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_49625620'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_49625620'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (31.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:38:45 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (8.7ms)
  Rendered videos/_form.html.erb (10.2ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_form.html.erb (34.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (59.4ms)
Completed 500 Internal Server Error in 99ms

ActionView::Template::Error (wrong number of arguments (4 for 5)):
    27:         <% end %>
    28:         </br>
    29: 
    30:         <%= link_to_add_fields "Add file", f, :qa_files, :class => "btn btn-primary", :title => "Add a new file" %>
    31: 
    32:         <%= render partial:"submit" ,locals:{f: f}%>
    33: 
  app/helpers/application_helper.rb:31:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358652240'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358652240'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (14.9ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:41:21 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (23.4ms)
  Rendered videos/_form.html.erb (25.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (1.0ms)
  Rendered teachers/lessons/_submit.html.erb (2.6ms)
  Rendered teachers/lessons/_form.html.erb (100.6ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (122.9ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 205ms (Views: 190.4ms | ActiveRecord: 4.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:41:48 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  Rendered teachers/lessons/edit.html.erb within layouts/application (2.3ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (Missing partial teachers/lessons/_form, application/_form with {:locale=>[:cn], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee, :slim]}. Searched in:
  * "/vagrant/qatime/app/views"
):
    1: <%= render partial:'form' ,locals:{post_url: lesson_path(@lesson)}%>
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (36.3ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:41:52 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (8.6ms)
  Rendered videos/_form.html.erb (9.8ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.8ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.6ms)
  Rendered teachers/lessons/_form.html.erb (73.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (98.4ms)
  Rendered layouts/_top_bar.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 177ms (Views: 162.8ms | ActiveRecord: 4.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:43:20 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (1.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
====================

  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
====================
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
Redirected to http://localhost:3000/signin
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 22ms (ActiveRecord: 4.5ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-04 02:43:20 +0000
Processing by SessionsController#new as HTML
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  Rendered sessions/new.html.erb within layouts/application (11.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  Rendered layouts/_top_bar.html.erb (5.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 107ms (Views: 98.2ms | ActiveRecord: 0.9ms)


Started POST "/sessions" for 10.0.2.2 at 2015-09-04 02:43:43 +0000
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gOfYPhB4i9RbhohOJtTS00iLc7I5kbMdAlZADCbdDcwQAf4jzXkMNfCbn5phLZfLWhm/kgPkFtFJxnTt1ryGmA==", "user"=>{"email"=>"zhangjdwonderful@163.com", "password"=>"[FILTERED]"}, "commit"=>"登录"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "ed32942f4f0f95b6c7f7279f98018911d35ff288"]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."email" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["email", "zhangjdwonderful@163.com"]]
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36mSQL (1.5ms)[0m  [1mUPDATE "users" SET "remember_token" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"], ["updated_at", "2015-09-04 02:43:43.485144"], ["id", 82]]
  [1m[35m (10.4ms)[0m  COMMIT
  [1m[36mTeacher Load (4.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
Redirected to http://localhost:3000/teachers/82/questions
Completed 302 Found in 136ms (ActiveRecord: 18.2ms)


Started GET "/teachers/82/questions" for 10.0.2.2 at 2015-09-04 02:43:43 +0000
Processing by TeachersController#questions as HTML
  Parameters: {"id"=>"82"}
  [1m[35mTeacher Load (1.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers:questions
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mQuestion Load (0.7ms)[0m  SELECT  "questions".* FROM "questions" INNER JOIN "question_assignments" ON "questions"."id" = "question_assignments"."question_id" WHERE "question_assignments"."teacher_id" = $1  ORDER BY created_at desc LIMIT 10 OFFSET 0  [["teacher_id", 82]]
  Rendered questions/_question.html.erb (0.0ms)
  Rendered teachers/_task.html.erb (19.1ms)
  Rendered teachers/questions.html.erb within layouts/teacher_home (21.2ms)
  Rendered layouts/_top_bar.html.erb (1.9ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 140ms (Views: 74.7ms | ActiveRecord: 7.1ms)


Started GET "/teachers/82/curriculums" for 10.0.2.2 at 2015-09-04 02:43:52 +0000
Processing by TeachersController#curriculums as HTML
  Parameters: {"id"=>"82"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers:curriculums
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."category" = $1 AND "teaching_programs"."subject" = $2  ORDER BY "teaching_programs"."created_at" ASC[0m  [["category", "高中"], ["subject", "化学"]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 8]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 9]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 10]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 11]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 12]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 13]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 14]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1[0m  [["teacher_id", 82], ["teaching_program_id", 15]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."teacher_id" = $1 AND "curriculums"."teaching_program_id" = $2 LIMIT 1  [["teacher_id", 82], ["teaching_program_id", 82]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mSchool Load (0.6ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 9]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 10]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 11]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 12]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.9ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 13]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 14]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 15]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_curriculum.html.erb (73.2ms)
  Rendered teachers/curriculums.html.erb within layouts/teacher_home (76.2ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 145ms (Views: 107.4ms | ActiveRecord: 17.1ms)


Started GET "/curriculums/379" for 10.0.2.2 at 2015-09-04 02:43:57 +0000
Processing by CurriculumsController#show as HTML
  Parameters: {"id"=>"379"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit curriculums:show
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT "courses".* FROM "courses" WHERE "courses"."curriculum_id" IN (379)  ORDER BY position
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" IN (84)  ORDER BY created_at[0m
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/subjects/_header.html.erb (0.1ms)
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mSchool Load (0.6ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCity Load (0.6ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_header.html.erb (28.5ms)
  Rendered curriculums/_search.html.erb (1.0ms)
  Rendered courses/_lesson_cell.html.erb (0.4ms)
  Rendered courses/_course_cell.html.erb (4.3ms)
  Rendered curriculums/show.html.erb within layouts/application (46.3ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 130ms (Views: 102.6ms | ActiveRecord: 8.2ms)


Started GET "/lessons/170" for 10.0.2.2 at 2015-09-04 02:44:02 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit lessons:show
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  Rendered lessons/_lesson.html.erb (3.1ms)
  [1m[36mTopic Load (0.6ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.0ms)
  Rendered courses/_course_topics.html.erb (7.5ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (7.2ms)
  Rendered courses/_course_layout.html.erb (28.3ms)
  Rendered lessons/show.html.erb within layouts/application (31.3ms)
  Rendered layouts/_top_bar.html.erb (1.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 95ms (Views: 79.8ms | ActiveRecord: 5.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:44:12 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (11.4ms)
  Rendered videos/_form.html.erb (13.2ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.7ms)
  Rendered teachers/lessons/_form.html.erb (44.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (47.1ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 111ms (Views: 96.5ms | ActiveRecord: 4.5ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:45:38 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (1.0ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.8ms)
  Rendered videos/_collapse_form.html.erb (13.7ms)
  Rendered videos/_form.html.erb (16.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (3.9ms)
  Rendered teachers/lessons/_form.html.erb (47.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (49.3ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 471ms (Views: 455.2ms | ActiveRecord: 4.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:48:00 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.8ms)
  Rendered videos/_collapse_form.html.erb (15.0ms)
  Rendered videos/_form.html.erb (17.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_form.html.erb (104.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (106.8ms)
Completed 500 Internal Server Error in 381ms

ActionView::Template::Error (wrong number of arguments (1 for 0)):
    27:         <% end %>
    28:         </br>
    29: 
    30:         <%= link_to_add_fields "Add a file", f, :qa_files, "btn btn-primary", "Add a new file" %>
    31:         </br>
    32: 
    33:         <%= render partial:"submit" ,locals:{f: f}%>
  app/helpers/application_helper.rb:37:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_47777500'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_47777500'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (43.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:48:16 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (1.4ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (1.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (29.0ms)
  Rendered videos/_form.html.erb (29.9ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
{"name"=>{"url"=>nil}, "id"=>nil, "author_id"=>nil, "qa_fileable_id"=>nil, "qa_fileable_type"=>nil, "created_at"=>nil, "updated_at"=>nil, "original_filename"=>nil}
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (105.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (107.2ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 460ms (Views: 162.2ms | ActiveRecord: 24.0ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 02:48:56 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"kNeGg3MG1KP0pRfCH/2DTw73Lbaz/dIBF8Gl0rhBkLEAMaCergdTQl+4ABZYBMZXHGXhlomId81cUZEzSCAb5Q==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"13"}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (1.1ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (2.2ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 13[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36m (0.4ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 35ms (ActiveRecord: 7.5ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 02:48:56 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.9ms)
  Rendered lessons/_lesson.html.erb (3.7ms)
  [1m[36mTopic Load (2.4ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (6.1ms)
  Rendered courses/_course_topics.html.erb (9.3ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (14.2ms)
  Rendered courses/_course_layout.html.erb (40.0ms)
  Rendered lessons/show.html.erb within layouts/application (44.0ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 142ms (Views: 104.7ms | ActiveRecord: 8.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:49:16 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (1.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (12.8ms)
  Rendered videos/_form.html.erb (14.5ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
{"name"=>{"url"=>nil}, "id"=>nil, "author_id"=>nil, "qa_fileable_id"=>nil, "qa_fileable_type"=>nil, "created_at"=>nil, "updated_at"=>nil, "original_filename"=>nil}
  Rendered teachers/lessons/_submit.html.erb (3.5ms)
  Rendered teachers/lessons/_form.html.erb (49.7ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (52.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 113ms (Views: 97.4ms | ActiveRecord: 5.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 02:50:58 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.6ms)
  Rendered videos/_collapse_form.html.erb (9.8ms)
  Rendered videos/_form.html.erb (11.9ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
{"name"=>{"url"=>nil}, "id"=>nil, "author_id"=>nil, "qa_fileable_id"=>nil, "qa_fileable_type"=>nil, "created_at"=>nil, "updated_at"=>nil, "original_filename"=>nil}
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (40.1ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (42.2ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 426ms (Views: 411.8ms | ActiveRecord: 4.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:01:45 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (9.8ms)
  Rendered videos/_form.html.erb (11.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.8ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
{"name"=>{"url"=>nil}, "id"=>nil, "author_id"=>nil, "qa_fileable_id"=>nil, "qa_fileable_type"=>nil, "created_at"=>nil, "updated_at"=>nil, "original_filename"=>nil}
  Rendered teachers/lessons/_submit.html.erb (2.3ms)
  Rendered teachers/lessons/_form.html.erb (59.3ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (62.1ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 549ms (Views: 534.9ms | ActiveRecord: 4.7ms)


Started GET "/javascripts/defaults.js" for 10.0.2.2 at 2015-09-04 03:01:49 +0000

ActionController::RoutingError (No route matches [GET] "/javascripts/defaults.js"):
  actionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.0) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.0) lib/rails/engine.rb:518:in `call'
  railties (4.2.0) lib/rails/application.rb:164:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  rack (1.6.0) lib/rack/content_length.rb:15:in `call'
  rack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (24.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (5.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (3.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (292.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:07:08 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (1.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.3ms)
  Rendered videos/_video.html.erb (0.6ms)
  Rendered videos/_collapse_form.html.erb (15.7ms)
  Rendered videos/_form.html.erb (17.6ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (3.9ms)
  Rendered teachers/lessons/_form.html.erb (140.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (164.5ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 532ms (Views: 259.5ms | ActiveRecord: 26.1ms)


Started GET "/javascripts/defaults.js" for 10.0.2.2 at 2015-09-04 03:07:13 +0000

ActionController::RoutingError (No route matches [GET] "/javascripts/defaults.js"):
  actionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.0) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.0) lib/rails/engine.rb:518:in `call'
  railties (4.2.0) lib/rails/application.rb:164:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  rack (1.6.0) lib/rack/content_length.rb:15:in `call'
  rack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (47.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.5ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (4.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (254.3ms)


Started GET "/teachers/courses/84/lessons/170/add_fields(this,%20%22qa_files%22,%20%22%20%20%20%20%3Cinput%20type=%5C%22file%5C%22%20name=%5C%22lesson%5Bqa_files_attributes%5D%5Bnew_qa_files%5D%5Bname%5D%5C%22%20id=%5C%22lesson_qa_files_attributes_new_qa_files_name%5C%22%20/%3E%5Cn%22)" for 10.0.2.2 at 2015-09-04 03:07:24 +0000

ActionController::RoutingError (No route matches [GET] "/teachers/courses/84/lessons/170/add_fields(this,%20%22qa_files%22,%20%22%20%20%20%20%3Cinput%20type=%5C%22file%5C%22%20name=%5C%22lesson%5Bqa_files_attributes%5D%5Bnew_qa_files%5D%5Bname%5D%5C%22%20id=%5C%22lesson_qa_files_attributes_new_qa_files_name%5C%22%20/%3E%5Cn%22)"):
  actionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.0) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.0) lib/rails/engine.rb:518:in `call'
  railties (4.2.0) lib/rails/application.rb:164:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  rack (1.6.0) lib/rack/content_length.rb:15:in `call'
  rack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.5ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (18.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (2.5ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (166.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:08:01 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (1.0ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (7.3ms)
  Rendered videos/_form.html.erb (8.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.5ms)
  Rendered teachers/lessons/_form.html.erb (33.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (35.7ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 127ms (Views: 111.9ms | ActiveRecord: 4.8ms)


Started GET "/javascripts/defaults.js" for 10.0.2.2 at 2015-09-04 03:08:04 +0000

ActionController::RoutingError (No route matches [GET] "/javascripts/defaults.js"):
  actionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.0) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.0) lib/rails/engine.rb:518:in `call'
  railties (4.2.0) lib/rails/application.rb:164:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  rack (1.6.0) lib/rack/content_length.rb:15:in `call'
  rack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (28.9ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (190.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:08:06 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.3ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (8.9ms)
  Rendered videos/_form.html.erb (9.8ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.0ms)
  Rendered teachers/lessons/_form.html.erb (34.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (36.1ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 117ms (Views: 103.1ms | ActiveRecord: 4.3ms)


Started GET "/javascripts/defaults.js" for 10.0.2.2 at 2015-09-04 03:08:11 +0000

ActionController::RoutingError (No route matches [GET] "/javascripts/defaults.js"):
  actionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.0) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.0) lib/rails/engine.rb:518:in `call'
  railties (4.2.0) lib/rails/application.rb:164:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  rack (1.6.0) lib/rack/content_length.rb:15:in `call'
  rack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (26.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (3.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (230.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:09:01 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.8ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.6ms)
  Rendered videos/_collapse_form.html.erb (10.0ms)
  Rendered videos/_form.html.erb (11.9ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (2.5ms)
  Rendered teachers/lessons/_form.html.erb (40.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (42.5ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 176ms (Views: 161.0ms | ActiveRecord: 4.4ms)


Started GET "/teachers/courses/84/lessons/170/add_fields(this,%20%22qa_files%22,%20%22%20%20%20%20%3Cinput%20type=%5C%22file%5C%22%20name=%5C%22lesson%5Bqa_files_attributes%5D%5Bnew_qa_files%5D%5Bname%5D%5C%22%20id=%5C%22lesson_qa_files_attributes_new_qa_files_name%5C%22%20/%3E%5Cn%22)" for 10.0.2.2 at 2015-09-04 03:09:11 +0000

ActionController::RoutingError (No route matches [GET] "/teachers/courses/84/lessons/170/add_fields(this,%20%22qa_files%22,%20%22%20%20%20%20%3Cinput%20type=%5C%22file%5C%22%20name=%5C%22lesson%5Bqa_files_attributes%5D%5Bnew_qa_files%5D%5Bname%5D%5C%22%20id=%5C%22lesson_qa_files_attributes_new_qa_files_name%5C%22%20/%3E%5Cn%22)"):
  actionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.0) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.0) lib/rails/engine.rb:518:in `call'
  railties (4.2.0) lib/rails/application.rb:164:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  rack (1.6.0) lib/rack/content_length.rb:15:in `call'
  rack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (1.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (18.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (168.3ms)


Started GET "/teachers/courses/84/lessons/170/add_fields(this,%20%22qa_files%22,%20%22%20%20%20%20%3Cinput%20type=%5C%22file%5C%22%20name=%5C%22lesson%5Bqa_files_attributes%5D%5Bnew_qa_files%5D%5Bname%5D%5C%22%20id=%5C%22lesson_qa_files_attributes_new_qa_files_name%5C%22%20/%3E%5Cn%22)" for 10.0.2.2 at 2015-09-04 03:11:16 +0000

ActionController::RoutingError (No route matches [GET] "/teachers/courses/84/lessons/170/add_fields(this,%20%22qa_files%22,%20%22%20%20%20%20%3Cinput%20type=%5C%22file%5C%22%20name=%5C%22lesson%5Bqa_files_attributes%5D%5Bnew_qa_files%5D%5Bname%5D%5C%22%20id=%5C%22lesson_qa_files_attributes_new_qa_files_name%5C%22%20/%3E%5Cn%22)"):
  actionpack (4.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.0) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.0) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.0) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.0) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.0) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.0) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.0) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.0) lib/rails/engine.rb:518:in `call'
  railties (4.2.0) lib/rails/application.rb:164:in `call'
  rack (1.6.0) lib/rack/lock.rb:17:in `call'
  rack (1.6.0) lib/rack/content_length.rb:15:in `call'
  rack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:138:in `service'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/httpserver.rb:94:in `run'
  /home/vagrant/.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/webrick/server.rb:294:in `block in start_thread'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_route.html.erb (21.5ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/routes/_table.html.erb (1.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.html.erb within rescues/layout (206.1ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:13:17 +0000

SyntaxError (/vagrant/qatime/app/helpers/application_helper.rb:36: syntax error, unexpected ',', expecting ')'
    link_to_function (name, h("add_fields(this, \"#{asso...
                           ^
/vagrant/qatime/app/helpers/application_helper.rb:36: syntax error, unexpected ')', expecting keyword_end):
  app/helpers/application_helper.rb:36: syntax error, unexpected ',', expecting ')'
  app/helpers/application_helper.rb:36: syntax error, unexpected ')', expecting keyword_end
  app/controllers/application_controller.rb:1:in `<top (required)>'
  app/controllers/teachers/lessons_controller.rb:1:in `<top (required)>'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (26.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:19:29 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
====================

  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
====================
  [1m[35mCACHE (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
Redirected to http://localhost:3000/signin
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 185ms (ActiveRecord: 14.1ms)


Started GET "/signin" for 10.0.2.2 at 2015-09-04 03:19:30 +0000
Processing by SessionsController#new as HTML
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  Rendered sessions/new.html.erb within layouts/application (9.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "4bbe624f095322f12509cef68aeccd4d67d1a8a8"]]
  Rendered layouts/_top_bar.html.erb (4.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 494ms (Views: 467.2ms | ActiveRecord: 1.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:19:36 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (1.2ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (1.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.1ms)
  Rendered videos/_collapse_form.html.erb (13.5ms)
  Rendered videos/_form.html.erb (15.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_form.html.erb (107.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (109.9ms)
Completed 500 Internal Server Error in 153ms

ActionView::Template::Error (undefined local variable or method `id' for #<#<Class:0x000000060cc780>:0x000000060bd320>):
    27:         <% end %>
    28:         </br>
    29: 
    30:         <%= link_to_add_fields "Add a file", f, :qa_files %>
    31:         </br>
    32: 
    33:         <%= render partial:"submit" ,locals:{f: f}%>
  app/helpers/application_helper.rb:36:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294360613920'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294360613920'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.5ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (31.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:19:39 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.3ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (9.3ms)
  Rendered videos/_form.html.erb (10.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.4ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_form.html.erb (58.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (59.7ms)
Completed 500 Internal Server Error in 76ms

ActionView::Template::Error (undefined local variable or method `id' for #<#<Class:0x000000060cc780>:0x00000005a46e88>):
    27:         <% end %>
    28:         </br>
    29: 
    30:         <%= link_to_add_fields "Add a file", f, :qa_files %>
    31:         </br>
    32: 
    33:         <%= render partial:"submit" ,locals:{f: f}%>
  app/helpers/application_helper.rb:36:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294360613920'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294360613920'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (32.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:19:41 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.3ms)
  Rendered videos/_collapse_form.html.erb (7.6ms)
  Rendered videos/_form.html.erb (10.2ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.8ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_form.html.erb (58.1ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (59.6ms)
Completed 500 Internal Server Error in 78ms

ActionView::Template::Error (undefined local variable or method `id' for #<#<Class:0x000000060cc780>:0x00000003ec6668>):
    27:         <% end %>
    28:         </br>
    29: 
    30:         <%= link_to_add_fields "Add a file", f, :qa_files %>
    31:         </br>
    32: 
    33:         <%= render partial:"submit" ,locals:{f: f}%>
  app/helpers/application_helper.rb:36:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294360613920'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294360613920'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (31.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:21:14 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (10.5ms)
  Rendered videos/_form.html.erb (12.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_form.html.erb (61.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (65.1ms)
Completed 500 Internal Server Error in 85ms

ActionView::Template::Error (undefined local variable or method `id' for #<#<Class:0x000000060cc780>:0x007fdd5cd7cfd0>):
    27:         <% end %>
    28:         </br>
    29: 
    30:         <%= link_to_add_fields "Add a file", f, :qa_files %>
    31:         </br>
    32: 
    33:         <%= render partial:"submit" ,locals:{f: f}%>
  app/helpers/application_helper.rb:36:in `link_to_add_fields'
  app/views/teachers/lessons/_form.html.erb:30:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294360613920'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294360613920'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (33.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:23:00 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (12.8ms)
  Rendered videos/_form.html.erb (15.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.4ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.7ms)
  Rendered teachers/lessons/_form.html.erb (86.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (89.0ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 717ms (Views: 468.8ms | ActiveRecord: 21.3ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 03:23:19 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"yzIsyK5F7gdgGu/4KFTawy9+FqYvCQT+eDWl3dFLXHJb1ArVc0Rp5ssH+CxvrZ/bPezahhV8oTIzpZE8ISrXJg==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"13"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x000000028a83b8 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1rov172.jpg>, @original_filename="1.pic.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"1.pic.jpg\"\r\nContent-Type: image/jpeg\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 13  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (7.0ms)
  Rendered videos/_form.html.erb (8.1ms)
  Rendered shared/_error_messages.html.erb (0.8ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.4ms)
  Rendered teachers/lessons/_form.html.erb (47.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (48.1ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 132ms (Views: 85.2ms | ActiveRecord: 6.0ms)


Started GET "/curriculums/379" for 10.0.2.2 at 2015-09-04 03:24:12 +0000
Processing by CurriculumsController#show as HTML
  Parameters: {"id"=>"379"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit curriculums:show
  [1m[36mCurriculum Load (1.2ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mCourse Load (0.7ms)[0m  SELECT "courses".* FROM "courses" WHERE "courses"."curriculum_id" IN (379)  ORDER BY position
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" IN (84)  ORDER BY created_at[0m
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/subjects/_header.html.erb (0.2ms)
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
  [1m[35mSchool Load (0.5ms)[0m  SELECT  "schools".* FROM "schools" WHERE "schools"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36mCity Load (0.7ms)[0m  [1mSELECT  "cities".* FROM "cities" WHERE "cities"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered curriculums/_header.html.erb (52.7ms)
  Rendered curriculums/_search.html.erb (1.3ms)
  Rendered courses/_lesson_cell.html.erb (0.4ms)
  Rendered courses/_course_cell.html.erb (4.9ms)
  Rendered curriculums/show.html.erb within layouts/application (74.1ms)
  Rendered layouts/_top_bar.html.erb (2.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 162ms (Views: 133.4ms | ActiveRecord: 10.9ms)


Started GET "/lessons/170" for 10.0.2.2 at 2015-09-04 03:24:24 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit lessons:show
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (1.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.8ms)
  Rendered lessons/_lesson.html.erb (6.0ms)
  [1m[36mTopic Load (0.7ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.6ms)
  Rendered courses/_course_topics.html.erb (5.9ms)
  [1m[35mLesson Load (1.5ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (8.8ms)
  Rendered courses/_course_layout.html.erb (34.5ms)
  Rendered lessons/show.html.erb within layouts/application (40.8ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 121ms (Views: 86.9ms | ActiveRecord: 7.6ms)


Started GET "/teachers/courses/84/lessons/new" for 10.0.2.2 at 2015-09-04 03:24:29 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"84"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:new
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
WARNING: Can't mass-assign protected attributes for Lesson: teacher_id
	app/models/course.rb:47:in `build_lesson'
	app/controllers/teachers/lessons_controller.rb:6:in `new'
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (8.0ms)
  Rendered videos/_form.html.erb (10.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.6ms)
  Rendered teachers/lessons/_form.html.erb (37.3ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (40.5ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 133ms (Views: 102.3ms | ActiveRecord: 4.5ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-04 03:24:48 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9XbWBdldiqRefeLKttQytdfoDPI2SHoVEe0S7m/sf+FlkPAYBFwNRfVg9R7xLXetxXrA0gw939lafSYPn430tQ==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003a44770 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1g9ej9m.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441337069-YGde5_0S7Y_l_1VMsU7kzQ"}}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit videos:create
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "29a5a93fef31b18141e424858f0bc366.mp4"], ["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"], ["author_id", 82], ["created_at", "2015-09-04 03:24:50.024932"], ["updated_at", "2015-09-04 03:24:50.024932"]]
  [1m[35m (0.8ms)[0m  COMMIT
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE  [["id", 298]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3  [["state", "in_queue"], ["updated_at", "2015-09-04 03:24:59.911057"], ["id", 298]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  Rendered videos/_video.html.erb (3.7ms)
  Rendered videos/create.js.erb (9.0ms)
Completed 200 OK in 11489ms (Views: 281.1ms | ActiveRecord: 7.5ms)


Started POST "/teachers/courses/84/lessons" for 10.0.2.2 at 2015-09-04 03:25:48 +0000
Processing by Teachers::LessonsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9XbWBdldiqRefeLKttQytdfoDPI2SHoVEe0S7m/sf+FlkPAYBFwNRfVg9R7xLXetxXrA0gw939lafSYPn430tQ==", "lesson"=>{"name"=>"测试，第二课", "desc"=>"测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，", "token"=>"1441337069-YGde5_0S7Y_l_1VMsU7kzQ", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000005c3a2d0 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-g3couo.jpg>, @original_filename="1.pic.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"1.pic.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000005c3a168 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-lnuigb.png>, @original_filename="86d8d3348f8d004f9cb4f04b72ed0b39.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"86d8d3348f8d004f9cb4f04b72ed0b39.png\"\r\nContent-Type: image/png\r\n">}}}, "edit"=>"确定", "course_id"=>"84"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:create
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
WARNING: Can't mass-assign protected attributes for Lesson: teacher_id
	app/models/course.rb:47:in `build_lesson'
	app/controllers/teachers/lessons_controller.rb:15:in `create'
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mCurriculum Load (0.4ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (10.9ms)
  Rendered videos/_form.html.erb (12.7ms)
  Rendered shared/_error_messages.html.erb (0.6ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.6ms)
  Rendered teachers/lessons/_submit.html.erb (1.8ms)
  Rendered teachers/lessons/_form.html.erb (39.2ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (41.3ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 149ms (Views: 96.9ms | ActiveRecord: 4.3ms)


Started POST "/teachers/courses/84/lessons" for 10.0.2.2 at 2015-09-04 03:28:43 +0000
Processing by Teachers::LessonsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"9XbWBdldiqRefeLKttQytdfoDPI2SHoVEe0S7m/sf+FlkPAYBFwNRfVg9R7xLXetxXrA0gw939lafSYPn430tQ==", "lesson"=>{"name"=>"测试，第二课", "desc"=>"测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，", "token"=>"1441337069-YGde5_0S7Y_l_1VMsU7kzQ", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000006147b10 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-44n304.jpg>, @original_filename="1.pic.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"1.pic.jpg\"\r\nContent-Type: image/jpeg\r\n">}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000006147980 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1tce0z3.png>, @original_filename="86d8d3348f8d004f9cb4f04b72ed0b39.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"86d8d3348f8d004f9cb4f04b72ed0b39.png\"\r\nContent-Type: image/png\r\n">}}}, "edit"=>"确定", "course_id"=>"84"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:create
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
WARNING: Can't mass-assign protected attributes for Lesson: teacher_id
	app/models/course.rb:47:in `build_lesson'
	app/controllers/teachers/lessons_controller.rb:15:in `create'
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "lessons" ("name", "desc", "token", "tags", "course_id", "curriculum_id", "state", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["name", "测试，第二课"], ["desc", "测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，测试，第二课，"], ["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"], ["tags", "[\"\",\"知识点讲解\"]"], ["course_id", 84], ["curriculum_id", 379], ["state", "editing"], ["created_at", "2015-09-04 03:28:44.379499"], ["updated_at", "2015-09-04 03:28:44.379499"]]
  [1m[36mCourse Load (0.9ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "courses"."id" = $1  [["id", 84]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "curriculums"."id" = $1[0m  [["id", 379]]
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "qa_files" ("name", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "eaabed8327ddf09c7abc8f8f83307881.jpg"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 171], ["created_at", "2015-09-04 03:28:44.396771"], ["updated_at", "2015-09-04 03:28:44.396771"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "qa_files" ("name", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "8c133dc784bc64f272067f95e3792605.png"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 171], ["created_at", "2015-09-04 03:28:44.973917"], ["updated_at", "2015-09-04 03:28:44.973917"]]
  [1m[35m (9.9ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=171
Completed 302 Found in 1090ms (ActiveRecord: 38.5ms)


Started GET "/courses/84?lesson_id=171" for 10.0.2.2 at 2015-09-04 03:28:45 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"171", "id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 171]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "videos" SET "videoable_id" = $1, "videoable_type" = $2, "updated_at" = $3 WHERE "videos"."id" = $4  [["videoable_id", 171], ["videoable_type", "Lesson"], ["updated_at", "2015-09-04 03:28:45.246023"], ["id", 298]]
  [1m[36m (11.0ms)[0m  [1mCOMMIT[0m
  [1m[35mCurriculum Load (1.0ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  Rendered lessons/_lesson.html.erb (4.8ms)
  [1m[35mTopic Load (0.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 171]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (3.8ms)
  Rendered courses/_course_topics.html.erb (6.1ms)
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (13.2ms)
  Rendered courses/_course_layout.html.erb (50.4ms)
  Rendered lessons/show.html.erb within layouts/application (54.5ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 206ms (Views: 118.9ms | ActiveRecord: 23.5ms)


Started GET "/lessons/171" for 10.0.2.2 at 2015-09-04 03:28:55 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"171"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit lessons:show
  [1m[36mLesson Load (0.4ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 171]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.6ms)
  Rendered lessons/_lesson.html.erb (2.4ms)
  [1m[36mTopic Load (0.4ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 171]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.5ms)
  Rendered courses/_course_topics.html.erb (3.8ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (11.3ms)
  Rendered courses/_course_layout.html.erb (28.7ms)
  Rendered lessons/show.html.erb within layouts/application (30.1ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 94ms (Views: 74.6ms | ActiveRecord: 6.1ms)


Started GET "/teachers/courses/84/lessons/new" for 10.0.2.2 at 2015-09-04 03:29:09 +0000
Processing by Teachers::LessonsController#new as HTML
  Parameters: {"course_id"=>"84"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:new
  [1m[35mCourse Load (0.9ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1[0m  [["role", "teacher"], ["id", 82]]
WARNING: Can't mass-assign protected attributes for Lesson: teacher_id
	app/models/course.rb:47:in `build_lesson'
	app/controllers/teachers/lessons_controller.rb:6:in `new'
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "lessons" WHERE "lessons"."token" = $1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mCurriculum Load (1.0ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_collapse_form.html.erb (11.1ms)
  Rendered videos/_form.html.erb (13.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (3.3ms)
  Rendered teachers/lessons/_form.html.erb (39.7ms)
  Rendered teachers/lessons/new.html.erb within layouts/application (41.7ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 115ms (Views: 86.5ms | ActiveRecord: 4.8ms)


Started POST "/videos" for 10.0.2.2 at 2015-09-04 03:29:24 +0000
Processing by VideosController#create as JS
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"kd5LYd9KryhvKUSA5XF8shVQx072sA/Qs6y2r3U1PBoBOG18AksoycQ0U1SiiDmqB8ILbszFqhz4PIJOhVS3Tg==", "video"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003a79e48 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-fa58ei.mp4>, @original_filename="你知道what可以翻译为……的地方吗？used to 与would有何区别？every有何用法？.mp4", @content_type="video/mp4", @headers="Content-Disposition: form-data; name=\"video[name]\"; filename=\"\xE4\xBD\xA0\xE7\x9F\xA5\xE9\x81\x93what\xE5\x8F\xAF\xE4\xBB\xA5\xE7\xBF\xBB\xE8\xAF\x91\xE4\xB8\xBA\xE2\x80\xA6\xE2\x80\xA6\xE7\x9A\x84\xE5\x9C\xB0\xE6\x96\xB9\xE5\x90\x97\xEF\xBC\x9Fused to \xE4\xB8\x8Ewould\xE6\x9C\x89\xE4\xBD\x95\xE5\x8C\xBA\xE5\x88\xAB\xEF\xBC\x9Fevery\xE6\x9C\x89\xE4\xBD\x95\xE7\x94\xA8\xE6\xB3\x95\xEF\xBC\x9F.mp4\"\r\nContent-Type: video/mp4\r\n">, "token"=>"1441337349-jT6OnPz5_nlUoZNiqnCZTw"}}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit videos:create
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 82]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "videos" ("name", "token", "author_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "9468c4b1c198223a9bfbf5eedc10bff7.mp4"], ["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"], ["author_id", 82], ["created_at", "2015-09-04 03:29:25.945749"], ["updated_at", "2015-09-04 03:29:25.945749"]]
  [1m[35m (10.3ms)[0m  COMMIT
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."id" = $1 LIMIT 1 FOR UPDATE  [["id", 299]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (1.5ms)[0m  UPDATE "videos" SET "state" = $1, "updated_at" = $2 WHERE "videos"."id" = $3  [["state", "in_queue"], ["updated_at", "2015-09-04 03:29:35.703735"], ["id", 299]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  Rendered videos/_video.html.erb (0.7ms)
  Rendered videos/create.js.erb (5.6ms)
Completed 200 OK in 10989ms (Views: 28.6ms | ActiveRecord: 17.1ms)


Started POST "/teachers/courses/84/lessons" for 10.0.2.2 at 2015-09-04 03:30:02 +0000
Processing by Teachers::LessonsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"kd5LYd9KryhvKUSA5XF8shVQx072sA/Qs6y2r3U1PBoBOG18AksoycQ0U1SiiDmqB8ILbszFqhz4PIJOhVS3Tg==", "lesson"=>{"name"=>"测试，第二课", "desc"=>"测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。", "token"=>"1441337349-jT6OnPz5_nlUoZNiqnCZTw", "tags"=>["", "知识点讲解"], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000005b6a198 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1beonl7.vxes>, @original_filename="2dc31b2c999abd1fe21d33dad496edf1.vxes", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"2dc31b2c999abd1fe21d33dad496edf1.vxes\"\r\nContent-Type: application/octet-stream\r\n">}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000005b69d88 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-edy60a.html>, @original_filename="85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html\"\r\nContent-Type: text/html\r\n">}}}, "edit"=>"确定", "course_id"=>"84"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:create
  [1m[36mCourse Load (1.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."id" = $2 LIMIT 1  [["role", "teacher"], ["id", 82]]
WARNING: Can't mass-assign protected attributes for Lesson: teacher_id
	app/models/course.rb:47:in `build_lesson'
	app/controllers/teachers/lessons_controller.rb:15:in `create'
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mCurriculum Load (0.4ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "lessons" ("name", "desc", "token", "tags", "course_id", "curriculum_id", "state", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"  [["name", "测试，第二课"], ["desc", "测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。测试，第二课。"], ["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"], ["tags", "[\"\",\"知识点讲解\"]"], ["course_id", 84], ["curriculum_id", 379], ["state", "editing"], ["created_at", "2015-09-04 03:30:02.924092"], ["updated_at", "2015-09-04 03:30:02.924092"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "courses" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "courses"."id" = $1  [["id", 84]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "curriculums" SET "lessons_count" = COALESCE("lessons_count", 0) + 1 WHERE "curriculums"."id" = $1[0m  [["id", 379]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "qa_files" ("name", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "d3ad45f86170b21fb1aae88767e23d69.vxes"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 172], ["created_at", "2015-09-04 03:30:02.936893"], ["updated_at", "2015-09-04 03:30:02.936893"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "qa_files" ("name", "qa_fileable_type", "qa_fileable_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "c2947d7404b3276033aa0e40abb1fae3.html"], ["qa_fileable_type", "Lesson"], ["qa_fileable_id", 172], ["created_at", "2015-09-04 03:30:03.673387"], ["updated_at", "2015-09-04 03:30:03.673387"]]
  [1m[35m (1.4ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=172
Completed 302 Found in 1123ms (ActiveRecord: 8.6ms)


Started GET "/courses/84?lesson_id=172" for 10.0.2.2 at 2015-09-04 03:30:03 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"172", "id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 172]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 82]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "videos" SET "videoable_id" = $1, "videoable_type" = $2, "updated_at" = $3 WHERE "videos"."id" = $4  [["videoable_id", 172], ["videoable_type", "Lesson"], ["updated_at", "2015-09-04 03:30:04.039921"], ["id", 299]]
  [1m[36m (1.0ms)[0m  [1mCOMMIT[0m
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.5ms)
  Rendered lessons/_lesson.html.erb (3.0ms)
  [1m[35mTopic Load (0.5ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 172]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (2.3ms)
  Rendered courses/_course_topics.html.erb (5.6ms)
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (1.2ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (19.2ms)
  Rendered courses/_course_layout.html.erb (39.7ms)
  Rendered lessons/show.html.erb within layouts/application (41.7ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 119ms (Views: 88.8ms | ActiveRecord: 11.8ms)


Started GET "/lessons/172" for 10.0.2.2 at 2015-09-04 03:30:12 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"172"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit lessons:show
  [1m[36mLesson Load (0.4ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 172]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.4ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.2ms)
  Rendered lessons/_lesson.html.erb (3.8ms)
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 172]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.2ms)
  Rendered courses/_course_topics.html.erb (3.3ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (18.2ms)
  Rendered courses/_course_layout.html.erb (33.2ms)
  Rendered lessons/show.html.erb within layouts/application (34.2ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 89ms (Views: 69.5ms | ActiveRecord: 8.0ms)


Started GET "/courses/84" for 10.0.2.2 at 2015-09-04 03:30:19 +0000
Processing by CoursesController#show as HTML
  Parameters: {"id"=>"84"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC LIMIT 1[0m  [["course_id", 84]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.5ms)
  Rendered lessons/_lesson.html.erb (2.1ms)
  [1m[35mTopic Load (0.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (2.4ms)
  Rendered courses/_course_topics.html.erb (3.5ms)
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (16.8ms)
  Rendered courses/_course_layout.html.erb (30.1ms)
  Rendered lessons/show.html.erb within layouts/application (31.0ms)
  Rendered layouts/_top_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 81ms (Views: 62.4ms | ActiveRecord: 8.1ms)
  [1m[36mQaFile Load (1.1ms)[0m  [1mSELECT  "qa_files".* FROM "qa_files"  ORDER BY "qa_files"."id" DESC LIMIT 1[0m
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 20]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "wNDVy4c-pkw29ilvfMZ4OA"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 20], ["videoable_type", "Lesson"]]
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 20], ["qa_fileable_type", "Lesson"]]
  [1m[35mLesson Load (1.2ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 172]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  [1m[36mQaFile Load (0.9ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 172], ["qa_fileable_type", "Lesson"]]


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:37:14 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (11.9ms)
  Rendered videos/_form.html.erb (14.2ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (4.7ms)
  Rendered teachers/lessons/_form.html.erb (50.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (54.2ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 152ms (Views: 121.5ms | ActiveRecord: 4.5ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 03:37:32 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"f16tnQ9xRJxyd1ICPGgD1raNoiweFpo62Cvgx/V+U+7vuIuA0nDDfdlqRdZ7kUbOpB9uDCRjP/aTu9QmBR/Yug==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"13"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003de2d28 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-9kwu9i.jpg>, @original_filename="倒排索引.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE5\x80\x92\xE6\x8E\x92\xE7\xB4\xA2\xE5\xBC\x95.jpg\"\r\nContent-Type: image/jpeg\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 13  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "bcb4e2a4d5ecfaae5df1c29cbff7c1d2.jpg"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 03:37:33.035690"], ["updated_at", "2015-09-04 03:37:33.035690"]]
  [1m[36m (8.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 338ms (ActiveRecord: 13.7ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 03:37:33 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.4ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.8ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  Rendered lessons/_lesson.html.erb (3.8ms)
  [1m[36mTopic Load (0.6ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.4ms)
  Rendered courses/_course_topics.html.erb (4.6ms)
  [1m[35mLesson Load (0.8ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (17.3ms)
  Rendered courses/_course_layout.html.erb (38.3ms)
  Rendered lessons/show.html.erb within layouts/application (41.5ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 117ms (Views: 99.8ms | ActiveRecord: 7.5ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 03:37:39 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.6ms)
  Rendered videos/_collapse_form.html.erb (11.3ms)
  Rendered videos/_form.html.erb (12.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.5ms)
  Rendered teachers/lessons/_submit.html.erb (3.8ms)
  Rendered teachers/lessons/_form.html.erb (40.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (43.0ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 97ms (Views: 79.9ms | ActiveRecord: 5.1ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:10:25 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"oT0GspGFYDClonGcnuX6cxYtM7zOq8tRFn9Z4H2EX3Ex2yCvTITn0Q6/ZkjZHL9rBL//nPTebp1d720BjeXUJQ==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"1", "id"=>"13"}, "1"=>{"_destroy"=>"1", "id"=>"21"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000004589db0 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-g1a55d.png>, @original_filename="86d8d3348f8d004f9cb4f04b72ed0b39.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"86d8d3348f8d004f9cb4f04b72ed0b39.png\"\r\nContent-Type: image/png\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mQaFile Load (1.2ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (13, 21)[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.4ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 13]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 21]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "3e1892ed739bedcbff31f7579431604a.png"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 12:10:25.712686"], ["updated_at", "2015-09-04 12:10:25.712686"]]
  [1m[35m (3.1ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 1205ms (ActiveRecord: 10.4ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:10:26 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.3ms)
  Rendered lessons/_lesson.html.erb (4.4ms)
  [1m[35mTopic Load (0.5ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (3.1ms)
  Rendered courses/_course_topics.html.erb (6.8ms)
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (18.3ms)
  Rendered courses/_course_layout.html.erb (40.0ms)
  Rendered lessons/show.html.erb within layouts/application (43.5ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 481ms (Views: 464.5ms | ActiveRecord: 7.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:10:33 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (10.1ms)
  Rendered videos/_form.html.erb (13.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (41.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (43.7ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 94ms (Views: 79.6ms | ActiveRecord: 4.3ms)


Started GET "/lessons/171" for 10.0.2.2 at 2015-09-04 12:10:53 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"171"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit lessons:show
  [1m[36mLesson Load (1.7ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 171]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.4ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.5ms)
  Rendered lessons/_lesson.html.erb (2.6ms)
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 171]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.3ms)
  Rendered courses/_course_topics.html.erb (3.4ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (15.0ms)
  Rendered courses/_course_layout.html.erb (31.6ms)
  Rendered lessons/show.html.erb within layouts/application (33.2ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 87ms (Views: 66.7ms | ActiveRecord: 8.1ms)


Started GET "/lessons/170" for 10.0.2.2 at 2015-09-04 12:10:59 +0000
Processing by LessonsController#show as HTML
  Parameters: {"id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit lessons:show
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.2ms)
  Rendered lessons/_lesson.html.erb (1.9ms)
  [1m[35mTopic Load (0.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.2ms)
  Rendered courses/_course_topics.html.erb (4.7ms)
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (14.8ms)
  Rendered courses/_course_layout.html.erb (29.7ms)
  Rendered lessons/show.html.erb within layouts/application (30.9ms)
  Rendered layouts/_top_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 82ms (Views: 62.9ms | ActiveRecord: 8.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:11:06 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (7.1ms)
  Rendered videos/_form.html.erb (8.2ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (1.2ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.0ms)
  Rendered teachers/lessons/_form.html.erb (31.5ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (32.9ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 84ms (Views: 67.9ms | ActiveRecord: 5.5ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:12:48 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Sq8F4RbsgDxs+aKWoVibYHVexEptTUQMiqf6ly6LL/jaSSP8y+0H3cfktULmod54Z8wIalc44cDBN8523uqkrA==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"1", "id"=>"22"}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.8ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 22  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 22]]
  [1m[36m (9.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 207ms (ActiveRecord: 14.8ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:12:49 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (2.0ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.9ms)
  Rendered lessons/_lesson.html.erb (4.8ms)
  [1m[36mTopic Load (0.6ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.3ms)
  Rendered courses/_course_topics.html.erb (5.3ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (17.1ms)
  Rendered courses/_course_layout.html.erb (39.3ms)
  Rendered lessons/show.html.erb within layouts/application (42.7ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 113ms (Views: 91.1ms | ActiveRecord: 9.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:12:55 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (1.3ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (8.8ms)
  Rendered videos/_form.html.erb (10.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.3ms)
  Rendered teachers/lessons/_form.html.erb (36.7ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (38.6ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 95ms (Views: 79.2ms | ActiveRecord: 5.3ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:13:27 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"KGABuo5vF+rMLPLjJtQDdRbX9GqGItPUODBZwrLGKVK4hienU26QC2cx5TdhLUZtBEU4SrxXdhhzoG0jQqeiBg==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000002716ea0 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-pw277k.key>, @original_filename="介绍.key", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE4\xBB\x8B\xE7\xBB\x8D.key\"\r\nContent-Type: application/octet-stream\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mCurriculum Load (0.8ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "aa725d734f45c72f083d51de2c35db39.key"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 12:13:28.130155"], ["updated_at", "2015-09-04 12:13:28.130155"]]
  [1m[36m (8.8ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 1343ms (ActiveRecord: 13.5ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:13:29 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (1.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (1.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.6ms)
  Rendered lessons/_lesson.html.erb (2.6ms)
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.1ms)
  Rendered courses/_course_topics.html.erb (3.3ms)
  [1m[35mLesson Load (0.8ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (18.0ms)
  Rendered courses/_course_layout.html.erb (34.0ms)
  Rendered lessons/show.html.erb within layouts/application (35.0ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 112ms (Views: 93.5ms | ActiveRecord: 8.4ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:13:36 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.4ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (8.1ms)
  Rendered videos/_form.html.erb (9.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.8ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.0ms)
  Rendered teachers/lessons/_form.html.erb (33.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (34.3ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 105ms (Views: 88.3ms | ActiveRecord: 5.0ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:15:12 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"TsuH2144bIowzwhfLWJ58mJ60hugbFbGioMIO4EPb03eLaHGgznra5vSH4tqmzzqcOgeO5oZ8wrBEzzacW7kGQ==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"23"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003b07540 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1v5thi9.jpg>, @original_filename="倒排索引.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE5\x80\x92\xE6\x8E\x92\xE7\xB4\xA2\xE5\xBC\x95.jpg\"\r\nContent-Type: image/jpeg\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 23[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "c2ddacfe37a50ce2e55e02fb3536f281.jpg"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 12:15:12.802738"], ["updated_at", "2015-09-04 12:15:12.802738"]]
  [1m[35m (9.2ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 221ms (ActiveRecord: 15.2ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:15:12 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  Rendered lessons/_lesson.html.erb (3.9ms)
  [1m[35mTopic Load (0.5ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.5ms)
  Rendered courses/_course_topics.html.erb (6.1ms)
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (16.4ms)
  Rendered courses/_course_layout.html.erb (37.3ms)
  Rendered lessons/show.html.erb within layouts/application (40.7ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 119ms (Views: 87.9ms | ActiveRecord: 6.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:15:20 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (9.7ms)
  Rendered videos/_form.html.erb (12.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.3ms)
  Rendered teachers/lessons/_form.html.erb (84.6ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (107.9ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 205ms (Views: 173.4ms | ActiveRecord: 4.7ms)
  [1m[35mLesson Load (0.8ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:16:10 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NcK1/fvN4/FXVAcaVU17uU87Z/3bcQiLqHmvfvG6n9KlJJPgJsxkEPxJEM4StD6hXamr3eEErUfj6ZufAdsUhg==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"23"}, "1"=>{"_destroy"=>"false", "id"=>"24"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007fdd5cd3fa90 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1h7o532.pdf>, @original_filename="兰超-简历-2015-7.pdf", @content_type="application/pdf", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE5\x85\xB0\xE8\xB6\x85-\xE7\xAE\x80\xE5\x8E\x86-2015-7.pdf\"\r\nContent-Type: application/pdf\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (1.2ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (23, 24)  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "c8af04f95d73949741df1ea066aeb809.pdf"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 12:16:10.154026"], ["updated_at", "2015-09-04 12:16:10.154026"]]
  [1m[36m (9.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 363ms (ActiveRecord: 15.1ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:16:10 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (1.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (1.4ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.8ms)
  Rendered lessons/_lesson.html.erb (3.6ms)
  [1m[36mTopic Load (1.0ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (2.5ms)
  Rendered courses/_course_topics.html.erb (4.1ms)
  [1m[35mLesson Load (0.7ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (16.4ms)
  Rendered courses/_course_layout.html.erb (34.7ms)
  Rendered lessons/show.html.erb within layouts/application (36.6ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 106ms (Views: 85.0ms | ActiveRecord: 10.1ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:16:19 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.9ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (7.9ms)
  Rendered videos/_form.html.erb (9.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.9ms)
  Rendered teachers/lessons/_submit.html.erb (3.0ms)
  Rendered teachers/lessons/_form.html.erb (35.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (37.1ms)
  Rendered layouts/_top_bar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 100ms (Views: 85.2ms | ActiveRecord: 4.8ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:16:46 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (1.0ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  Rendered teachers/lessons/edit.html.erb within layouts/application (2.1ms)
Completed 500 Internal Server Error in 18ms

ActionView::Template::Error (Missing partial teachers/lessons/_form, application/_form with {:locale=>[:cn], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee, :slim]}. Searched in:
  * "/vagrant/qatime/app/views"
):
    1: <%= render partial:'form' ,locals:{post_url: lesson_path(@lesson)}%>
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (30.4ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:16:50 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (1.3ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (11.0ms)
  Rendered videos/_form.html.erb (12.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (2.5ms)
  Rendered teachers/lessons/_form.html.erb (82.6ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (94.9ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 164ms (Views: 147.2ms | ActiveRecord: 5.1ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:16:57 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (8.8ms)
  Rendered videos/_form.html.erb (10.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (1.9ms)
  Rendered teachers/lessons/_form.html.erb (34.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (47.6ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 146ms (Views: 129.6ms | ActiveRecord: 5.1ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:17:12 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (1.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  Rendered teachers/lessons/edit.html.erb within layouts/application (4.1ms)
Completed 500 Internal Server Error in 24ms

ActionView::Template::Error (Missing partial teachers/lessons/_form, application/_form with {:locale=>[:cn], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee, :slim]}. Searched in:
  * "/vagrant/qatime/app/views"
):
    1: <%= render partial:'form' ,locals:{post_url: lesson_path(@lesson)}%>
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (26.3ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:17:14 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (7.1ms)
  Rendered videos/_form.html.erb (8.5ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (2.0ms)
  Rendered teachers/lessons/_form.html.erb (81.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (97.0ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 153ms (Views: 140.6ms | ActiveRecord: 4.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:21:59 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (1.1ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.6ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (10.5ms)
  Rendered videos/_form.html.erb (12.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.5ms)
  Rendered teachers/lessons/_form.html.erb (83.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (106.5ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 196ms (Views: 180.8ms | ActiveRecord: 5.4ms)
  [1m[35mLesson Load (1.2ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mLesson Load (1.0ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mQaFile Load (0.8ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mQaFile Load (0.8ms)[0m  [1mSELECT  "qa_files".* FROM "qa_files" WHERE "qa_files"."id" = $1 LIMIT 1[0m  [["id", 23]]
  [1m[35mQaFile Load (0.6ms)[0m  SELECT  "qa_files".* FROM "qa_files" WHERE "qa_files"."id" = $1 LIMIT 1  [["id", 23]]
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  UPDATE "qa_files" SET "original_filename" = $1, "updated_at" = $2 WHERE "qa_files"."id" = $3  [["original_filename", "test1.name"], ["updated_at", "2015-09-04 12:25:04.276779"], ["id", 23]]
  [1m[36m (10.3ms)[0m  [1mCOMMIT[0m
  [1m[35mQaFile Load (0.6ms)[0m  SELECT  "qa_files".* FROM "qa_files" WHERE "qa_files"."id" = $1 LIMIT 1  [["id", 24]]
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "qa_files" SET "original_filename" = $1, "updated_at" = $2 WHERE "qa_files"."id" = $3  [["original_filename", "test2.name"], ["updated_at", "2015-09-04 12:25:13.280301"], ["id", 24]]
  [1m[36m (1.1ms)[0m  [1mCOMMIT[0m
  [1m[35mQaFile Load (0.8ms)[0m  SELECT  "qa_files".* FROM "qa_files" WHERE "qa_files"."id" = $1 LIMIT 1  [["id", 25]]
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "qa_files" SET "original_filename" = $1, "updated_at" = $2 WHERE "qa_files"."id" = $3  [["original_filename", "test3.name"], ["updated_at", "2015-09-04 12:25:28.059140"], ["id", 25]]
  [1m[36m (1.2ms)[0m  [1mCOMMIT[0m


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:25:30 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  Rendered teachers/lessons/_form.html.erb (1.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (26.4ms)
Completed 500 Internal Server Error in 65ms

SyntaxError (/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:20: syntax error, unexpected tIDENTIFIER, expecting ')'
...ile_field :name, :value=builder.original_filename );@output_...
...                               ^):
  app/views/teachers/lessons/_form.html.erb:20: syntax error, unexpected tIDENTIFIER, expecting ')'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (11.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (33.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:28:36 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (1.1ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  Rendered teachers/lessons/_form.html.erb (2.3ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (29.9ms)
Completed 500 Internal Server Error in 73ms

SyntaxError (/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:25: syntax error, unexpected '<', expecting ')'
        </br>
         ^
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:28: unknown regexp options - br
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:34: syntax error, unexpected '<', expecting ')'
  </div>
   ^
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:35: unknown regexp options - dv
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:36: unterminated string meets end of file
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:36: syntax error, unexpected end-of-input, expecting ')'):
  app/views/teachers/lessons/_form.html.erb:25: syntax error, unexpected '<', expecting ')'
  app/views/teachers/lessons/_form.html.erb:28: unknown regexp options - br
  app/views/teachers/lessons/_form.html.erb:34: syntax error, unexpected '<', expecting ')'
  app/views/teachers/lessons/_form.html.erb:35: unknown regexp options - dv
  app/views/teachers/lessons/_form.html.erb:36: unterminated string meets end of file
  app/views/teachers/lessons/_form.html.erb:36: syntax error, unexpected end-of-input, expecting ')'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.8ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (6.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (34.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:28:37 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (2.0ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  Rendered teachers/lessons/_form.html.erb (0.7ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (2.1ms)
Completed 500 Internal Server Error in 20ms

SyntaxError (/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:25: syntax error, unexpected '<', expecting ')'
        </br>
         ^
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:28: unknown regexp options - br
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:34: syntax error, unexpected '<', expecting ')'
  </div>
   ^
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:35: unknown regexp options - dv
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:36: unterminated string meets end of file
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:36: syntax error, unexpected end-of-input, expecting ')'):
  app/views/teachers/lessons/_form.html.erb:25: syntax error, unexpected '<', expecting ')'
  app/views/teachers/lessons/_form.html.erb:28: unknown regexp options - br
  app/views/teachers/lessons/_form.html.erb:34: syntax error, unexpected '<', expecting ')'
  app/views/teachers/lessons/_form.html.erb:35: unknown regexp options - dv
  app/views/teachers/lessons/_form.html.erb:36: unterminated string meets end of file
  app/views/teachers/lessons/_form.html.erb:36: syntax error, unexpected end-of-input, expecting ')'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.9ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (34.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:28:45 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (1.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  Rendered teachers/lessons/_form.html.erb (2.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (5.3ms)
Completed 500 Internal Server Error in 23ms

SyntaxError (/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:25: syntax error, unexpected '<', expecting ')'
        </br>
         ^
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:28: unknown regexp options - br
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:34: syntax error, unexpected '<', expecting ')'
  </div>
   ^
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:35: unknown regexp options - dv
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:36: unterminated string meets end of file
/vagrant/qatime/app/views/teachers/lessons/_form.html.erb:36: syntax error, unexpected end-of-input, expecting ')'):
  app/views/teachers/lessons/_form.html.erb:25: syntax error, unexpected '<', expecting ')'
  app/views/teachers/lessons/_form.html.erb:28: unknown regexp options - br
  app/views/teachers/lessons/_form.html.erb:34: syntax error, unexpected '<', expecting ')'
  app/views/teachers/lessons/_form.html.erb:35: unknown regexp options - dv
  app/views/teachers/lessons/_form.html.erb:36: unterminated string meets end of file
  app/views/teachers/lessons/_form.html.erb:36: syntax error, unexpected end-of-input, expecting ')'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.5ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (30.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:31:09 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.4ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (9.3ms)
  Rendered videos/_form.html.erb (11.1ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (85.7ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (111.5ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 209ms (Views: 194.7ms | ActiveRecord: 4.3ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:31:27 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"d/yqPKQZZhKNI7RRyvcHIwSSJjFB2La7wEUAA/byQsHnGowheRjh8yY+o4WNDkI7FgDqEXutE3eL1TTiBpPJlQ==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007fdd5c1ac0e8 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-ubeo5g.docx>, @original_filename="定级文档-晨松.docx", @content_type="application/vnd.openxmlformats-officedocument.wordprocessingml.document", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"\xE5\xAE\x9A\xE7\xBA\xA7\xE6\x96\x87\xE6\xA1\xA3-\xE6\x99\xA8\xE6\x9D\xBE.docx\"\r\nContent-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document\r\n">, "_destroy"=>"false", "id"=>"23"}, "1"=>{"_destroy"=>"false", "id"=>"24"}, "2"=>{"_destroy"=>"false", "id"=>"25"}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (1.2ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (1.8ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (23, 24, 25)[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT  "qa_files".* FROM "qa_files" WHERE "qa_files"."id" = $1 LIMIT 1[0m  [["id", 23]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "qa_files" SET "name" = $1, "updated_at" = $2 WHERE "qa_files"."id" = $3  [["name", "b7c6dec9655731010a4755ebaf84f8b9.docx"], ["updated_at", "2015-09-04 12:31:27.529665"], ["id", 23]]
  [1m[36m (10.3ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 426ms (ActiveRecord: 17.5ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:31:27 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.9ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (1.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.7ms)
  Rendered lessons/_lesson.html.erb (4.4ms)
  [1m[36mTopic Load (0.6ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.5ms)
  Rendered courses/_course_topics.html.erb (4.9ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (16.5ms)
  Rendered courses/_course_layout.html.erb (37.5ms)
  Rendered lessons/show.html.erb within layouts/application (40.2ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 100ms (Views: 79.8ms | ActiveRecord: 8.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:31:35 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.8ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.8ms)
  Rendered videos/_collapse_form.html.erb (9.2ms)
  Rendered videos/_form.html.erb (10.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.7ms)
  Rendered teachers/lessons/_form.html.erb (38.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (41.4ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 97ms (Views: 78.7ms | ActiveRecord: 5.1ms)
  [1m[35mLesson Load (0.8ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:35:31 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.9ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.6ms)
  Rendered videos/_collapse_form.html.erb (11.3ms)
  Rendered videos/_form.html.erb (13.1ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.2ms)
  Rendered teachers/lessons/_form.html.erb (38.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (41.1ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 105ms (Views: 92.4ms | ActiveRecord: 4.4ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:36:24 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LgprgYgWvd98b+guG87Fm20GOI9tcSnoojCCoByL+HK+7E2cVRc6Ptdy//pcN4CDf5T0r1cEjCTpoLZB7OpzJg==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"1", "id"=>"24"}, "1"=>{"_destroy"=>"1", "id"=>"25"}, "2"=>{"_destroy"=>"1", "id"=>"23"}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.7ms)[0m  BEGIN
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (24, 25, 23)[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 24]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 25]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "qa_files" WHERE "qa_files"."id" = $1[0m  [["id", 23]]
  [1m[35m (8.9ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 2906ms (ActiveRecord: 15.2ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:36:27 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.3ms)
  Rendered lessons/_lesson.html.erb (5.2ms)
  [1m[35mTopic Load (0.5ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.1ms)
  Rendered courses/_course_topics.html.erb (4.1ms)
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (1.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (17.6ms)
  Rendered courses/_course_layout.html.erb (37.0ms)
  Rendered lessons/show.html.erb within layouts/application (39.3ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 96ms (Views: 77.8ms | ActiveRecord: 7.4ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:36:33 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (1.0ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (9.2ms)
  Rendered videos/_form.html.erb (11.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (38.7ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (40.7ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 101ms (Views: 86.4ms | ActiveRecord: 4.7ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:37:31 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"X0zUB8SWu7aanrpv41sr/MZoALVmXJx7eljvTfFVpyrPqvIaGZc8VzGDrbukom7k1PrMlVwpObcxyNusATQsfg==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003c1dcb8 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-z3wlmt.html>, @original_filename="85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html\"\r\nContent-Type: text/html\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (1.3ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "65f7a628d6b57f2b4ba276b1aaaa1006.html"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 12:37:31.995599"], ["updated_at", "2015-09-04 12:37:31.995599"]]
  [1m[35m (9.0ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 239ms (ActiveRecord: 14.5ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:37:32 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (1.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.6ms)
  Rendered lessons/_lesson.html.erb (3.8ms)
  [1m[35mTopic Load (0.6ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.6ms)
  Rendered courses/_course_topics.html.erb (4.9ms)
  [1m[36mLesson Load (1.0ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (37.6ms)
  Rendered courses/_course_layout.html.erb (61.9ms)
  Rendered lessons/show.html.erb within layouts/application (64.6ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 140ms (Views: 119.3ms | ActiveRecord: 8.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:37:38 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (12.6ms)
  Rendered videos/_form.html.erb (14.6ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.9ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.5ms)
  Rendered teachers/lessons/_form.html.erb (43.6ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (47.0ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 105ms (Views: 87.2ms | ActiveRecord: 5.2ms)
  [1m[35mQaFile Load (0.9ms)[0m  SELECT  "qa_files".* FROM "qa_files"  ORDER BY "qa_files"."id" DESC LIMIT 1


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:38:03 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"OQzUWFRJKR8TJjumrrISG+8H38KgoDpB056/7tNqQSOp6vJFiUiu/rg7LHLpS1cD/ZUT4prVn42YDosPIwvKdw==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007fdd5cd186e8 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1uk9mtk.png>, @original_filename="86d8d3348f8d004f9cb4f04b72ed0b39.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][0][name]\"; filename=\"86d8d3348f8d004f9cb4f04b72ed0b39.png\"\r\nContent-Type: image/png\r\n">, "_destroy"=>"false", "id"=>"26"}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 26  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mQaFile Load (0.6ms)[0m  SELECT  "qa_files".* FROM "qa_files" WHERE "qa_files"."id" = $1 LIMIT 1  [["id", 26]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "qa_files" SET "name" = $1, "updated_at" = $2 WHERE "qa_files"."id" = $3[0m  [["name", "78966a78d89a0039efd39d186b86999e.png"], ["updated_at", "2015-09-04 12:38:03.599086"], ["id", 26]]
  [1m[35m (9.4ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 231ms (ActiveRecord: 15.2ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:38:03 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.8ms)
  Rendered lessons/_lesson.html.erb (2.6ms)
  [1m[35mTopic Load (1.0ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (6.0ms)
  Rendered courses/_course_topics.html.erb (8.0ms)
  [1m[36mLesson Load (0.7ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (23.6ms)
  Rendered courses/_course_layout.html.erb (46.3ms)
  Rendered lessons/show.html.erb within layouts/application (49.1ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 114ms (Views: 94.5ms | ActiveRecord: 8.6ms)
  [1m[36mQaFile Load (0.9ms)[0m  [1mSELECT  "qa_files".* FROM "qa_files"  ORDER BY "qa_files"."id" DESC LIMIT 1[0m


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:38:29 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.9ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.4ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (8.2ms)
  Rendered videos/_form.html.erb (9.2ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.4ms)
  Rendered teachers/lessons/_form.html.erb (33.3ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (34.9ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 97ms (Views: 82.3ms | ActiveRecord: 4.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:41:43 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (2.1ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.6ms)
  Rendered videos/_collapse_form.html.erb (12.0ms)
  Rendered videos/_form.html.erb (14.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.4ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.5ms)
  Rendered teachers/lessons/_form.html.erb (41.4ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (43.5ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 490ms (Views: 476.4ms | ActiveRecord: 5.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:48:23 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (30.2ms)
  Rendered videos/_form.html.erb (32.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (53.0ms)
  Rendered teachers/lessons/_form.html.erb (119.3ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (142.3ms)
Completed 500 Internal Server Error in 178ms

ActionView::Template::Error (undefined method `file' for #<SimpleForm::FormBuilder:0x007fdd5c6a8588>):
    1: <fieldset>
    2:   <%= f.file :name %><br />
    3:   <%= f.check_box :_destroy %>
    4:   <%= f.label :_destroy, "Remove" %>
    5: </fieldset>
  app/views/shared/qa_files/_qa_file_fields.html.erb:2:in `_app_views_shared_qa_files__qa_file_fields_html_erb__2823011775169741561_70294357471040'
  app/views/teachers/lessons/_form.html.erb:20:in `block (2 levels) in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:19:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (8.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (28.3ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:48:45 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (1.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.9ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (8.8ms)
  Rendered videos/_form.html.erb (11.9ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_form.html.erb (32.1ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (34.3ms)
Completed 500 Internal Server Error in 52ms

ActionView::Template::Error (Missing partial shared/qa_files/_qa_file_fields with {:locale=>[:cn], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee, :slim]}. Searched in:
  * "/vagrant/qatime/app/views"
):
    17:                    input_html: { multiple: true ,class:'lesson-chosen-select'}%>
    18: 
    19:         <%= f.fields_for :qa_files do |builder| %>
    20:             <%= render 'shared/qa_files/qa_file_fields', f: builder %>
    21:         <% end %>
    22: 
    23:         </br>
  app/views/teachers/lessons/_form.html.erb:20:in `block (2 levels) in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:19:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (7.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.9ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (30.3ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:48:46 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (1.3ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (7.6ms)
  Rendered videos/_form.html.erb (8.6ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (1.4ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (7.2ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (99.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (101.1ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 503ms (Views: 486.3ms | ActiveRecord: 6.3ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:49:37 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (11.2ms)
  Rendered videos/_form.html.erb (12.9ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (1.3ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.2ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.3ms)
  Rendered teachers/lessons/_form.html.erb (64.7ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (67.0ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 124ms (Views: 110.5ms | ActiveRecord: 4.9ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:50:00 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"+RtjsWCcc+xXrXO6cyN4UoCjZf2xvJWu0QQS6thGMxZp/UWsvZ30DfywZG402j1KkjGp3YvJMGKalCYLKCe4Qg==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"1", "id"=>"26"}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 26  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.3ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "qa_files" WHERE "qa_files"."id" = $1  [["id", 26]]
  [1m[36m (1.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 112ms (ActiveRecord: 6.4ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:50:00 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.4ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (1.8ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (1.0ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.8ms)
  Rendered lessons/_lesson.html.erb (3.9ms)
  [1m[36mTopic Load (0.5ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.1ms)
  Rendered topics/_index.html.erb (3.0ms)
  Rendered courses/_course_topics.html.erb (7.4ms)
  [1m[35mLesson Load (0.5ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (1.4ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (19.7ms)
  Rendered courses/_course_layout.html.erb (44.9ms)
  Rendered lessons/show.html.erb within layouts/application (48.4ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 132ms (Views: 109.7ms | ActiveRecord: 9.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:50:06 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (1.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.7ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (6.7ms)
  Rendered videos/_form.html.erb (7.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (1.8ms)
  Rendered teachers/lessons/_form.html.erb (32.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (35.6ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 91ms (Views: 75.7ms | ActiveRecord: 5.2ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:50:19 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"TZYhv9Me0h+F6EQlzr6/rH6oEFLERZkbPmnRelOD32PdcAeiDh9V/i71U/GJR/q0bDrccv4wPNd1+eWbo+JUNw==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x000000060a5248 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1h14k0g.jpg>, @original_filename="1.pic.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"1.pic.jpg\"\r\nContent-Type: image/jpeg\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "b0c93262221e5864e70a710f4dbd6d86.jpg"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 12:50:19.620100"], ["updated_at", "2015-09-04 12:50:19.620100"]]
  [1m[36m (9.9ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 351ms (ActiveRecord: 14.2ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:50:19 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.1ms)
  Rendered lessons/_lesson.html.erb (3.8ms)
  [1m[36mTopic Load (1.0ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (2.4ms)
  Rendered courses/_course_topics.html.erb (3.4ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (16.7ms)
  Rendered courses/_course_layout.html.erb (32.5ms)
  Rendered lessons/show.html.erb within layouts/application (33.4ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 85ms (Views: 67.2ms | ActiveRecord: 8.3ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:50:28 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.8ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (1.3ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (1.2ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.3ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.8ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.3ms)
  Rendered videos/_collapse_form.html.erb (7.3ms)
  Rendered videos/_form.html.erb (9.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.4ms)
  Rendered teachers/lessons/_form.html.erb (40.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (41.4ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 107ms (Views: 88.9ms | ActiveRecord: 6.1ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:50:45 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.4ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.6ms)
  Rendered videos/_collapse_form.html.erb (10.5ms)
  Rendered videos/_form.html.erb (12.2ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_form.html.erb (33.3ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (34.5ms)
Completed 500 Internal Server Error in 52ms

ActionView::Template::Error (Missing partial shared/qa_files/_qa_file_fields with {:locale=>[:cn], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee, :slim]}. Searched in:
  * "/vagrant/qatime/app/views"
):
    17:                    input_html: { multiple: true ,class:'lesson-chosen-select'}%>
    18: 
    19:         <%= f.fields_for :qa_files do |builder| %>
    20:             <%= render 'shared/qa_files/qa_file_fields', f: builder %>
    21:         <% end %>
    22: 
    23:         </br>
  app/views/teachers/lessons/_form.html.erb:20:in `block (2 levels) in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:19:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.3ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (44.4ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:50:52 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.3ms)
  Rendered videos/_collapse_form.html.erb (6.9ms)
  Rendered videos/_form.html.erb (8.1ms)
  Rendered shared/_error_messages.html.erb (0.2ms)
  [1m[35mQaFile Load (0.3ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.1ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.7ms)
  Rendered teachers/lessons/_form.html.erb (46.6ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (48.6ms)
  Rendered layouts/_top_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 103ms (Views: 85.4ms | ActiveRecord: 4.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:50:54 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (1.0ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (1.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (8.7ms)
  Rendered videos/_form.html.erb (9.8ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.8ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.2ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (49.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (51.1ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 111ms (Views: 95.9ms | ActiveRecord: 6.1ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 12:52:41 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Ct6Zjvpoc/qaGDZrIeWVtv0ZnH1D0NrSyt6yqPV8w3uaOL+TJ2n0GzEFIb9mHNCu74tQXXmlfx6BToZJBR1ILw==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"27"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x00000003e0df00 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-1gpdzxn.html>, @original_filename="85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html\"\r\nContent-Type: text/html\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (1.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" = 27[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.8ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "de8fb731725a664b4654220b3cf2d3d5.html"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 12:52:41.779491"], ["updated_at", "2015-09-04 12:52:41.779491"]]
  [1m[35m (9.8ms)[0m  COMMIT
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 262ms (ActiveRecord: 15.8ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 12:52:42 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.7ms)
  Rendered lessons/_lesson.html.erb (3.3ms)
  [1m[35mTopic Load (0.3ms)[0m  SELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (1.8ms)
  Rendered courses/_course_topics.html.erb (6.0ms)
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC[0m  [["course_id", 84]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (38.0ms)
  Rendered courses/_course_layout.html.erb (57.9ms)
  Rendered lessons/show.html.erb within layouts/application (60.2ms)
  Rendered layouts/_top_bar.html.erb (1.0ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 141ms (Views: 121.5ms | ActiveRecord: 7.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:52:51 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.7ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.6ms)
  Rendered videos/_collapse_form.html.erb (9.4ms)
  Rendered videos/_form.html.erb (11.8ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.4ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.6ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (48.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (50.7ms)
  Rendered layouts/_top_bar.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 114ms (Views: 97.3ms | ActiveRecord: 5.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:53:58 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.9ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (14.5ms)
  Rendered videos/_form.html.erb (17.6ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (80.2ms)
  Rendered teachers/lessons/_form.html.erb (153.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (156.8ms)
Completed 500 Internal Server Error in 179ms

ActionView::Template::Error (undefined method `original_filename' for #<SimpleForm::FormBuilder:0x00000005d1fb00>):
    1: <fieldset>
    2:   <%= f.file_field :name, {:value => f.original_filename || 'new player'} %>
    3:   <%= f.hidden_field :_destroy %>
    4:   <%= link_to "remove", '#', class: "remove_fields" %>
    5: </fieldset>
  app/views/shared/qa_files/_qa_file_fields.html.erb:2:in `_app_views_shared_qa_files__qa_file_fields_html_erb__2823011775169741561_48819160'
  app/views/teachers/lessons/_form.html.erb:20:in `block (2 levels) in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:19:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (16.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (6.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (46.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:55:08 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (9.5ms)
  Rendered videos/_form.html.erb (13.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (70.1ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (73.4ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 153ms (Views: 139.3ms | ActiveRecord: 4.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 12:58:03 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (10.7ms)
  Rendered videos/_form.html.erb (13.1ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.2ms)
  Rendered teachers/lessons/_form.html.erb (67.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (69.2ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 136ms (Views: 121.4ms | ActiveRecord: 4.6ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:00:50 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (1.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.0ms)
  Rendered videos/_collapse_form.html.erb (14.1ms)
  Rendered videos/_form.html.erb (16.7ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.9ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (39.3ms)
  Rendered teachers/lessons/_form.html.erb (111.7ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (114.2ms)
Completed 500 Internal Server Error in 135ms

ActionView::Template::Error (undefined local variable or method `style' for #<#<Class:0x00000005f507a8>:0x00000005d74f38>):
    1: <fieldset>
    2:   <%= f.file_field :name, {:style => "float:left"} %>
    3:   <%= f.hidden_field :_destroy, {:style => "float:left"} %>
    4:   <%= link_to "remove", '#', class: "remove_fields", style => "float:left" %>
    5: </fieldset>
  app/views/shared/qa_files/_qa_file_fields.html.erb:4:in `_app_views_shared_qa_files__qa_file_fields_html_erb__2823011775169741561_48374080'
  app/views/teachers/lessons/_form.html.erb:20:in `block (2 levels) in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:19:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.1ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (37.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:01:06 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (1.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (6.9ms)
  Rendered videos/_form.html.erb (8.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.6ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered teachers/lessons/_form.html.erb (36.1ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (37.5ms)
Completed 500 Internal Server Error in 55ms

ActionView::Template::Error (Missing partial shared/qa_files/_qa_file_fields with {:locale=>[:cn], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee, :slim]}. Searched in:
  * "/vagrant/qatime/app/views"
):
    17:                    input_html: { multiple: true ,class:'lesson-chosen-select'}%>
    18: 
    19:         <%= f.fields_for :qa_files do |builder| %>
    20:             <%= render 'shared/qa_files/qa_file_fields', f: builder %>
    21:         <% end %>
    22: 
    23:         </br>
  app/views/teachers/lessons/_form.html.erb:20:in `block (2 levels) in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:19:in `block in _app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/_form.html.erb:11:in `_app_views_teachers_lessons__form_html_erb__1093211535540310239_70294358695780'
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (29.0ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.7ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (55.4ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:01:13 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (1.3ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (1.1ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (1.1ms)
  Rendered videos/_collapse_form.html.erb (8.3ms)
  Rendered videos/_form.html.erb (10.5ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.1ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (1.2ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.1ms)
  Rendered teachers/lessons/_form.html.erb (65.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (67.2ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 138ms (Views: 120.4ms | ActiveRecord: 5.7ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 13:01:36 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ngCSPwHxGyctx9HKMy01wOddqzVKH+RBJ5H1Rz97NcMO5rQi3PCcxobaxh501HDY9c9nFXBqQY1sAcGmzxq+lw==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"27"}, "1"=>{"_destroy"=>"false", "id"=>"28"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x007fdd5c096488 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-r5wjo6.jpg>, @original_filename="倒排索引.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"\xE5\x80\x92\xE6\x8E\x92\xE7\xB4\xA2\xE5\xBC\x95.jpg\"\r\nContent-Type: image/jpeg\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (27, 28)  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.7ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "cf2d95e75d2b2f8af19fb9fbaeee2f85.jpg"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 13:01:36.216930"], ["updated_at", "2015-09-04 13:01:36.216930"]]
  [1m[36m (9.6ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 246ms (ActiveRecord: 15.0ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 13:01:36 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.8ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (0.6ms)
  Rendered lessons/_lesson.html.erb (3.3ms)
  [1m[36mTopic Load (0.7ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.2ms)
  Rendered topics/_index.html.erb (4.1ms)
  Rendered courses/_course_topics.html.erb (7.6ms)
  [1m[35mLesson Load (0.5ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (19.5ms)
  Rendered courses/_course_layout.html.erb (44.1ms)
  Rendered lessons/show.html.erb within layouts/application (48.4ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 115ms (Views: 95.3ms | ActiveRecord: 8.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:01:42 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.9ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.7ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (8.6ms)
  Rendered videos/_form.html.erb (11.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.8ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.6ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (1.9ms)
  Rendered teachers/lessons/_form.html.erb (49.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (50.5ms)
  Rendered layouts/_top_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 110ms (Views: 94.8ms | ActiveRecord: 5.1ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:04:36 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.7ms)
  Rendered videos/_collapse_form.html.erb (17.7ms)
  Rendered videos/_form.html.erb (24.0ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.9ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.9ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.7ms)
  Rendered teachers/lessons/_form.html.erb (178.2ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (206.9ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 551ms (Views: 292.1ms | ActiveRecord: 26.9ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:04:48 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (1.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.5ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.5ms)
  Rendered videos/_collapse_form.html.erb (9.5ms)
  Rendered videos/_form.html.erb (11.3ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (3.0ms)
  Rendered teachers/lessons/_form.html.erb (45.5ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (48.3ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 109ms (Views: 94.0ms | ActiveRecord: 5.3ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:08:11 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.7ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (1.3ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.6ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.4ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.7ms)
  Rendered videos/_collapse_form.html.erb (15.4ms)
  Rendered videos/_form.html.erb (17.1ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.4ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.6ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.6ms)
  Rendered teachers/lessons/_form.html.erb (138.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (163.0ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 905ms (Views: 598.5ms | ActiveRecord: 21.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:09:07 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (9.4ms)
  Rendered videos/_form.html.erb (10.6ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.6ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (3.3ms)
  Rendered teachers/lessons/_form.html.erb (84.8ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (110.4ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 205ms (Views: 188.3ms | ActiveRecord: 4.7ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:09:22 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  Rendered teachers/lessons/edit.html.erb within layouts/application (2.1ms)
Completed 500 Internal Server Error in 21ms

ActionView::Template::Error (Missing partial teachers/lessons/_form, application/_form with {:locale=>[:cn], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :jbuilder, :coffee, :slim]}. Searched in:
  * "/vagrant/qatime/app/views"
):
    1: <%= render partial:'form' ,locals:{post_url: lesson_path(@lesson)}%>
  app/views/teachers/lessons/edit.html.erb:1:in `_app_views_teachers_lessons_edit_html_erb__2846099599817866619_70294359300160'


  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.4ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (3.6ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.2ms)
  Rendered /home/vagrant/.rvm/gems/ruby-2.2.1@qatime/gems/actionpack-4.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (32.4ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:09:24 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.8ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.9ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.4ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (11.8ms)
  Rendered videos/_form.html.erb (14.2ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.8ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.6ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (2.3ms)
  Rendered teachers/lessons/_form.html.erb (97.6ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (111.4ms)
  Rendered layouts/_top_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 182ms (Views: 161.9ms | ActiveRecord: 5.8ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:11:22 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.8ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.7ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.7ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.6ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (11.6ms)
  Rendered videos/_form.html.erb (13.5ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.7ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.7ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.3ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_submit.html.erb (2.6ms)
  Rendered teachers/lessons/_form.html.erb (136.0ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (161.6ms)
  Rendered layouts/_top_bar.html.erb (0.8ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 528ms (Views: 252.8ms | ActiveRecord: 25.2ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:11:27 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.5ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (1.5ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (8.6ms)
  Rendered videos/_form.html.erb (15.1ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (1.1ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (6.1ms)
  Rendered teachers/lessons/_form.html.erb (80.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (82.5ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 161ms (Views: 138.4ms | ActiveRecord: 6.4ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:11:48 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[36mLesson Load (0.6ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (1.4ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.5ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (0.5ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.1ms)
  Rendered videos/_video.html.erb (0.3ms)
  Rendered videos/_collapse_form.html.erb (7.2ms)
  Rendered videos/_form.html.erb (8.5ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[36mQaFile Load (0.5ms)[0m  [1mSELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2[0m  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.3ms)
  Rendered teachers/lessons/_submit.html.erb (1.3ms)
  Rendered teachers/lessons/_form.html.erb (59.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (62.0ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 466ms (Views: 449.3ms | ActiveRecord: 5.5ms)


Started PATCH "/teachers/courses/84/lessons/170" for 10.0.2.2 at 2015-09-04 13:12:22 +0000
Processing by Teachers::LessonsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"qptmn7PtSebWPCZqUCTqPSTjiSnNrRCkgEVjqp+4nS06fUCCbuzOB30hMb4X3a8lNnFFCffYtWjL1VdLb9kWeQ==", "lesson"=>{"name"=>"化学实验的重要性", "desc"=>"化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，化学实验的重要性，", "token"=>"1440929419-v7L-5Om5d8jbACeFXG6Ecg", "tags"=>[""], "qa_files_attributes"=>{"0"=>{"_destroy"=>"false", "id"=>"27"}, "1"=>{"_destroy"=>"false", "id"=>"28"}, "2"=>{"_destroy"=>"false", "id"=>"29"}, "new_qa_files"=>{"name"=>#<ActionDispatch::Http::UploadedFile:0x000000040edea0 @tempfile=#<Tempfile:/tmp/RackMultipart20150904-9112-173j5p6.html>, @original_filename="85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html", @content_type="text/html", @headers="Content-Disposition: form-data; name=\"lesson[qa_files_attributes][new_qa_files][name]\"; filename=\"85f14be4c58f7e62c3a0bc11b0d722b41433668358612.html\"\r\nContent-Type: text/html\r\n">}}}, "edit"=>"确定", "course_id"=>"84", "id"=>"170"}
  [1m[35mTeacher Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:update
  [1m[36mLesson Load (1.7ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1[0m  [["id", 170]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1[0m  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[35mCourse Load (0.6ms)[0m  SELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1  [["id", 84]]
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mQaFile Load (0.5ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2 AND "qa_files"."id" IN (27, 28, 29)  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.5ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "qa_files" ("name", "qa_fileable_id", "qa_fileable_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "c391599408515b5b537e1b3f1032452a.html"], ["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"], ["created_at", "2015-09-04 13:12:22.799116"], ["updated_at", "2015-09-04 13:12:22.799116"]]
  [1m[36m (9.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/courses/84?lesson_id=170
Completed 302 Found in 212ms (ActiveRecord: 15.8ms)


Started GET "/courses/84?lesson_id=170" for 10.0.2.2 at 2015-09-04 13:12:22 +0000
Processing by CoursesController#show as HTML
  Parameters: {"lesson_id"=>"170", "id"=>"84"}
  [1m[35mTeacher Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit courses:show
  [1m[36mCourse Load (0.6ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mLesson Load (0.5ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.8ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCurriculum Load (0.6ms)[0m  [1mSELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1[0m  [["id", 379]]
  [1m[35mTeachingProgram Load (1.7ms)[0m  SELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1  [["id", 8]]
  Rendered lessons/_lesson_video.html.erb (1.2ms)
  Rendered lessons/_lesson.html.erb (26.1ms)
  [1m[36mTopic Load (0.6ms)[0m  [1mSELECT  "topics".* FROM "topics" WHERE "topics"."topicable_id" = $1  ORDER BY "topics"."created_at" DESC LIMIT 10 OFFSET 0[0m  [["topicable_id", 170]]
  Rendered collection (0.0ms)
  Rendered topics/_index.html.erb (3.1ms)
  Rendered courses/_course_topics.html.erb (5.9ms)
  [1m[35mLesson Load (0.6ms)[0m  SELECT "lessons".* FROM "lessons" WHERE "lessons"."course_id" = $1  ORDER BY created_at, "lessons"."created_at" ASC  [["course_id", 84]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337069-YGde5_0S7Y_l_1VMsU7kzQ"]]
  [1m[35mVideo Load (0.6ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 171], ["videoable_type", "Lesson"]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1441337349-jT6OnPz5_nlUoZNiqnCZTw"]]
  [1m[35mVideo Load (0.8ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 172], ["videoable_type", "Lesson"]]
  Rendered courses/_course_lessons.html.erb (20.9ms)
  Rendered courses/_course_layout.html.erb (67.2ms)
  Rendered lessons/show.html.erb within layouts/application (69.6ms)
  Rendered layouts/_top_bar.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 165ms (Views: 122.5ms | ActiveRecord: 11.0ms)


Started GET "/teachers/courses/84/lessons/170/edit" for 10.0.2.2 at 2015-09-04 13:12:30 +0000
Processing by Teachers::LessonsController#edit as HTML
  Parameters: {"course_id"=>"84", "id"=>"170"}
  [1m[36mTeacher Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."role" = $1 AND "users"."remember_token" = $2 LIMIT 1[0m  [["role", "teacher"], ["remember_token", "bb72a8e85c6fb5990e0158b6e28e91fc2e3f17b4"]]
张建东 visit teachers/lessons:edit
  [1m[35mLesson Load (0.6ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = $1 LIMIT 1  [["id", 170]]
  [1m[36mVideo Load (0.6ms)[0m  [1mSELECT  "videos".* FROM "videos" WHERE "videos"."token" = $1  ORDER BY "videos"."created_at" DESC LIMIT 1[0m  [["token", "1440929419-v7L-5Om5d8jbACeFXG6Ecg"]]
  [1m[35mVideo Load (0.5ms)[0m  SELECT  "videos".* FROM "videos" WHERE "videos"."videoable_id" = $1 AND "videos"."videoable_type" = $2 LIMIT 1  [["videoable_id", 170], ["videoable_type", "Lesson"]]
  [1m[36mCourse Load (0.5ms)[0m  [1mSELECT  "courses".* FROM "courses" WHERE "courses"."id" = $1 LIMIT 1[0m  [["id", 84]]
  [1m[35mCurriculum Load (0.7ms)[0m  SELECT  "curriculums".* FROM "curriculums" WHERE "curriculums"."id" = $1 LIMIT 1  [["id", 379]]
  [1m[36mTeachingProgram Load (0.5ms)[0m  [1mSELECT  "teaching_programs".* FROM "teaching_programs" WHERE "teaching_programs"."id" = $1 LIMIT 1[0m  [["id", 8]]
  Rendered shared/_error_messages.html.erb (0.2ms)
  Rendered videos/_video.html.erb (0.4ms)
  Rendered videos/_collapse_form.html.erb (10.2ms)
  Rendered videos/_form.html.erb (12.4ms)
  Rendered shared/_error_messages.html.erb (0.1ms)
  [1m[35mQaFile Load (0.7ms)[0m  SELECT "qa_files".* FROM "qa_files" WHERE "qa_files"."qa_fileable_id" = $1 AND "qa_files"."qa_fileable_type" = $2  [["qa_fileable_id", 170], ["qa_fileable_type", "Lesson"]]
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.8ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.4ms)
  Rendered shared/qa_files/_qa_file_fields.html.erb (0.5ms)
  Rendered teachers/lessons/_qa_file_fields.html.erb (0.2ms)
  Rendered teachers/lessons/_submit.html.erb (2.2ms)
  Rendered teachers/lessons/_form.html.erb (50.9ms)
  Rendered teachers/lessons/edit.html.erb within layouts/application (54.6ms)
  Rendered layouts/_top_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 114ms (Views: 99.5ms | ActiveRecord: 4.9ms)
