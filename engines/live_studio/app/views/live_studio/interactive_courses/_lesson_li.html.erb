<%
   lesson = f.object
   object_id = f.object.id
   index = f.index + 1
   lesson.start_time_hour = nil
   lesson.start_time_minute = nil
%>
<li>
  <div class="row">
    <div class="col-md-1">
      <span><%= index < 10 ? "0#{index}" : index %></span>
    </div>
    <div class="col-md-10">
      <div class="col-md-12">
        <span>教师：</span>
        <span><%= lesson.teacher.try(:name) %></span>
        <i class="hide">&lt;修改后&gt;</i>
        <i class="hide preview_teacher_name_<%= object_id %>"><%= lesson.teacher.try(:name) %></i>
        <%= f.error :teacher_id %>
      </div>
      <div class="col-md-12">
        <span>上课时间：</span>
        <span><%= lesson.class_date %> <%= "#{lesson.start_time}-#{lesson.end_time}" %></span>
        <i class="hide">&lt;修改后&gt;</i>
        <i class="hide preview_class_date_<%= object_id %>"><%= lesson.class_date %> <%= "#{lesson.start_time}-#{lesson.end_time}" %></i>
        <%= f.error :class_date %>
      </div>
      <div class="col-md-12">
        <span>课程名称：</span>
        <span><%= lesson.name %> <%= t('view.live_studio/interactie_course.new.lesson_name_text', index: index) %></span>
      </div>
    </div>
    <div class="col-md-1">
      <%= link_to t('activerecord.view.edit'), '#', data: {toggle: 'modal', target: "#adjust_edit_#{object_id}"} %>
    </div>
  </div>
</li>


<div class="modal fade adjust_edit_modal" id="adjust_edit_<%= object_id %>" data-lesson-id="<%= object_id %>" data-field-index="<%= f.index %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog adjust-editor">
    <div class="modal-content">
      <div class="popup-title">
        <span>编辑课程</span>
        <span class="close fa fa-times" data-dismiss="modal" aria-label="Close"></span>
      </div>

      <div class="modal-body">
        <div class="row">
          <div class="col-md-6">
            <span>原老师</span>
            <span><%= lesson.teacher.try(:name) %></span>
          </div>
          <div class="col-md-6">
            <%= f.label :teacher_id, '新老师' %>
            <%= f.select :teacher_id, options_for_select(Teacher.pluck(:name, :id), f.object.teacher_id), {include_blank: t('view.live_studio/interactie_course.placeholder.teacher_id')}, {class: 'form-control'} %>
            <%= f.error :teacher_id %>
          </div>

          <div class="col-md-6">
            <span>原上课日期</span>
            <span><%= lesson.class_date %></span>
          </div>
          <div class="col-md-6">
            <%= f.label :class_date, '新上课日期' %>
            <%= f.text_field :class_date, as: :string, class: 'class_date je-date form-control', placeholder: t('view.live_studio/interactie_course.placeholder.class_date'), readonly: true %>
            <%= f.error :class_date %>
          </div>
          <div class="col-md-6">
            <span>原开始时间</span>
            <span><%= lesson.start_time %></span>
          </div>
          <div class="col-md-6">
            <%= f.label :start_time_hour, '新开始时间' %>
            <%= f.select :start_time_hour, (0..23).to_a.map{|i| i > 9 ? i : "0#{i}"}.insert(0,['时',nil]),{}, class: 'start_time_hour select-time form-control' %>
            <%= f.select :start_time_minute, %w(00 05 10 15 20 25 30 35 40 45 50 55).insert(0, ['分', nil]),{}, class: 'start_time_minute select-time form-control' %>
          </div>
        </div>

        <div class="date-btn">
          <center>
            <a href="javascript:void(0);" data-dismiss="modal" aria-label="Close">取消</a>
            <a href="javascript:void(0);" class="btn-datesave save_modal_btn" data-lesson-id="<%= object_id %>" data-field-index="<%= f.index %>">保存</a>
            <%= hidden_field_tag "modal_click_btn_#{object_id}" %>
            <%= f.input_field :_update, as: :boolean, class: 'hidden' %>
          </center>
        </div>
      </div>

    </div>
  </div>
</div>